"use strict";(self.webpackChunkmsal_angular_tutorial=self.webpackChunkmsal_angular_tutorial||[]).push([[792],{60:()=>{function ue(n){return"function"==typeof n}function Pi(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Fa=Pi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Oi(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class At{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ue(r))try{r()}catch(i){e=i instanceof Fa?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{mv(i)}catch(s){e=e??[],s instanceof Fa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mv(e);else{if(e instanceof At){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Oi(t,e)}remove(e){const{_finalizers:t}=this;t&&Oi(t,e),e instanceof At&&e._removeParent(this)}}At.EMPTY=(()=>{const n=new At;return n.closed=!0,n})();const pv=At.EMPTY;function gv(n){return n instanceof At||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function mv(n){ue(n)?n():n.unsubscribe()}const Tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ua={setTimeout(n,e,...t){const{delegate:r}=Ua;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ua;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yv(n){Ua.setTimeout(()=>{const{onUnhandledError:e}=Tr;if(!e)throw n;e(n)})}function Wd(){}const TR=Qd("C",void 0,void 0);function Qd(n,e,t){return{kind:n,value:e,error:t}}let Sr=null;function Ha(n){if(Tr.useDeprecatedSynchronousErrorHandling){const e=!Sr;if(e&&(Sr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Sr;if(Sr=null,t)throw r}}else n()}class Yd extends At{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gv(e)&&e.add(this)):this.destination=kR}static create(e,t,r){return new xi(e,t,r)}next(e){this.isStopped?Zd(function AR(n){return Qd("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Zd(function SR(n){return Qd("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zd(TR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bR=Function.prototype.bind;function Jd(n,e){return bR.call(n,e)}class RR{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ba(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ba(r)}else Ba(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ba(t)}}}class xi extends Yd{constructor(e,t,r){let o;if(super(),ue(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Tr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Jd(e.next,i),error:e.error&&Jd(e.error,i),complete:e.complete&&Jd(e.complete,i)}):o=e}this.destination=new RR(o)}}function Ba(n){Tr.useDeprecatedSynchronousErrorHandling?function DR(n){Tr.useDeprecatedSynchronousErrorHandling&&Sr&&(Sr.errorThrown=!0,Sr.error=n)}(n):yv(n)}function Zd(n,e){const{onStoppedNotification:t}=Tr;t&&Ua.setTimeout(()=>t(n,e))}const kR={closed:!0,next:Wd,error:function MR(n){throw n},complete:Wd},Xd="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jn(n){return n}function vv(n){return 0===n.length?Jn:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let Ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function OR(n){return n&&n instanceof Yd||function PR(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&gv(n)}(t)?t:new xi(t,r,o);return Ha(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Cv(r))((o,i)=>{const s=new xi({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Xd](){return this}pipe(...t){return vv(t)(this)}toPromise(t){return new(t=Cv(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Cv(n){var e;return null!==(e=n??Tr.Promise)&&void 0!==e?e:Promise}const xR=Pi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Dt=(()=>{class n extends Ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Iv(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new xR}next(t){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?pv:(this.currentObservers=null,i.push(t),new At(()=>{this.currentObservers=null,Oi(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new Ne;return t.source=this,t}}return n.create=(e,t)=>new Iv(e,t),n})();class Iv extends Dt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:pv}}function Ev(n){return ue(n?.lift)}function Pe(n){return e=>{if(Ev(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(n,e,t,r,o){return new LR(n,e,t,r,o)}class LR extends Yd{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function le(n,e){return Pe((t,r)=>{let o=0;t.subscribe(Oe(r,i=>{r.next(n.call(e,i,o++))}))})}function Zn(n){return this instanceof Zn?(this.v=n,this):new Zn(n)}function Sv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function rh(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}(a,c,(s=n[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Av=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Dv(n){return ue(n?.then)}function bv(n){return ue(n[Xd])}function Rv(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function Mv(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const kv=function uM(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Nv(n){return ue(n?.[kv])}function Pv(n){return function Tv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(g){return Promise.resolve(g).then(f,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(f,g){r[f]&&(o[f]=function(y){return new Promise(function(C,_){i.push([f,y,C,_])>1||c(f,y)})},g&&(o[f]=g(o[f])))}function c(f,g){try{!function u(f){f.value instanceof Zn?Promise.resolve(f.value.v).then(l,d):h(i[0][2],f)}(r[f](g))}catch(y){h(i[0][3],y)}}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield Zn(t.read());if(o)return yield Zn(void 0);yield yield Zn(r)}}finally{t.releaseLock()}})}function Ov(n){return ue(n?.getReader)}function Ht(n){if(n instanceof Ne)return n;if(null!=n){if(bv(n))return function lM(n){return new Ne(e=>{const t=n[Xd]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Av(n))return function dM(n){return new Ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Dv(n))return function hM(n){return new Ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yv)})}(n);if(Rv(n))return xv(n);if(Nv(n))return function fM(n){return new Ne(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ov(n))return function pM(n){return xv(Pv(n))}(n)}throw Mv(n)}function xv(n){return new Ne(e=>{(function gM(n,e){var t,r,o,i;return function wv(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):function o(i){return i instanceof t?i:new t(function(s){s(i)})}(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Sv(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Nn(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Ye(n,e,t=1/0){return ue(e)?Ye((r,o)=>le((i,s)=>e(r,i,o,s))(Ht(n(r,o))),t):("number"==typeof e&&(t=e),Pe((r,o)=>function mM(n,e,t,r,o,i,s,a){const c=[];let u=0,l=0,d=!1;const h=()=>{d&&!c.length&&!u&&e.complete()},f=y=>u<r?g(y):c.push(y),g=y=>{i&&e.next(y),u++;let C=!1;Ht(t(y,l++)).subscribe(Oe(e,_=>{o?.(_),i?f(_):e.next(_)},()=>{C=!0},void 0,()=>{if(C)try{for(u--;c.length&&u<r;){const _=c.shift();s?Nn(e,s,()=>g(_)):g(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(Oe(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function ja(n=1/0){return Ye(Jn,n)}const pn=new Ne(n=>n.complete());function ih(n){return n[n.length-1]}function Li(n){return function vM(n){return n&&ue(n.schedule)}(ih(n))?n.pop():void 0}function Lv(n,e=0){return Pe((t,r)=>{t.subscribe(Oe(r,o=>Nn(r,n,()=>r.next(o),e),()=>Nn(r,n,()=>r.complete(),e),o=>Nn(r,n,()=>r.error(o),e)))})}function Fv(n,e=0){return Pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Uv(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ne(t=>{Nn(t,e,()=>{const r=n[Symbol.asyncIterator]();Nn(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function pe(n,e){return e?function AM(n,e){if(null!=n){if(bv(n))return function EM(n,e){return Ht(n).pipe(Fv(e),Lv(e))}(n,e);if(Av(n))return function _M(n,e){return new Ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Dv(n))return function wM(n,e){return Ht(n).pipe(Fv(e),Lv(e))}(n,e);if(Rv(n))return Uv(n,e);if(Nv(n))return function TM(n,e){return new Ne(t=>{let r;return Nn(t,e,()=>{r=n[kv](),Nn(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>ue(r?.return)&&r.return()})}(n,e);if(Ov(n))return function SM(n,e){return Uv(Pv(n),e)}(n,e)}throw Mv(n)}(n,e):Ht(n)}class bt extends Dt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function L(...n){return pe(n,Li(n))}function Hv(n={}){const{connector:e=(()=>new Dt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,c,u=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},g=()=>{const y=s;f(),y?.unsubscribe()};return Pe((y,C)=>{u++,!d&&!l&&h();const _=c=c??e();C.add(()=>{u--,0===u&&!d&&!l&&(a=sh(g,o))}),_.subscribe(C),!s&&u>0&&(s=new xi({next:v=>_.next(v),error:v=>{d=!0,h(),a=sh(f,t,v),_.error(v)},complete:()=>{l=!0,h(),a=sh(f,r),_.complete()}}),Ht(y).subscribe(s))})(i)}}function sh(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new xi({next:()=>{r.unsubscribe(),n()}});return Ht(e(...t)).subscribe(r)}function Pn(n,e){return Pe((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(Oe(r,c=>{o?.unsubscribe();let u=0;const l=i++;Ht(n(c,l)).subscribe(o=Oe(r,d=>r.next(e?e(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function RM(n,e){return n===e}function se(n){for(let e in n)if(n[e]===se)return e;throw Error("Could not find renamed property on target object.")}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ah(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const MM=se({__forward_ref__:se});function ch(n){return n.__forward_ref__=ch,n.toString=function(){return xe(this())},n}function H(n){return uh(n)?n():n}function uh(n){return"function"==typeof n&&n.hasOwnProperty(MM)&&n.__forward_ref__===ch}function lh(n){return n&&!!n.\u0275providers}class S extends Error{constructor(e,t){super(function Va(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function oe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function V(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function dh(n,e){throw new S(-201,!1)}function Bt(n,e){null==n&&function F(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ga(n){return jv(n,qa)||jv(n,$v)}function jv(n,e){return n.hasOwnProperty(e)?n[e]:null}function za(n){return n&&(n.hasOwnProperty(hh)||n.hasOwnProperty(UM))?n[hh]:null}const qa=se({\u0275prov:se}),hh=se({\u0275inj:se}),$v=se({ngInjectableDef:se}),UM=se({ngInjectorDef:se});var J=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(J||{});let fh;function mt(n){const e=fh;return fh=n,e}function Gv(n,e,t){const r=Ga(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&J.Optional?null:void 0!==e?e:void dh(xe(n))}const ge=globalThis;class k{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fi={},vh="__NG_DI_FLAG__",Ka="ngTempTokenPath",jM=/\n/gm,qv="__source";let to;function Xn(n){const e=to;return to=n,e}function GM(n,e=J.Default){if(void 0===to)throw new S(-203,!1);return null===to?Gv(n,void 0,e):to.get(n,e&J.Optional?null:void 0,e)}function O(n,e=J.Default){return(function Vv(){return fh}()||GM)(H(n),e)}function P(n,e=J.Default){return O(n,Wa(e))}function Wa(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ch(n){const e=[];for(let t=0;t<n.length;t++){const r=H(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let o,i=J.Default;for(let s=0;s<r.length;s++){const a=r[s],c=zM(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(O(o,i))}else e.push(O(r))}return e}function zM(n){return n[vh]}function On(n){return{toString:n}.toString()}var Qa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Qa||{}),Kt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kt||{});const gn={},te=[],Ya=se({\u0275cmp:se}),Ih=se({\u0275dir:se}),Eh=se({\u0275pipe:se}),Wv=se({\u0275mod:se}),xn=se({\u0275fac:se}),Hi=se({__NG_ELEMENT_ID__:se}),Qv=se({__NG_ENV_ID__:se});function Yv(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function wh(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];Zv(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function Jv(n){return 3===n||4===n||6===n}function Zv(n){return 64===n.charCodeAt(0)}function Bi(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||Xv(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function Xv(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}const eC="ng-template";function WM(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==Yv(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function tC(n){return 4===n.type&&n.value!==eC}function QM(n,e,t){return e===(4!==n.type||t?n.value:eC)}function YM(n,e,t){let r=4;const o=n.attrs||[],i=function XM(n){for(let e=0;e<n.length;e++)if(Jv(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!QM(n,c,t)||""===c&&1===e.length){if(Wt(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!WM(n.attrs,u,t)){if(Wt(r))return!1;s=!0}continue}const d=JM(8&r?"class":c,o,tC(n),t);if(-1===d){if(Wt(r))return!1;s=!0;continue}if(""!==u){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Yv(f,u,0)||2&r&&u!==h){if(Wt(r))return!1;s=!0}}}}else{if(!s&&!Wt(r)&&!Wt(c))return!1;if(s&&Wt(c))continue;s=!1,r=c|1&r}}return Wt(r)||s}function Wt(n){return 0==(1&n)}function JM(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function ek(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function nC(n,e,t=!1){for(let r=0;r<e.length;r++)if(YM(n,e[r],t))return!0;return!1}function rC(n,e){return n?":not("+e.trim()+")":e}function nk(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Wt(s)&&(e+=rC(i,o),o=""),r=s,i=i||!Wt(r);t++}return""!==o&&(e+=rC(i,o)),e}function Ja(n){return On(()=>{const e=iC(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Qa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kt.Emulated,styles:n.styles||te,_:null,schemas:n.schemas||null,tView:null,id:""};sC(t);const r=n.dependencies;return t.directiveDefs=Za(r,!1),t.pipeDefs=Za(r,!0),t.id=function lk(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function sk(n){return Z(n)||Be(n)}function ak(n){return null!==n}function no(n){return On(()=>({type:n.type,bootstrap:n.bootstrap||te,declarations:n.declarations||te,imports:n.imports||te,exports:n.exports||te,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function oC(n,e){if(null==n)return gn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function rt(n){return On(()=>{const e=iC(n);return sC(e),e})}function Z(n){return n[Ya]||null}function Be(n){return n[Ih]||null}function ot(n){return n[Eh]||null}function Mt(n,e){const t=n[Wv]||null;if(!t&&!0===e)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return t}function iC(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||gn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||te,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oC(n.inputs,e),outputs:oC(n.outputs)}}function sC(n){n.features?.forEach(e=>e(n))}function Za(n,e){if(!n)return null;const t=e?ot:sk;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ak)}const Te=0,A=1,K=2,Ie=3,Qt=4,ji=5,Je=6,oo=7,Ae=8,er=9,io=10,G=11,$i=12,aC=13,so=14,De=15,Vi=16,ao=17,mn=18,Gi=19,cC=20,tr=21,Ln=22,zi=23,qi=24,Y=25,_h=1,uC=2,yn=7,co=9,je=11;function vt(n){return Array.isArray(n)&&"object"==typeof n[_h]}function it(n){return Array.isArray(n)&&!0===n[_h]}function Th(n){return 0!=(4&n.flags)}function br(n){return n.componentOffset>-1}function ec(n){return 1==(1&n.flags)}function Yt(n){return!!n.template}function Sh(n){return 0!=(512&n[K])}function Rr(n,e){return n.hasOwnProperty(xn)?n[xn]:null}let $e=null,tc=!1;function jt(n){const e=$e;return $e=n,e}const hC={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function pC(n){if(!Wi(n)||n.dirty){if(!n.producerMustRecompute(n)&&!yC(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function mC(n){n.dirty=!0,function gC(n){if(void 0===n.liveConsumerNode)return;const e=tc;tc=!0;try{for(const t of n.liveConsumerNode)t.dirty||mC(t)}finally{tc=e}}(n),n.consumerMarkedDirty?.(n)}function Dh(n){return n&&(n.nextProducerIndex=0),jt(n)}function bh(n,e){if(jt(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Wi(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)nc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function yC(n){uo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(pC(t),r!==t.version))return!0}return!1}function vC(n){if(uo(n),Wi(n))for(let e=0;e<n.producerNode.length;e++)nc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function nc(n,e){if(function IC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),uo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)nc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];uo(o),o.producerIndexOfThis[r]=e}}function Wi(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function uo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let EC=null;const SC=()=>{},_k=(()=>({...hC,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:SC}))();class Tk{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Mr(){return AC}function AC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ak),Sk}function Sk(){const n=bC(this),e=n?.current;if(e){const t=n.previous;if(t===gn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ak(n,e,t,r){const o=this.declaredInputs[t],i=bC(n)||function Dk(n,e){return n[DC]=e}(n,{previous:gn,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new Tk(c&&c.currentValue,e,a===gn),n[r]=e}Mr.ngInherit=!0;const DC="__ngSimpleChanges__";function bC(n){return n[DC]||null}const vn=function(n,e,t){};function me(n){for(;Array.isArray(n);)n=n[Te];return n}function Ct(n,e){return me(e[n.index])}function kt(n,e){const t=e[n];return vt(t)?t:t[Te]}function rr(n,e){return null==e?null:n[e]}function NC(n){n[ao]=0}function Pk(n){1024&n[K]||(n[K]|=1024,OC(n,1))}function PC(n){1024&n[K]&&(n[K]&=-1025,OC(n,-1))}function OC(n,e){let t=n[Ie];if(null===t)return;t[ji]+=e;let r=t;for(t=t[Ie];null!==t&&(1===e&&1===r[ji]||-1===e&&0===r[ji]);)t[ji]+=e,r=t,t=t[Ie]}const U={lFrame:zC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function FC(){return U.bindingsEnabled}function w(){return U.lFrame.lView}function X(){return U.lFrame.tView}function Ve(){let n=UC();for(;null!==n&&64===n.type;)n=n.parent;return n}function UC(){return U.lFrame.currentTNode}function Cn(n,e){const t=U.lFrame;t.currentTNode=n,t.isParent=e}function Ph(){return U.lFrame.isParent}function Kk(n,e){const t=U.lFrame;t.bindingIndex=t.bindingRootIndex=n,xh(e)}function xh(n){U.lFrame.currentDirectiveIndex=n}function Fh(n){U.lFrame.currentQueryIndex=n}function Qk(n){const e=n[A];return 2===e.type?e.declTNode:1===e.type?n[Je]:null}function VC(n,e,t){if(t&J.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&J.Host||(o=Qk(i),null===o||(i=i[so],10&o.type))););if(null===o)return!1;e=o,n=i}const r=U.lFrame=GC();return r.currentTNode=e,r.lView=n,!0}function Uh(n){const e=GC(),t=n[A];U.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function GC(){const n=U.lFrame,e=null===n?null:n.child;return null===e?zC(n):e}function zC(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function qC(){const n=U.lFrame;return U.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const KC=qC;function Hh(){const n=qC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kr(n){U.lFrame.selectedIndex=n}let QC=!0;function oc(){return QC}function or(n){QC=n}function ic(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=l&&(n.destroyHooks??=[]).push(t,l)}}function sc(n,e,t){YC(n,e,3,t)}function ac(n,e,t,r){(3&n[K])===t&&YC(n,e,t,r)}function Bh(n,e){let t=n[K];(3&t)===e&&(t&=8191,t+=1,n[K]=t)}function YC(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[ao]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[ao]+=65536),(a<i||-1==i)&&(rN(n,t,e,c),n[ao]=(4294901760&n[ao])+c+2),c++}function JC(n,e){vn(4,n,e);const t=jt(null);try{e.call(n)}finally{jt(t),vn(5,n,e)}}function rN(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];o?n[K]>>13<n[ao]>>16&&(3&n[K])===e&&(n[K]+=8192,JC(a,i)):JC(a,i)}const po=-1;class Yi{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function $h(n){return n!==po}function Ji(n){return 32767&n}function Zi(n,e){let t=function aN(n){return n>>16}(n),r=e;for(;t>0;)r=r[so],t--;return r}let Vh=!0;function cc(n){const e=Vh;return Vh=n,e}const ZC=255,XC=5;let cN=0;const In={};function uc(n,e){const t=eI(n,e);if(-1!==t)return t;const r=e[A];r.firstCreatePass&&(n.injectorIndex=e.length,Gh(r.data,n),Gh(e,null),Gh(r.blueprint,null));const o=lc(n,e),i=n.injectorIndex;if($h(o)){const s=Ji(o),a=Zi(o,e),c=a[A].data;for(let u=0;u<8;u++)e[i+u]=a[s+u]|c[s+u]}return e[i+8]=o,i}function Gh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eI(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function lc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=cI(o),null===r)return po;if(t++,o=o[so],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return po}function zh(n,e,t){!function uN(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hi)&&(r=t[Hi]),null==r&&(r=t[Hi]=cN++);const o=r&ZC;e.data[n+(o>>XC)]|=1<<o}(n,e,t)}function tI(n,e,t){if(t&J.Optional||void 0!==n)return n;dh()}function nI(n,e,t,r){if(t&J.Optional&&void 0===r&&(r=null),!(t&(J.Self|J.Host))){const o=n[er],i=mt(void 0);try{return o?o.get(e,r,t&J.Optional):Gv(e,r,t&J.Optional)}finally{mt(i)}}return tI(r,0,t)}function rI(n,e,t,r=J.Default,o){if(null!==n){if(2048&e[K]&&!(r&J.Self)){const s=function gN(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&2048&s[K]&&!(512&s[K]);){const a=oI(i,s,t,r|J.Self,In);if(a!==In)return a;let c=i.parent;if(!c){const u=s[cC];if(u){const l=u.get(t,In,r);if(l!==In)return l}c=cI(s),s=s[so]}i=c}return o}(n,e,t,r,In);if(s!==In)return s}const i=oI(n,e,t,r,In);if(i!==In)return i}return nI(e,t,r,o)}function oI(n,e,t,r,o){const i=function hN(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Hi)?n[Hi]:void 0;return"number"==typeof e?e>=0?e&ZC:pN:e}(t);if("function"==typeof i){if(!VC(e,n,r))return r&J.Host?tI(o,0,r):nI(e,t,r,o);try{let s;if(s=i(r),null!=s||r&J.Optional)return s;dh()}finally{KC()}}else if("number"==typeof i){let s=null,a=eI(n,e),c=po,u=r&J.Host?e[De][Je]:null;for((-1===a||r&J.SkipSelf)&&(c=-1===a?lc(n,e):e[a+8],c!==po&&sI(r,!1)?(s=e[A],a=Ji(c),e=Zi(c,e)):a=-1);-1!==a;){const l=e[A];if(iI(i,a,l.data)){const d=dN(a,e,t,s,r,u);if(d!==In)return d}c=e[a+8],c!==po&&sI(r,e[A].data[a+8]===u)&&iI(i,a,e)?(s=l,a=Ji(c),e=Zi(c,e)):a=-1}}return o}function dN(n,e,t,r,o,i){const s=e[A],a=s.data[n+8],l=function dc(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,c=n.directiveStart,l=i>>20,h=o?a+l:n.directiveEnd;for(let f=r?a:a+l;f<h;f++){const g=s[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(o){const f=s[c];if(f&&Yt(f)&&f.type===t)return c}return null}(a,s,t,null==r?br(a)&&Vh:r!=s&&0!=(3&a.type),o&J.Host&&i===a);return null!==l?Nr(e,s,l,a):In}function Nr(n,e,t,r){let o=n[t];const i=e.data;if(function oN(n){return n instanceof Yi}(o)){const s=o;s.resolving&&function kM(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(oe(i[t]));const a=cc(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?mt(s.injectImpl):null;VC(n,r,J.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function nN(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=AC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}(t,i[t],e)}finally{null!==u&&mt(u),cc(a),s.resolving=!1,KC()}}return o}function iI(n,e,t){return!!(t[e+(n>>XC)]&1<<n)}function sI(n,e){return!(n&J.Self||n&J.Host&&e)}class ct{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rI(this._tNode,this._lView,e,Wa(r),t)}}function pN(){return new ct(Ve(),w())}function qh(n){return uh(n)?()=>{const e=qh(H(n));return e&&e()}:Rr(n)}function cI(n){const e=n[A],t=e.type;return 2===t?e.declTNode:1===t?n[Je]:null}function Io(n,e){n.forEach(t=>Array.isArray(t)?Io(t,e):e(t))}function lI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Cc(n){return 128==(128&n.flags)}var ir=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ir||{});const tf=new Map;let qN=0;const rf="__ngContext__";function Ze(n,e){vt(e)?(n[rf]=e[Gi],function WN(n){tf.set(n[Gi],n)}(e)):n[rf]=e}let sf;function af(n,e){return sf(n,e)}function os(n){const e=n[Ie];return it(e)?e[Ie]:e}function kI(n){return PI(n[$i])}function NI(n){return PI(n[Qt])}function PI(n){for(;null!==n&&!it(n);)n=n[Qt];return n}function To(n,e,t,r,o){if(null!=r){let i,s=!1;it(r)?i=r:vt(r)&&(s=!0,r=r[Te]);const a=me(r);0===n&&null!==t?null==o?FI(e,t,a):Pr(e,t,a,o||null,!0):1===n&&null!==t?Pr(e,t,a,o||null,!0):2===n?function Ac(n,e,t){const r=Tc(n,e);r&&function fP(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function mP(n,e,t,r,o){const i=t[yn];i!==me(t)&&To(e,n,r,i,o);for(let a=je;a<t.length;a++){const c=t[a];ss(c[A],c,n,e,r,i)}}(e,n,i,t,o)}}function wc(n,e,t){return n.createElement(e,t)}function xI(n,e){const t=n[co],r=t.indexOf(e);PC(e),t.splice(r,1)}function _c(n,e){if(n.length<=je)return;const t=je+e,r=n[t];if(r){const o=r[Vi];null!==o&&o!==n&&xI(o,r),e>0&&(n[t-1][Qt]=r[Qt]);const i=fc(n,je+e);!function iP(n,e){ss(n,e,e[G],2,null,null),e[Te]=null,e[Je]=null}(r[A],r);const s=i[mn];null!==s&&s.detachView(i[A]),r[Ie]=null,r[Qt]=null,r[K]&=-129}return r}function uf(n,e){if(!(256&e[K])){const t=e[G];e[zi]&&vC(e[zi]),e[qi]&&vC(e[qi]),t.destroyNode&&ss(n,e,t,3,null,null),function cP(n){let e=n[$i];if(!e)return lf(n[A],n);for(;e;){let t=null;if(vt(e))t=e[$i];else{const r=e[je];r&&(t=r)}if(!t){for(;e&&!e[Qt]&&e!==n;)vt(e)&&lf(e[A],e),e=e[Ie];null===e&&(e=n),vt(e)&&lf(e[A],e),t=e&&e[Qt]}e=t}}(e)}}function lf(n,e){if(!(256&e[K])){e[K]&=-129,e[K]|=256,function hP(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof Yi)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];vn(4,a,c);try{c.call(a)}finally{vn(5,a,c)}}else{vn(4,o,i);try{i.call(o)}finally{vn(5,o,i)}}}}}(n,e),function dP(n,e){const t=n.cleanup,r=e[oo];if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else t[i].call(r[t[i+1]]);null!==r&&(e[oo]=null);const o=e[tr];if(null!==o){e[tr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(n,e),1===e[A].type&&e[G].destroy();const t=e[Vi];if(null!==t&&it(e[Ie])){t!==e[Ie]&&xI(t,e);const r=e[mn];null!==r&&r.detachView(n)}!function QN(n){tf.delete(n[Gi])}(e)}}function df(n,e,t){return function LI(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Te];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===Kt.None||i===Kt.Emulated)return null}return Ct(r,t)}}(n,e.parent,t)}function Pr(n,e,t,r,o){n.insertBefore(e,t,r,o)}function FI(n,e,t){n.appendChild(e,t)}function UI(n,e,t,r,o){null!==r?Pr(n,e,t,r,o):FI(n,e,t)}function Tc(n,e){return n.parentNode(e)}let hf,mf,jI=function BI(n,e,t){return 40&n.type?Ct(n,t):null};function Sc(n,e,t,r){const o=df(n,r,e),i=e[G],a=function HI(n,e,t){return jI(n,e,t)}(r.parent||e[Je],r,e);if(null!=o)if(Array.isArray(t))for(let c=0;c<t.length;c++)UI(i,o,t[c],a,!1);else UI(i,o,t,a,!1);void 0!==hf&&hf(i,r,e,t,o)}function is(n,e){if(null!==e){const t=e.type;if(3&t)return Ct(e,n);if(4&t)return ff(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return is(n,r);{const o=n[e.index];return it(o)?ff(-1,o):me(o)}}if(32&t)return af(e,n)()||me(n[e.index]);{const r=VI(n,e);return null!==r?Array.isArray(r)?r[0]:is(os(n[De]),r):is(n,e.next)}}return null}function VI(n,e){return null!==e?n[De][Je].projection[e.projection]:null}function ff(n,e){const t=je+n+1;if(t<e.length){const r=e[t],o=r[A].firstChild;if(null!==o)return is(r,o)}return e[yn]}function pf(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Ze(me(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)pf(n,e,t.child,r,o,i,!1),To(e,n,o,a,i);else if(32&c){const u=af(t,r);let l;for(;l=u();)To(e,n,o,l,i);To(e,n,o,a,i)}else 16&c?zI(n,e,r,t,o,i):To(e,n,o,a,i);t=s?t.projectionNext:t.next}}function ss(n,e,t,r,o,i){pf(t,r,n.firstChild,e,o,i,!1)}function zI(n,e,t,r,o,i){const s=t[De],c=s[Je].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)To(e,n,o,c[u],i);else{let u=c;const l=s[Ie];Cc(r)&&(u.flags|=128),pf(n,e,u,l,o,i,!0)}}function qI(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function KI(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&wh(n,e,r),null!==o&&qI(n,e,o),null!==i&&function vP(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}const ls=new k("ENVIRONMENT_INITIALIZER"),aE=new k("INJECTOR",-1),cE=new k("INJECTOR_DEF_TYPES");class wf{get(e,t=Fi){if(t===Fi){const r=new Error(`NullInjectorError: No provider for ${xe(e)}!`);throw r.name="NullInjectorError",r}return t}}function zP(...n){return{\u0275providers:lE(0,n),\u0275fromNgModule:!0}}function lE(n,...e){const t=[],r=new Set;let o;const i=s=>{t.push(s)};return Io(e,s=>{const a=s;Mc(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&dE(o,i),t}function dE(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:o}=n[t];_f(o,i=>{e(i,r)})}}function Mc(n,e,t,r){if(!(n=H(n)))return!1;let o=null,i=za(n);const s=!i&&Z(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const c=n.ngModule;if(i=za(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Mc(u,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let u;r.add(o);try{Io(i.imports,l=>{Mc(l,e,t,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&dE(u,e)}if(!a){const u=Rr(o)||(()=>new o);e({provide:o,useFactory:u,deps:te},o),e({provide:cE,useValue:o,multi:!0},o),e({provide:ls,useValue:()=>O(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const u=n;_f(c,l=>{e(l,u)})}}}return o!==n&&void 0!==n.providers}function _f(n,e){for(let t of n)lh(t)&&(t=t.\u0275providers),Array.isArray(t)?_f(t,e):e(t)}const qP=se({provide:String,useValue:se});function Tf(n){return null!==n&&"object"==typeof n&&qP in n}function Or(n){return"function"==typeof n}const Sf=new k("Set Injector scope."),kc={},WP={};let Af;function Nc(){return void 0===Af&&(Af=new wf),Af}class Jt{}class bo extends Jt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bf(e,s=>this.processProvider(s)),this.records.set(aE,Ro(void 0,this)),o.has("environment")&&this.records.set(Jt,Ro(void 0,this));const i=this.records.get(Sf);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(cE.multi,te,J.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Xn(this),r=mt(void 0);try{return e()}finally{Xn(t),mt(r)}}get(e,t=Fi,r=J.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Qv))return e[Qv](this);r=Wa(r);const i=Xn(this),s=mt(void 0);try{if(!(r&J.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function XP(n){return"function"==typeof n||"object"==typeof n&&n instanceof k}(e)&&Ga(e);c=u&&this.injectableDefInScope(u)?Ro(Df(e),kc):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&J.Self?Nc():this.parent).get(e,t=r&J.Optional&&t===Fi?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ka]=a[Ka]||[]).unshift(xe(e)),i)throw a;return function qM(n,e,t,r){const o=n[Ka];throw e[qv]&&o.unshift(e[qv]),n.message=function KM(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let o=xe(e);if(Array.isArray(e))o=e.map(xe).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):xe(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(jM,"\n  ")}`}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[Ka]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{mt(s),Xn(i)}}resolveInjectorInitializers(){const e=Xn(this),t=mt(void 0);try{const o=this.get(ls.multi,te,J.Self);for(const i of o)i()}finally{Xn(e),mt(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(xe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=Or(e=H(e))?e:H(e&&e.provide);const r=function YP(n){return Tf(n)?Ro(void 0,n.useValue):Ro(function pE(n,e,t){let r;if(Or(n)){const o=H(n);return Rr(o)||Df(o)}if(Tf(n))r=()=>H(n.useValue);else if(function fE(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ch(n.deps||[]));else if(function hE(n){return!(!n||!n.useExisting)}(n))r=()=>O(H(n.useExisting));else{const o=H(n&&(n.useClass||n.provide));if(!function JP(n){return!!n.deps}(n))return Rr(o)||Df(o);r=()=>new o(...Ch(n.deps))}return r}(n),kc)}(e);if(Or(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=Ro(void 0,kc,!0),o.factory=()=>Ch(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===kc&&(t.value=WP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function ZP(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=H(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Df(n){const e=Ga(n),t=null!==e?e.factory:Rr(n);if(null!==t)return t;if(n instanceof k)throw new S(204,!1);if(n instanceof Function)return function QP(n){const e=n.length;if(e>0)throw function ts(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new S(204,!1);const t=function FM(n){return n&&(n[qa]||n[$v])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function Ro(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bf(n,e){for(const t of n)Array.isArray(t)?bf(t,e):t&&lh(t)?bf(t.\u0275providers,e):e(t)}const Pc=new k("AppId",{providedIn:"root",factory:()=>eO}),eO="ng",gE=new k("Platform Initializer"),Mo=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mE=new k("CSP nonce",{providedIn:"root",factory:()=>function Ao(){if(void 0!==mf)return mf;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let yE=(n,e,t)=>null;function Lf(n,e,t=!1){return yE(n,e,t)}class lO{}class IE{}class hO{resolveComponentFactory(e){throw function dO(n){const e=Error(`No component factory found for ${xe(n)}.`);return e.ngComponent=n,e}(e)}}let Hc=(()=>{class n{static{this.NULL=new hO}}return n})();function fO(){return Po(Ve(),w())}function Po(n,e){return new ar(Ct(n,e))}let ar=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=fO}}return n})();class wE{}let mO=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>null})}}return n})();class jc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yO=new jc("16.2.12"),Hf={};function AE(n,e=null,t=null,r){const o=DE(n,e,t,r);return o.resolveInjectorInitializers(),o}function DE(n,e=null,t=null,r,o=new Set){const i=[t||te,zP(n)];return r=r||("object"==typeof n?void 0:xe(n)),new bo(i,e||Nc(),r||null,o)}let Zt=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Fi}static{this.NULL=new wf}static create(t,r){if(Array.isArray(t))return AE({name:""},r,t,"");{const o=t.name??"";return AE({name:o},t.parent,t.providers,o)}}static{this.\u0275prov=B({token:n,providedIn:"any",factory:()=>O(aE)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function jf(n){return n.ngOriginalError}class Bn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&jf(e);for(;t&&jf(t);)t=jf(t);return t||null}}function $f(n){return e=>{setTimeout(n,void 0,e)}}const ut=class SO extends Dt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=$f(i),o&&(o=$f(o)),s&&(s=$f(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof At&&e.add(a),a}};function RE(...n){}class Ce{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function AO(){const n="function"==typeof ge.requestAnimationFrame;let e=ge[n?"requestAnimationFrame":"setTimeout"],t=ge[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function RO(n){const e=()=>{!function bO(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ge,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Gf(n),n.isCheckStableRunning=!0,Vf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Gf(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{if(function kO(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(o,i,s,a);try{return ME(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),kE(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return ME(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),kE(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Gf(n),Vf(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ce.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(Ce.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,DO,RE,RE);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const DO={};function Vf(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gf(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ME(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kE(n){n._nesting--,Vf(n)}class MO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}const NE=new k("",{providedIn:"root",factory:PE});function PE(){const n=P(Ce);let e=!0;return function DM(...n){const e=Li(n),t=function IM(n,e){return"number"==typeof ih(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ht(r[0]):ja(t)(pe(r,e)):pn}(new Ne(o=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{o.next(e),o.complete()})}),new Ne(o=>{let i;n.runOutsideAngular(()=>{i=n.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,o.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(Hv()))}function jn(n){return n instanceof Function?n():n}let zf=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})();function fs(n){for(;n;){n[K]|=64;const e=os(n);if(Sh(n)&&!e)return n;n=e}return null}const UE=new k("",{providedIn:"root",factory:()=>!1});let Gc=null;function $E(n,e){return n[e]??zE()}function VE(n,e){const t=zE();t.producerNode?.length&&(n[e]=Gc,t.lView=n,Gc=GE())}const jO={...hC,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{fs(n.lView)},lView:null};function GE(){return Object.create(jO)}function zE(){return Gc??=GE(),Gc}const q={};function x(n,e=J.Default){const t=w();return null===t?O(n,e):rI(Ve(),t,H(n),e)}function zc(n,e,t,r,o,i,s,a,c,u,l){const d=e.blueprint.slice();return d[Te]=o,d[K]=140|r,(null!==u||n&&2048&n[K])&&(d[K]|=2048),NC(d),d[Ie]=d[so]=n,d[Ae]=t,d[io]=s||n&&n[io],d[G]=a||n&&n[G],d[er]=c||n&&n[er]||null,d[Je]=i,d[Gi]=function KN(){return qN++}(),d[Ln]=l,d[cC]=u,d[De]=2==e.type?n[De]:d,d}function Lo(n,e,t,r,o){let i=n.data[e];if(null===i)i=function qf(n,e,t,r,o){const i=UC(),s=Ph(),c=n.data[e]=function JO(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function ho(){return null!==U.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(n,e,t,r,o),function qk(){return U.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function Qi(){const n=U.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Cn(i,!0),i}function ps(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function KE(n,e,t,r,o){const i=$E(e,zi),s=function at(){return U.lFrame.selectedIndex}(),a=2&r;try{kr(-1),a&&e.length>Y&&function qE(n,e,t,r){if(!r)if(3==(3&e[K])){const i=n.preOrderCheckHooks;null!==i&&sc(e,i,t)}else{const i=n.preOrderHooks;null!==i&&ac(e,i,0,t)}kr(t)}(n,e,Y,!1),vn(a?2:0,o);const u=a?i:null,l=Dh(u);try{null!==u&&(u.dirty=!1),t(r,o)}finally{bh(u,l)}}finally{a&&null===e[zi]&&VE(e,zi),kr(s),vn(a?3:1,o)}}function Kf(n,e,t){if(Th(e)){const r=jt(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{jt(r)}}}function WE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Yf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Yf(n,e,t,r,o,i,s,a,c,u,l){const d=Y+r,h=d+o,f=function zO(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:q);return t}(d,h),g="function"==typeof u?u():u;return f[A]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}let QE=n=>null;function YE(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?JE(t,e,o,i):r.hasOwnProperty(o)&&JE(t,e,r[o],i)}return t}function JE(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function ZE(n,e,t,r,o,i){for(let u=0;u<r.length;u++)zh(uc(t,e),n,r[u].type);!function l0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=ps(n,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];t.mergedAttrs=Bi(t.mergedAttrs,l.hostAttrs),d0(n,t,e,c,l),u0(c,l,o),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function ZO(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<o;l++){const d=i[l],h=t?t.get(d):null,g=h?h.outputs:null;c=YE(d.inputs,l,c,h?h.inputs:null),u=YE(d.outputs,l,u,g);const y=null===c||null===s||tC(e)?null:p0(c,l,s);a.push(y)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,i)}function XE(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function Wk(){return U.lFrame.currentDirectiveIndex}();try{kr(i);for(let a=r;a<o;a++){const c=n.data[a],u=e[a];xh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&s0(c,u)}}finally{kr(-1),xh(s)}}function s0(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Zf(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function u0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yt(e)&&(t[""]=n)}}function d0(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=Rr(o.type)),s=new Yi(i,Yt(o),x);n.blueprint[r]=s,t[r]=s,function n0(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function r0(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,ps(n,t,o.hostVars,q),o)}function f0(n,e,t,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;)ew(r,t,s[a++],s[a++],s[a++])}function ew(n,e,t,r,o){const i=jt(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(e,o)),null!==n.setInput?n.setInput(e,o,t,r):e[r]=o}finally{jt(i)}}function p0(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function nw(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=n.data[i];Fh(t[r]),s.contentQueries(2,e[i],i)}}}function qc(n,e){return n[$i]?n[aC][Qt]=e:n[$i]=e,n[aC]=e,e}function ep(n,e,t){Fh(0);const r=jt(null);try{e(n,t)}finally{jt(r)}}function sw(n,e){const t=n[er],r=t?t.get(Bn,null):null;r&&r.handleError(e)}function tp(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++];ew(n.data[s],e[s],r,a,o)}}function g0(n,e){const t=kt(e,n),r=t[A];!function m0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const o=t[Te];null!==o&&null===t[Ln]&&(t[Ln]=Lf(o,t[er])),np(r,t,t[Ae])}function np(n,e,t){Uh(e);try{const r=n.viewQuery;null!==r&&ep(1,r,t);const o=n.template;null!==o&&KE(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nw(n,e),n.staticViewQueries&&ep(2,n.viewQuery,t);const i=n.components;null!==i&&function y0(n,e){for(let t=0;t<e.length;t++)g0(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[K]&=-5,Hh()}}let aw=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,o){const i=typeof Zone>"u"?null:Zone.current,s=function wk(n,e,t){const r=Object.create(_k);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const o=s=>{r.cleanupFn=s};return r.ref={notify:()=>mC(r),run:()=>{if(r.dirty=!1,r.hasRun&&!yC(r))return;r.hasRun=!0;const s=Dh(r);try{r.cleanupFn(),r.cleanupFn=SC,r.fn(o)}finally{bh(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,i)},o);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Kc(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=ah(o,a):2==i&&(r=ah(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function gs(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];null!==i&&r.push(me(i)),it(i)&&cw(i,r);const s=t.type;if(8&s)gs(n,e,t.child,r);else if(32&s){const a=af(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=VI(e,t);if(Array.isArray(a))r.push(...a);else{const c=os(e[De]);gs(c[A],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function cw(n,e){for(let t=je;t<n.length;t++){const r=n[t],o=r[A].firstChild;null!==o&&gs(r[A],r,o,e)}n[yn]!==n[Te]&&e.push(n[yn])}function Wc(n,e,t,r=!0){const o=e[io],i=o.rendererFactory,s=o.afterRenderEventManager;i.begin?.(),s?.begin();try{uw(n,e,n.template,t)}catch(c){throw r&&sw(e,c),c}finally{i.end?.(),o.effectManager?.flush(),s?.end()}}function uw(n,e,t,r){const o=e[K];if(256!=(256&o)){e[io].effectManager?.flush(),Uh(e);try{NC(e),function BC(n){return U.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&KE(n,e,t,2,r);const s=3==(3&o);if(s){const u=n.preOrderCheckHooks;null!==u&&sc(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ac(e,u,0,null),Bh(e,0)}if(function I0(n){for(let e=kI(n);null!==e;e=NI(e)){if(!e[uC])continue;const t=e[co];for(let r=0;r<t.length;r++){Pk(t[r])}}}(e),lw(e,2),null!==n.contentQueries&&nw(n,e),s){const u=n.contentCheckHooks;null!==u&&sc(e,u)}else{const u=n.contentHooks;null!==u&&ac(e,u,1),Bh(e,1)}!function GO(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=$E(e,qi);try{for(let o=0;o<t.length;o++){const i=t[o];if(i<0)kr(~i);else{const s=i,a=t[++o],c=t[++o];Kk(a,s),r.dirty=!1;const u=Dh(r);try{c(2,e[s])}finally{bh(r,u)}}}}finally{null===e[qi]&&VE(e,qi),kr(-1)}}(n,e);const a=n.components;null!==a&&hw(e,a,0);const c=n.viewQuery;if(null!==c&&ep(2,c,r),s){const u=n.viewCheckHooks;null!==u&&sc(e,u)}else{const u=n.viewHooks;null!==u&&ac(e,u,2),Bh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[K]&=-73,PC(e)}finally{Hh()}}}function lw(n,e){for(let t=kI(n);null!==t;t=NI(t))for(let r=je;r<t.length;r++)dw(t[r],e)}function E0(n,e,t){dw(kt(e,n),t)}function dw(n,e){if(!function kk(n){return 128==(128&n[K])}(n))return;const t=n[A],r=n[K];if(80&r&&0===e||1024&r||2===e)uw(t,n,t.template,n[Ae]);else if(n[ji]>0){lw(n,1);const o=t.components;null!==o&&hw(n,o,1)}}function hw(n,e,t){for(let r=0;r<e.length;r++)E0(n,e[r],t)}class ms{get rootNodes(){const e=this._lView,t=e[A];return gs(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ae]}set context(e){this._lView[Ae]=e}get destroyed(){return 256==(256&this._lView[K])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ie];if(it(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(_c(e,r),fc(t,r))}this._attachedToViewContainer=!1}uf(this._lView[A],this._lView)}onDestroy(e){!function xC(n,e){if(256==(256&n[K]))throw new S(911,!1);null===n[tr]&&(n[tr]=[]),n[tr].push(e)}(this._lView,e)}markForCheck(){fs(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){this._lView[K]|=128}detectChanges(){Wc(this._lView[A],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aP(n,e){ss(n,e,e[G],2,null,null)}(this._lView[A],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class w0 extends ms{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Wc(e[A],e,e[Ae],!1)}checkNoChanges(){}get context(){return null}}class fw extends Hc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Z(e);return new ys(t,this.ngModule)}}function pw(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class T0{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Wa(r);const o=this.injector.get(e,Hf,r);return o!==Hf||t===Hf?o:this.parentInjector.get(e,t,r)}}class ys extends IE{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=pw(e.inputs);if(null!==t)for(const o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return pw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function rk(n){return n.map(nk).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof Jt?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new T0(e,i):e,a=s.get(wE,null);if(null===a)throw new S(407,!1);const d={rendererFactory:a,sanitizer:s.get(mO,null),effectManager:s.get(aw,null),afterRenderEventManager:s.get(zf,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?function qO(n,e,t,r){const i=r.get(UE,!1)||t===Kt.ShadowDom,s=n.selectRootElement(e,i);return function KO(n){QE(n)}(s),s}(h,r,this.componentDef.encapsulation,s):wc(h,f,function _0(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let v=null;null!==g&&(v=Lf(g,s,!0));const D=Yf(0,null,null,1,0,null,null,null,null,null,null),M=zc(null,D,null,_,null,null,d,h,s,null,v);let z,Qe;Uh(M);try{const Ut=this.componentDef;let Ni,fv=null;Ut.findHostDirectiveDefs?(Ni=[],fv=new Map,Ut.findHostDirectiveDefs(Ut,Ni,fv),Ni.push(Ut)):Ni=[Ut];const hq=function A0(n,e){const t=n[A],r=Y;return n[r]=e,Lo(t,r,2,"#host",null)}(M,g),fq=function D0(n,e,t,r,o,i,s){const a=o[A];!function b0(n,e,t,r){for(const o of n)e.mergedAttrs=Bi(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(Kc(e,e.mergedAttrs,!0),null!==t&&KI(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=Lf(e,o[er]));const u=i.rendererFactory.createRenderer(e,t);let l=16;t.signals?l=4096:t.onPush&&(l=64);const d=zc(o,WE(t),null,l,o[n.index],n,i,u,null,null,c);return a.firstCreatePass&&Zf(a,n,r.length-1),qc(o,d),o[n.index]=d}(hq,g,Ut,Ni,M,d,h);Qe=function kC(n,e){return n.data[e]}(D,Y),g&&function M0(n,e,t,r){if(r)wh(n,t,["ng-version",yO.full]);else{const{attrs:o,classes:i}=function ok(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!Wt(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&wh(n,t,o),i&&i.length>0&&qI(n,t,i.join(" "))}}(h,Ut,g,r),void 0!==t&&function k0(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(Qe,this.ngContentSelectors,t),z=function R0(n,e,t,r,o,i){const s=Ve(),a=o[A],c=Ct(s,o);ZE(a,o,s,t,null,r);for(let l=0;l<t.length;l++)Ze(Nr(o,a,s.directiveStart+l,s),o);XE(a,o,s),c&&Ze(c,o);const u=Nr(o,a,s.directiveStart+s.componentOffset,s);if(n[Ae]=o[Ae]=u,null!==i)for(const l of i)l(u,e);return Kf(a,s,n),u}(fq,Ut,Ni,fv,M,[N0]),np(D,M,null)}finally{Hh()}return new S0(this.componentType,z,Po(Qe,M),M,Qe)}}class S0 extends lO{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new w0(o),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const i=this._rootLView;tp(i[A],i,o,e,t),this.previousInputValues.set(e,t),fs(kt(this._tNode.index,i))}}get injector(){return new ct(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function N0(){const n=Ve();ic(w()[A],n)}function lp(n,e,t,r,o){const s=o?"class":"style";tp(n,t,e.inputs[s],s,r)}function qo(n,e,t,r){const o=w(),i=X(),s=Y+n,a=o[G],c=i.firstCreatePass?function fx(n,e,t,r,o,i){const s=e.consts,c=Lo(e,n,2,r,rr(s,o));return function Jf(n,e,t,r){if(FC()){const o=null===r?null:{"":-1},i=function a0(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(nC(e,s.selectors,!1))if(r||(r=[]),Yt(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Zf(n,e,a.length)}else r.unshift(s),Zf(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&ZE(n,e,t,s,o,a),o&&function c0(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new S(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=Bi(t.mergedAttrs,t.attrs)}(e,t,c,rr(s,i)),null!==c.attrs&&Kc(c,c.attrs,!1),null!==c.mergedAttrs&&Kc(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,e,t,r):i.data[s],u=Lw(i,o,c,a,e,n);o[s]=u;const l=ec(c);return Cn(c,!0),KI(a,u,c),32!=(32&c.flags)&&oc()&&Sc(i,o,u,c),0===function xk(){return U.lFrame.elementDepthCount}()&&Ze(u,o),function Lk(){U.lFrame.elementDepthCount++}(),l&&(function Wf(n,e,t){FC()&&(function o0(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;br(t)&&function h0(n,e,t){const r=Ct(e,n),o=WE(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=qc(n,zc(n,o,null,s,r,e,null,n[io].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||uc(t,e),Ze(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const c=n.data[a],u=Nr(e,n,a,t);Ze(u,e),null!==s&&f0(0,a-o,u,c,0,s),Yt(c)&&(kt(t.index,e)[Ae]=Nr(e,n,a,t))}}(n,e,t,Ct(t,e)),64==(64&t.flags)&&XE(n,e,t))}(i,o,c),Kf(i,c,o)),null!==r&&function Qf(n,e,t=Ct){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}(o,c),qo}function Ko(){let n=Ve();Ph()?function Oh(){U.lFrame.isParent=!1}():(n=n.parent,Cn(n,!1));const e=n;(function Uk(n){return U.skipHydrationRootTNode===n})(e)&&function $k(){U.skipHydrationRootTNode=null}(),function Fk(){U.lFrame.elementDepthCount--}();const t=X();return t.firstCreatePass&&(ic(t,n),Th(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function iN(n){return 0!=(8&n.flags)}(e)&&lp(t,e,w(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sN(n){return 0!=(16&n.flags)}(e)&&lp(t,e,w(),e.stylesWithoutHost,!1),Ko}function dp(n,e,t,r){return qo(n,e,t,r),Ko(),dp}let Lw=(n,e,t,r,o,i)=>(or(!0),wc(r,o,function WC(){return U.lFrame.currentNamespace}()));function tu(n){return!!n&&"function"==typeof n.then}function Hw(n){return!!n&&"function"==typeof n.subscribe}function ws(n,e,t,r){const o=w(),i=X(),s=Ve();return function jw(n,e,t,r,o,i,s){const a=ec(r),u=n.firstCreatePass&&function ow(n){return n.cleanup||(n.cleanup=[])}(n),l=e[Ae],d=function rw(n){return n[oo]||(n[oo]=[])}(e);let h=!0;if(3&r.type||s){const y=Ct(r,e),C=s?s(y):y,_=d.length,v=s?M=>s(me(M[r.index])):r.index;let D=null;if(!s&&a&&(D=function Ix(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[oo],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=i,D.__ngLastListenerFn__=i,h=!1;else{i=Vw(r,e,l,i,!1);const M=t.listen(C,o,i);d.push(i,M),u&&u.push(o,v,_,_+1)}}else i=Vw(r,e,l,i,!1);const f=r.outputs;let g;if(h&&null!==f&&(g=f[o])){const y=g.length;if(y)for(let C=0;C<y;C+=2){const z=e[g[C]][g[C+1]].subscribe(i),Qe=d.length;d.push(i,z),u&&u.push(o,r.index,Qe,-(Qe+1))}}}(i,o,o[G],s,n,e,r),ws}function $w(n,e,t,r){try{return vn(6,e,t),!1!==t(r)}catch(o){return sw(n,o),!1}finally{vn(7,e,t)}}function Vw(n,e,t,r,o){return function i(s){if(s===Function)return r;fs(n.componentOffset>-1?kt(n.index,e):e);let c=$w(e,t,r,s),u=i.__ngNextListenerFn__;for(;u;)c=$w(e,t,u,s)&&c,u=u.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function ou(n,e=""){const t=w(),r=X(),o=n+Y,i=r.firstCreatePass?Lo(r,o,1,e,null):r.data[o],s=p_(r,t,i,e,n);t[o]=s,oc()&&Sc(r,t,s,i),Cn(i,!1)}let p_=(n,e,t,r,o)=>(or(!0),function Ec(n,e){return n.createText(e)}(e[G],r));const Yo="en-US";let F_=Yo;class Ur{}class uT{}class Ap extends Ur{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fw(this);const o=Mt(e);this._bootstrapComponents=jn(o.bootstrap),this._r3Injector=DE(e,t,[{provide:Ur,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver},...r],xe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Dp extends uT{constructor(e){super(),this.moduleType=e}create(e){return new Ap(this.moduleType,e,[])}}class lT extends Ur{constructor(e){super(),this.componentFactoryResolver=new fw(this),this.instance=null;const t=new bo([...e.providers,{provide:Ur,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],e.parent||Nc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function dT(n,e,t=null){return new lT({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let yF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=lE(0,t.type),o=r.length>0?dT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(O(Jt))})}}return n})();function hT(n){n.getStandaloneInjector=e=>e.get(yF).getOrCreateStandaloneInjector(n)}function zF(n,e,t,r=!0){const o=e[A];if(function uP(n,e,t,r){const o=je+r,i=t.length;r>0&&(t[o-1][Qt]=e),r<i-je?(e[Qt]=t[o],lI(t,je+r,e)):(t.push(e),e[Qt]=null),e[Ie]=t;const s=e[Vi];null!==s&&t!==s&&function lP(n,e){const t=n[co];e[De]!==e[Ie][Ie][De]&&(n[uC]=!0),null===t?n[co]=[e]:t.push(e)}(s,e);const a=e[mn];null!==a&&a.insertView(n),e[K]|=128}(o,e,n,t),r){const i=ff(t,n),s=e[G],a=Tc(s,n[yn]);null!==a&&function sP(n,e,t,r,o,i){r[Te]=o,r[Je]=e,ss(n,r,t,1,o,i)}(o,n[Je],s,e,a,i)}}let tn=(()=>{class n{static{this.__NG_ELEMENT_ID__=e1}}return n})();function e1(){return function MT(n,e){let t;const r=e[n.index];return it(r)?t=r:(t=function tw(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}(r,e,null,n),e[n.index]=t,qc(e,t)),kT(t,e,n,r),new bT(t,n,e)}(Ve(),w())}const t1=tn,bT=class extends t1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Po(this._hostTNode,this._hostLView)}get injector(){return new ct(this._hostTNode,this._hostLView)}get parentInjector(){const e=lc(this._hostTNode,this._hostLView);if($h(e)){const t=Zi(e,this._hostLView),r=Ji(e);return new ct(t[A].data[r+8],t)}return new ct(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-je}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(t||{},i,null);return this.insertImpl(a,o,false),a}createComponent(e,t,r,o,i){const s=e&&!function es(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const y=t||{};a=y.index,r=y.injector,o=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}const c=s?e:new ys(Z(e)),u=r||this.parentInjector;if(!i&&null==c.ngModule){const C=(s?u:this.parentInjector).get(Jt,null);C&&(i=C)}Z(c.componentType??{});const f=c.create(u,o,null,i);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const o=e._lView;if(function Nk(n){return it(n[Ie])}(o)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=o[Ie],l=new bT(u,u[Je],u[Ie]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return zF(a,o,s,!r),e.attachToViewContainerRef(),lI(Mp(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);r&&(fc(Mp(this._lContainer),t),uf(r[A],r))}detach(e){const t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);return r&&null!=fc(Mp(this._lContainer),t)?new ms(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RT(n){return n[8]}function Mp(n){return n[8]||(n[8]=[])}let kT=function NT(n,e,t,r){if(n[yn])return;let o;o=8&t.type?me(r):function n1(n,e){const t=n[G],r=t.createComment(""),o=Ct(e,n);return Pr(t,Tc(t,o),r,function pP(n,e){return n.nextSibling(e)}(t,o),!1),r}(e,t),n[yn]=o};const P1=new k("Application Initializer");let jp=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=P(P1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const i=o();if(tu(i))t.push(i);else if(Hw(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Gn=new k("LocaleId",{providedIn:"root",factory:()=>P(Gn,J.Optional|J.SkipSelf)||function O1(){return typeof $localize<"u"&&$localize.locale||Yo}()});let oS=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bt(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class F1{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let U1=(()=>{class n{compileModuleSync(t){return new Dp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=jn(Mt(t).declarations).reduce((s,a)=>{const c=Z(a);return c&&s.push(new ys(c)),s},[]);return new F1(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const cS=new k(""),fu=new k("");let qp,Gp=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qp||(function sU(n){qp=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(Ce),O(zp),O(fu))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),zp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return qp?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ur=null;const uS=new k("AllowMultipleToken"),Kp=new k("PlatformDestroyListeners"),lS=new k("appBootstrapListener");function fS(n,e,t=[]){const r=`Platform: ${e}`,o=new k(r);return(i=[])=>{let s=Wp();if(!s||s.injector.get(uS,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function uU(n){if(ur&&!ur.get(uS,!1))throw new S(400,!1);(function dS(){!function yk(n){EC=n}(()=>{throw new S(600,!1)})})(),ur=n;const e=n.get(gS);(function hS(n){n.get(gE,null)?.forEach(t=>t())})(n)}(function pS(n=[],e){return Zt.create({name:e,providers:[{provide:Sf,useValue:"platform"},{provide:Kp,useValue:new Set([()=>ur=null])},...n]})}(a,r))}return function dU(n){const e=Wp();if(!e)throw new S(401,!1);return e}()}}function Wp(){return ur?.get(gS)??null}let gS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function hU(n="zone.js",e){return"noop"===n?new MO:"zone.js"===n?new Ce(e):n}(r?.ngZone,function mS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function mF(n,e,t){return new Ap(n,e,t)}(t.moduleType,this.injector,function ES(n){return[{provide:Ce,useFactory:n},{provide:ls,multi:!0,useFactory:()=>{const e=P(pU,{optional:!0});return()=>e.initialize()}},{provide:IS,useFactory:fU},{provide:NE,useFactory:PE}]}(()=>o)),s=i.injector.get(Bn,null);return o.runOutsideAngular(()=>{const a=o.onError.subscribe({next:c=>{s.handleError(c)}});i.onDestroy(()=>{pu(this._modules,i),a.unsubscribe()})}),function yS(n,e,t){try{const r=t();return tu(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,o,()=>{const a=i.injector.get(jp);return a.runInitializers(),a.donePromise.then(()=>(function U_(n){Bt(n,"Expected localeId to be defined"),"string"==typeof n&&(F_=n.toLowerCase().replace(/_/g,"-"))}(i.injector.get(Gn,Yo)||Yo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,r=[]){const o=vS({},r);return function aU(n,e,t){const r=new Dp(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(Ps);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Kp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Zt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function vS(n,e){return Array.isArray(e)?e.reduce(vS,n):{...n,...e}}let Ps=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(IS),this.zoneIsStable=P(NE),this.componentTypes=[],this.components=[],this.isStable=P(oS).hasPendingTasks.pipe(Pn(t=>t?L(!1):this.zoneIsStable),function bM(n,e=Jn){return n=n??RM,Pe((t,r)=>{let o,i=!0;t.subscribe(Oe(r,s=>{const a=e(s);(i||!n(o,a))&&(i=!1,o=a,r.next(s))}))})}(),Hv()),this._injector=P(Jt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const o=t instanceof IE;if(!this._injector.get(jp).done)throw!o&&function ro(n){const e=Z(n)||Be(n)||ot(n);return null!==e&&e.standalone}(t),new S(405,!1);let s;s=o?t:this._injector.get(Hc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function cU(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ur),u=s.create(Zt.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(cS,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),pu(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;pu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(lS,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const IS=new k("",{providedIn:"root",factory:()=>P(Bn).handleError.bind(void 0)});function fU(){const n=P(Ce),e=P(Bn);return t=>n.runOutsideAngular(()=>e.handleError(t))}let pU=(()=>{class n{constructor(){this.zone=P(Ce),this.applicationRef=P(Ps)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Qp=(()=>{class n{static{this.__NG_ELEMENT_ID__=mU}}return n})();function mU(n){return function yU(n,e,t){if(br(n)&&!t){const r=kt(n.index,e);return new ms(r,r)}return 47&n.type?new ms(e[De],e):null}(Ve(),w(),16==(16&n))}const RU=fS(null,"core",[]);let MU=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Ps))}}static{this.\u0275mod=no({type:n})}static{this.\u0275inj=Dr({})}}return n})(),ng=null;function Xo(){return ng}class VU{}const nn=new k("DocumentToken");let BS=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return P(GU)},providedIn:"platform"})}}return n})(),GU=(()=>{class n extends BS{constructor(){super(),this._doc=P(nn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xo().getBaseHref(this._doc)}onPopState(t){const r=Xo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Xo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function jS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $S(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Br(n){return n&&"?"!==n[0]?"?"+n:n}let Cu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return P(qU)},providedIn:"root"})}}return n})();const zU=new k("appBaseHref");let qU=(()=>{class n extends Cu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Br(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+Br(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+Br(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(BS),O(zU,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xs=(()=>{class n{constructor(t){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function QU(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}($S(VS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Br(r))}normalize(t){return n.stripTrailingSlash(function WU(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,VS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Br(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Br(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static{this.normalizeQueryParams=Br}static{this.joinWithSlash=jS}static{this.stripTrailingSlash=$S}static{this.\u0275fac=function(r){return new(r||n)(O(Cu))}}static{this.\u0275prov=B({token:n,factory:function(){return function KU(){return new xs(O(Cu))}()},providedIn:"root"})}}return n})();function VS(n){return n.replace(/\/index.html$/,"")}let oA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=no({type:n})}static{this.\u0275inj=Dr({})}}return n})();function sA(n){return"server"===n}class FB extends VU{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Cg extends FB{static makeCurrent(){!function $U(n){ng||(ng=n)}(new Cg)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function UB(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}();return null==t?null:function HB(n){Nu=Nu||document.createElement("a"),Nu.setAttribute("href",n);const e=Nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function PH(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,e)}}let Nu,Hs=null,jB=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();const Ig=new k("EventManagerPlugins");let dA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Ig),O(Ce))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();class hA{constructor(e){this._doc=e}}const Eg="ng-app-id";let fA=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sA(i),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Eg}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(Eg),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Eg,this.appId),s}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(nn),O(Pc),O(mE,8),O(Mo))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();const wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_g=/%COMP%/g,zB=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function gA(n,e){return e.map(t=>t.replace(_g,n))}let mA=(()=>{class n{constructor(t,r,o,i,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=sA(a),this.defaultRenderer=new Tg(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Kt.ShadowDom&&(r={...r,encapsulation:Kt.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof vA?o.applyToHost(t):o instanceof Sg&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Kt.Emulated:i=new vA(c,u,r,this.appId,l,s,a,d);break;case Kt.ShadowDom:return new QB(c,u,t,r,s,a,this.nonce,d);default:i=new Sg(c,u,r,l,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(dA),O(fA),O(Pc),O(zB),O(nn),O(Mo),O(Ce),O(mE))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();class Tg{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=wg[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=wg[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(ir.DashCase|ir.Important)?e.style.setProperty(t,r,o&ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Xo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function yA(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class QB extends Tg{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=gA(o.id,o.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Sg extends Tg{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?gA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class vA extends Sg{constructor(e,t,r,o,i,s,a,c){const u=o+"-"+r.id;super(e,t,r,i,s,a,c,u),this.contentAttr=function qB(n){return"_ngcontent-%COMP%".replace(_g,n)}(u),this.hostAttr=function KB(n){return"_nghost-%COMP%".replace(_g,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let YB=(()=>{class n extends hA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||n)(O(nn))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();const CA=["alt","control","meta","shift"],JB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let XB=(()=>{class n extends hA{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xo().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),CA.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=JB[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),CA.forEach(s=>{s!==o&&(0,ZB[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(nn))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();const rj=fS(RU,"browser",[{provide:Mo,useValue:"browser"},{provide:gE,useValue:function ej(){Cg.makeCurrent()},multi:!0},{provide:nn,useFactory:function nj(){return function wP(n){mf=n}(document),document},deps:[]}]),oj=new k(""),wA=[{provide:fu,useClass:class BB{addToWindow(e){ge.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new S(5103,!1);return i},ge.getAllAngularTestabilities=()=>e.getAllTestabilities(),ge.getAllAngularRootElements=()=>e.getAllRootElements(),ge.frameworkStabilizers||(ge.frameworkStabilizers=[]),ge.frameworkStabilizers.push(r=>{const o=ge.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(c){s=s||c,i--,0==i&&r(s)};o.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Xo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:cS,useClass:Gp,deps:[Ce,zp,fu]},{provide:Gp,useClass:Gp,deps:[Ce,zp,fu]}],_A=[{provide:Sf,useValue:"root"},{provide:Bn,useFactory:function tj(){return new Bn},deps:[]},{provide:Ig,useClass:YB,multi:!0,deps:[nn,Ce,Mo]},{provide:Ig,useClass:XB,multi:!0,deps:[nn]},mA,fA,dA,{provide:wE,useExisting:mA},{provide:class pB{},useClass:jB,deps:[]},[]];let ij=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Pc,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(oj,12))}}static{this.\u0275mod=no({type:n})}static{this.\u0275inj=Dr({providers:[..._A,...wA],imports:[oA,MU]})}}return n})(),TA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(nn))}}static{this.\u0275prov=B({token:n,factory:function(r){let o=null;return o=r?new r:function aj(){return new TA(O(nn))}(),o},providedIn:"root"})}}return n})();typeof window<"u"&&window;const E={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ti=[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE],bA=[...ti,E.EMAIL_SCOPE],ft={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Pu={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Ge={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Dg={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Ou={QUERY:"query",FRAGMENT:"fragment"},hj={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Bs={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ze={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},bg="appmetadata",fj="client_info",qe={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ae={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},_t={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},qt_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836",He={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"};var N=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(N||{});const OA={scopes:ti},xA="jwk",Mg="msal.db",yj=`${Mg}.keys`,vj=[0,5,4];class Cj{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===N.Redirect||e.interactionType===N.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(t&&"ssoSilent"!==t)break;return"none";case"msal:logoutEnd":if(t&&"logout"!==t)break;return"none";case"msal:handleRedirectEnd":if(t&&"handleRedirect"!==t)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===N.Redirect||e.interactionType===N.Popup){if(t&&"login"!==t&&"acquireToken"!==t)break;return"none"}}return null}}const ri="unexpected_error",Hu={[ri]:"Unexpected error in authentication.",post_request_failed:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class de extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,de.prototype),this.errorCode=e||E.EMPTY_STRING,this.errorMessage=t||E.EMPTY_STRING,this.subError=r||E.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Ng(n,e){return new de(n,e?`${Hu[n]} ${e}`:Hu[n])}const Vs="storage_not_supported",Bu="in_mem_redirect_unavailable",ju={[Vs]:"Given storage configuration option was not supported.",stubbed_public_client_application_called:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Bu]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class $u extends de{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,$u.prototype)}}function Og(n){return new $u(n,ju[n])}const Vu="redirect_uri_empty",Gu="authority_uri_insecure",Vr="url_parse_error",zu="empty_url_error",qu="empty_input_scopes_error",Gs="invalid_claims",Ku="token_request_empty",Wu="logout_request_empty",zs="pkce_params_missing",qs="invalid_cloud_discovery_metadata",Qu="invalid_authority_metadata",Yu="untrusted_authority",oi="missing_ssh_jwk",Ju="missing_ssh_kid",Zu="cannot_set_OIDCOptions",Xu="cannot_allow_platform_broker",el="authority_mismatch",tl="invalid_request_method_for_EAR",nl="invalid_authorize_post_body_parameters",Ee={[Vu]:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[Gu]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Vr]:"URL could not be parsed into appropriate segments.",[zu]:"URL was empty or null.",[qu]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Gs]:"Given claims parameter must be a stringified JSON object.",[Ku]:"Token request was empty and not found in cache.",[Wu]:"The logout request was null or undefined.",invalid_code_challenge_method:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[zs]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[qs]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Qu]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Yu]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[oi]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Ju]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",[Zu]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Xu]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[el]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[nl]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[tl]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class Hg extends de{constructor(e){super(e,Ee[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Hg.prototype)}}function fe(n){return new Hg(n)}class Lt{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch{}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}const Ks="client_info_decoding_error",rl="client_info_empty_error",Ws="token_parsing_error",ol="null_or_empty_token",sn="endpoints_resolution_error",il="network_error",sl="openid_config_error",al="hash_not_deserialized",pr="invalid_state",cl="state_mismatch",Qs="state_not_found",ul="nonce_mismatch",Ys="auth_time_not_found",ll="max_age_transpired",dl="multiple_matching_appMetadata",hl="request_cannot_be_made",fl="cannot_remove_empty_scope",pl="cannot_append_scopeset",Js="empty_input_scopeset",Zs="no_account_in_silent_request",gl="invalid_cache_record",Xs="invalid_cache_environment",ea="no_account_found",ta="no_crypto_object",Sn="token_refresh_required",ml="token_claims_cnf_required_for_signedjwt",yl="authorization_code_missing_from_server_response",vl="binding_key_not_removed",Cl="end_session_endpoint_not_supported",na="key_id_missing",Q="method_not_implemented",j={[Ks]:"The client info could not be parsed/decoded correctly",[rl]:"The client info was empty",[Ws]:"Token cannot be parsed",[ol]:"The token is null or empty",[sn]:"Endpoints cannot be resolved",[il]:"Network request failed",[sl]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[al]:"The hash parameters could not be deserialized",[pr]:"State was not the expected format",[cl]:"State mismatch error",[Qs]:"State not found",[ul]:"Nonce mismatch error",[Ys]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ll]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[dl]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[hl]:"Token request cannot be made without authorization code or refresh token.",[fl]:"Cannot remove null or empty scope from ScopeSet",[pl]:"Cannot append ScopeSet",[Js]:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",[Zs]:"Please pass an account object, silent flow is not supported without account information",[gl]:"Cache record object was null or undefined.",[Xs]:"Invalid environment when attempting to create cache entry",[ea]:"No account found in cache for given key.",[ta]:"No crypto object detected.",unexpected_credential_type:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Sn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",[ml]:"Cannot generate a POP jwt if the token_claims are not populated",[yl]:"Server response does not contain an authorization code to proceed",[vl]:"Could not remove the credential's binding key from storage.",[Cl]:"The provided authority does not support logout",[na]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Q]:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled",platform_broker_error:"An error occurred in the native broker. See the platformBrokerError property for details."};class em extends de{constructor(e,t){super(e,t?`${j[e]}: ${t}`:j[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,em.prototype)}}function T(n,e){return new em(n,e)}function LA(n){if(!n)return n;let e=n.toLowerCase();return Lt.endsWith(e,"?")?e=e.slice(0,-1):Lt.endsWith(e,"?/")&&(e=e.slice(0,-2)),Lt.endsWith(e,"/")||(e+="/"),e}function FA(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Il(n){if(!n||n.indexOf("=")<0)return null;try{const e=FA(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw T(al)}return null}function ra(n,e=!0,t){const r=new Array;return n.forEach((o,i)=>{r.push(!e&&t&&i in t?`${i}=${o}`:`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function UA(n){if(!n)return n;const e=n.split("#")[0];try{const t=new URL(e);return LA(t.origin+t.pathname+t.search)}catch{return LA(e)}}class ee{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw fe(zu);e.includes("#")||(this._urlString=ee.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Lt.endsWith(t,"?")?t=t.slice(0,-1):Lt.endsWith(t,"?/")&&(t=t.slice(0,-2)),Lt.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw fe(Vr)}if(!e.HostNameAndPort||!e.PathSegments)throw fe(Vr);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw fe(Gu)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return ee.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),ee.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw fe(Vr);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw fe(Vr);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===E.FORWARD_SLASH){const o=new ee(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new ee(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Il(e)}}const Gr="client_id",HA="redirect_uri",Ij="response_type",Ej="response_mode",_j="claims",Tj="scope",Aj="state",Dj="nonce",bj="prompt",Mj="code_challenge",kj="code_challenge_method",Pj="client-request-id",Oj="x-client-SKU",xj="x-client-VER",Lj="x-client-OS",Fj="x-client-CPU",jj="x-app-name",$j="x-app-ver",BA="token_type",jA="req_cnf",$A="return_spa_code",Wj="nativebroker",Yj="sid",Jj="login_hint",Zj="domain_hint",El="brk_client_id",wl="brk_redirect_uri",tm="instance_aware",e$="ear_jwk",t$="ear_jwe_crypto";class Ue{constructor(e){const t=e?Lt.trimArrayEntries([...e]):[],r=t?Lt.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw fe(qu);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||E.EMPTY_STRING).split(" ");return new Ue(r)}static createSearchScopes(e){const t=e&&e.length>0?e:[...ti],r=new Ue(t);return r.containsOnlyOIDCScopes()?r.removeScope(E.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Ue(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return bA.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw T(pl)}}removeScope(e){if(!e)throw T(fl);this.scopes.delete(e.trim())}removeOIDCScopes(){bA.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw T(Js);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw T(Js);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):E.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function _l(n,e,t){if(!e)return;const r=n.get(Gr);r&&n.has(El)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(HA)},e)}function nm(n,e){n.set(Ij,e)}function rm(n,e,t=!0,r=ti){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new Ue(o);n.set(Tj,i.printScopes())}function om(n,e){n.set(Gr,e)}function im(n,e){n.set(HA,e)}function Tl(n,e){n.set(Jj,e)}function Sl(n,e){n.set(ft.CCS_HEADER,`UPN:${e}`)}function oa(n,e){n.set(ft.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function VA(n,e){n.set(Yj,e)}function sm(n,e,t){const r=function YA(n,e){let t;if(n)try{t=JSON.parse(n)}catch{throw fe(Gs)}else t={};return e&&e.length>0&&(t.hasOwnProperty(Pu.ACCESS_TOKEN)||(t[Pu.ACCESS_TOKEN]={}),t[Pu.ACCESS_TOKEN][Pu.XMS_CC]={values:e}),JSON.stringify(t)}(e,t);try{JSON.parse(r)}catch{throw fe(Gs)}n.set(_j,r)}function am(n,e){n.set(Pj,e)}function cm(n,e){n.set(Oj,e.sku),n.set(xj,e.version),e.os&&n.set(Lj,e.os),e.cpu&&n.set(Fj,e.cpu)}function um(n,e){e?.appName&&n.set(jj,e.appName),e?.appVersion&&n.set($j,e.appVersion)}function GA(n,e){e&&n.set(Aj,e)}function lm(n,e,t){if(!e||!t)throw fe(zs);n.set(Mj,e),n.set(kj,t)}function zA(n,e){n.set("client_secret",e)}function qA(n,e){e&&n.set("client_assertion",e)}function KA(n,e){e&&n.set("client_assertion_type",e)}function WA(n,e){n.set("grant_type",e)}function dm(n){n.set(fj,"1")}function QA(n){n.has(tm)||n.set(tm,"true")}function gr(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function hm(n,e){e&&(n.set(BA,ae.POP),n.set(jA,e))}function JA(n,e){e&&(n.set(BA,ae.SSH),n.set(jA,e))}function ZA(n,e){n.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),n.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}function XA(n){n.set("x-ms-lib-capability","retry-after, h429")}function Al(n,e,t){n.has(El)||n.set(El,e),n.has(wl)||n.set(wl,t)}const ia="pkce_not_created",fm="ear_jwk_empty",eD="ear_jwe_empty",sa="crypto_nonexistent",ii="empty_navigate_uri",Dl="hash_empty_error",aa="no_state_in_hash",bl="hash_does_not_contain_known_properties",Rl="unable_to_parse_state",Ml="state_interaction_type_mismatch",kl="interaction_in_progress",Nl="popup_window_error",Pl="empty_window_error",zr="user_cancelled",Ol="monitor_window_timeout",xl="redirect_in_iframe",Ll="block_iframe_reload",Fl="block_nested_popups",si="silent_logout_unsupported",Ul="no_account_error",Hl="no_token_request_cache_error",Bl="unable_to_parse_token_request_cache_error",ai="non_browser_environment",mr="database_not_open",ci="no_network_connectivity",jl="post_request_failed",$l="get_request_failed",ca="failed_to_parse_response",Vl="unable_to_load_token",ua="crypto_key_not_found",Gl="auth_code_required",zl="auth_code_or_nativeAccountId_required",ql="spa_code_and_nativeAccountId_present",la="database_unavailable",Kl="unable_to_acquire_token_from_native_platform",Wl="native_handshake_timeout",Ql="native_extension_not_installed",da="native_connection_not_established",qr="uninitialized_public_client_application",Yl="native_prompt_not_supported",Jl="invalid_base64_string",Zl="invalid_pop_token_request",tD="failed_to_build_headers",nD="failed_to_parse_headers",Xl="failed_to_decrypt_ear_response",ed="timed_out",Kn="For more visit: aka.ms/msaljs/browser-errors",$={[ia]:"The PKCE code challenge and verifier could not be generated.",[fm]:"No EAR encryption key provided. This is unexpected.",[eD]:"Server response does not contain ear_jwe property. This is unexpected.",[sa]:"The crypto object or function is not available.",[ii]:"Navigation URI is empty. Please check stack trace for more info.",[Dl]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Kn}`,[aa]:"Hash does not contain state. Please verify that the request originated from msal.",[bl]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Kn}`,[Rl]:"Unable to parse state. Please verify that the request originated from msal.",[Ml]:"Hash contains state but the interaction type does not match the caller.",[kl]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Kn}`,[Nl]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Pl]:"window.open returned null or undefined window object.",[zr]:"User cancelled the flow.",monitor_popup_timeout:`Token acquisition in popup failed due to timeout.  ${Kn}`,[Ol]:`Token acquisition in iframe failed due to timeout.  ${Kn}`,[xl]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Ll]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Kn}`,[Fl]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",iframe_closed_prematurely:"The iframe being monitored was closed prematurely.",[si]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Ul]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",silent_prompt_value_error:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Hl]:"No token request found in cache.",[Bl]:"The cached token request could not be parsed.",auth_request_not_set_error:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",invalid_cache_type:"Invalid cache type",[ai]:"Login and token requests are not supported in non-browser environments.",[mr]:"Database is not open!",[ci]:"No network connectivity. Check your internet connection.",[jl]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[$l]:"Network request failed. Please check the network trace to determine root cause.",[ca]:"Failed to parse network response. Check network trace.",[Vl]:"Error loading token to cache.",[ua]:"Cryptographic Key or Keypair not found in browser storage.",[Gl]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[zl]:"An authorization code or nativeAccountId must be provided to this flow.",[ql]:"Request cannot contain both spa code and native account id.",[la]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Kl]:`Unable to acquire token from native platform.  ${Kn}`,[Wl]:"Timed out while attempting to establish connection to browser extension",[Ql]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[da]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Kn}`,[qr]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Kn}`,[Yl]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Jl]:"Invalid base64 encoded string.",[Zl]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[tD]:"Failed to build request headers object.",[nD]:"Failed to parse response headers",[Xl]:"Failed to decrypt ear response",[ed]:"The request timed out."};class ha extends de{constructor(e,t){super(e,$[e],t),Object.setPrototypeOf(this,ha.prototype),this.name="BrowserAuthError"}}function b(n,e){return new ha(n,e)}function rD(n,e,t,r,o,i,s){try{var a=n[i](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,o)}function m(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(c){rD(i,r,o,s,a,"next",c)}function a(c){rD(i,r,o,s,a,"throw",c)}s(void 0)})}}const p={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"};function td(n){return encodeURIComponent(fa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function yr(n){return oD(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fa(n){return oD((new TextEncoder).encode(n))}function oD(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function gt(n){return(new TextDecoder).decode(vr(n))}function vr(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw b(Jl)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}const ui="AES-GCM",iD="HKDF",Cm="SHA-256",v$=new Uint8Array([1,0,1]),sD="0123456789abcdef",aD=new Uint32Array(1),Im="raw",cD="encrypt",Em="decrypt",C$="deriveKey",wm={name:"RSASSA-PKCS1-v1_5",hash:Cm,modulusLength:2048,publicExponent:v$};function uD(n,e,t){return _m.apply(this,arguments)}function _m(){return(_m=m(function*(n,e,t){e?.addQueueMeasurement(p.Sha256Digest,t);const o=(new TextEncoder).encode(n);return window.crypto.subtle.digest(Cm,o)})).apply(this,arguments)}function w$(n){return window.crypto.getRandomValues(n)}function Tm(){return window.crypto.getRandomValues(aD),aD[0]}function an(){const n=Date.now(),e=1024*Tm()+(1023&Tm()),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Tm();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/65536,t[4]=n/256,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=sD.charAt(t[a]>>>4),s+=sD.charAt(15&t[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function Sm(){return(Sm=m(function*(n,e){return window.crypto.subtle.generateKey(wm,n,e)})).apply(this,arguments)}function Am(n){return Dm.apply(this,arguments)}function Dm(){return(Dm=m(function*(n){return window.crypto.subtle.exportKey(xA,n)})).apply(this,arguments)}function bm(){return(bm=m(function*(n,e,t){return window.crypto.subtle.importKey(xA,n,wm,e,t)})).apply(this,arguments)}function Rm(){return(Rm=m(function*(n,e){return window.crypto.subtle.sign(wm,n,e)})).apply(this,arguments)}function Mm(){return km.apply(this,arguments)}function km(){return(km=m(function*(){const n=yield lD(),t={alg:"dir",kty:"oct",k:yr(new Uint8Array(n))};return fa(JSON.stringify(t))})).apply(this,arguments)}function Nm(){return(Nm=m(function*(n){const e=gt(n),o=vr(JSON.parse(e).k);return window.crypto.subtle.importKey(Im,o,ui,!1,[Em])})).apply(this,arguments)}function D$(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=m(function*(n,e){const t=e.split(".");if(5!==t.length)throw b(Xl,"jwe_length");const r=yield function A$(n){return Nm.apply(this,arguments)}(n).catch(()=>{throw b(Xl,"import_key")});try{const o=(new TextEncoder).encode(t[0]),i=vr(t[2]),s=vr(t[3]),a=vr(t[4]),c=8*a.byteLength,u=new Uint8Array(s.length+a.length);u.set(s),u.set(a,s.length);const l=yield window.crypto.subtle.decrypt({name:ui,iv:i,tagLength:c,additionalData:o},r,u);return(new TextDecoder).decode(l)}catch{throw b(Xl,"decrypt")}}),Pm.apply(this,arguments)}function lD(){return Om.apply(this,arguments)}function Om(){return(Om=m(function*(){const n=yield window.crypto.subtle.generateKey({name:ui,length:256},!0,[cD,Em]);return window.crypto.subtle.exportKey(Im,n)})).apply(this,arguments)}function dD(n){return xm.apply(this,arguments)}function xm(){return(xm=m(function*(n){return window.crypto.subtle.importKey(Im,n,iD,!1,[C$])})).apply(this,arguments)}function hD(n,e,t){return Lm.apply(this,arguments)}function Lm(){return(Lm=m(function*(n,e,t){return window.crypto.subtle.deriveKey({name:iD,salt:e,hash:Cm,info:(new TextEncoder).encode(t)},n,{name:ui,length:256},!1,[cD,Em])})).apply(this,arguments)}function b$(n,e,t){return Fm.apply(this,arguments)}function Fm(){return(Fm=m(function*(n,e,t){const r=(new TextEncoder).encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield hD(n,o,t),s=yield window.crypto.subtle.encrypt({name:ui,iv:new Uint8Array(12)},i,r);return{data:yr(new Uint8Array(s)),nonce:yr(o)}})).apply(this,arguments)}function fD(n,e,t,r){return Um.apply(this,arguments)}function Um(){return(Um=m(function*(n,e,t,r){const o=vr(r),i=yield hD(n,vr(e),t),s=yield window.crypto.subtle.decrypt({name:ui,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(s)})).apply(this,arguments)}function pD(n){return Hm.apply(this,arguments)}function Hm(){return(Hm=m(function*(n){const e=yield uD(n);return yr(new Uint8Array(e))})).apply(this,arguments)}function gD(n){n.location.hash="","function"==typeof n.history.replaceState&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function nd(){return window.parent!==window}function Wn(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function mD(){if(typeof window>"u")throw b(ai)}function yD(n){if(!n)throw b(qr)}function Bm(n){mD(),function N$(){if(ee.hashContainsKnownProperties(window.location.hash)&&nd())throw b(Ll)}(),function O$(){if(function M$(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${_t.POPUP_NAME_PREFIX}.`)}())throw b(Fl)}(),yD(n)}function vD(n,e){if(Bm(n),function P$(n){if(nd()&&!n)throw b(xl)}(e.system.allowRedirectInIframe),e.cache.cacheLocation===He.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Og(Bu)}function CD(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const ID={now:()=>(ID.delegate||Date).now(),delegate:void 0};class L$ extends Dt{constructor(e=1/0,t=1/0,r=ID){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function li(n,e){return ue(e)?Ye(n,e,1):Ye(n,1)}function Cr(n){return Pe((e,t)=>{let i,r=null,o=!1;r=e.subscribe(Oe(t,void 0,void 0,s=>{i=Ht(n(s,Cr(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}const rd=Pi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:U$}=Array,{getPrototypeOf:H$,prototype:B$,keys:j$}=Object;const{isArray:G$}=Array;function ED(...n){const e=Li(n),t=function CM(n){return ue(ih(n))?n.pop():void 0}(n),{args:r,keys:o}=function $$(n){if(1===n.length){const e=n[0];if(U$(e))return{args:e,keys:null};if(function V$(n){return n&&"object"==typeof n&&H$(n)===B$}(e)){const t=j$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return pe([],e);const i=new Ne(function W$(n,e,t=Jn){return r=>{wD(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)wD(e,()=>{const u=pe(n[c],e);let l=!1;u.subscribe(Oe(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>function K$(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,s):Jn));return t?i.pipe(function q$(n){return le(e=>function z$(n,e){return G$(e)?n(...e):n(e)}(n,e))}(t)):i}function wD(n,e,t){n?Nn(t,n,e):e()}function jm(...n){return function Q$(){return ja(1)}()(pe(n,Li(n)))}function _D(n){return new Ne(e=>{Ht(n()).subscribe(e)})}function pa(n,e){const t=ue(n)?n:()=>n,r=o=>o.error(t());return new Ne(e?o=>e.schedule(r,0,o):r)}function $m(){return Pe((n,e)=>{let t=null;n._refCount++;const r=Oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class TD extends Ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ev(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new At;const t=this.getSubject();e.add(this.source.subscribe(Oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=At.EMPTY)}return e}refCount(){return $m()(this)}}function di(n){return n<=0?()=>pn:Pe((e,t)=>{let r=0;e.subscribe(Oe(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Kr(n,e){return Pe((t,r)=>{let o=0;t.subscribe(Oe(r,i=>n.call(e,i,o++)&&r.next(i)))})}function od(n){return Pe((e,t)=>{let r=!1;e.subscribe(Oe(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function SD(n=J$){return Pe((e,t)=>{let r=!1;e.subscribe(Oe(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function J$(){return new rd}function Wr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kr((o,i)=>n(o,i,r)):Jn,di(1),t?od(e):SD(()=>new rd))}function et(n,e,t){const r=ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pe((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(Oe(i,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),i.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Jn}function Vm(n){return n<=0?()=>pn:Pe((e,t)=>{let r=[];e.subscribe(Oe(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Gm(n){return Pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const W="primary",ga=Symbol("RouteTitle");class rV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function hi(n){return new rV(n)}function oV(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function An(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!AD(n[o],e[o]))return!1;return!0}function AD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function DD(n){return n.length>0?n[n.length-1]:null}function Ir(n){return function F$(n){return!!n&&(n instanceof Ne||ue(n.lift)&&ue(n.subscribe))}(n)?n:tu(n)?pe(Promise.resolve(n)):L(n)}const sV={exact:function MD(n,e,t){if(!Qr(n.segments,e.segments)||!id(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!MD(n.children[r],e.children[r],t))return!1;return!0},subset:kD},bD={exact:function aV(n,e){return An(n,e)},subset:function cV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AD(n[t],e[t]))},ignored:()=>!0};function RD(n,e,t){return sV[t.paths](n.root,e.root,t.matrixParams)&&bD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kD(n,e,t){return ND(n,e,e.segments,t)}function ND(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Qr(o,t)||e.hasChildren()||!id(o,t,r))}if(n.segments.length===t.length){if(!Qr(n.segments,t)||!id(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!kD(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(Qr(n.segments,o)&&id(n.segments,o,r)&&n.children[W])&&ND(n.children[W],e,i,r)}}function id(n,e,t){return e.every((r,o)=>bD[t](n[o].parameters,r.parameters))}class fi{constructor(e=new ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hi(this.queryParams)),this._queryParamMap}toString(){return dV.serialize(this)}}class ce{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sd(this)}}class ma{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=hi(this.parameters)),this._parameterMap}toString(){return xD(this)}}function Qr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ya=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return new zm},providedIn:"root"})}}return n})();class zm{parse(e){const t=new wV(e);return new fi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${va(e.root,!0)}`,r=function pV(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ad(t)}=${ad(o)}`).join("&"):`${ad(t)}=${ad(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hV(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dV=new zm;function sd(n){return n.segments.map(e=>xD(e)).join("/")}function va(n,e){if(!n.hasChildren())return sd(n);if(e){const t=n.children[W]?va(n.children[W],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==W&&r.push(`${o}:${va(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lV(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===W&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==W&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===W?[va(n.children[W],!1)]:[`${o}:${va(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[W]?`${sd(n)}/${t[0]}`:`${sd(n)}/(${t.join("//")})`}}function PD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(n){return PD(n).replace(/%3B/gi,";")}function qm(n){return PD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(n){return decodeURIComponent(n)}function OD(n){return cd(n.replace(/\+/g,"%20"))}function xD(n){return`${qm(n.path)}${function fV(n){return Object.keys(n).map(e=>`;${qm(e)}=${qm(n[e])}`).join("")}(n.parameters)}`}const gV=/^[^\/()?;#]+/;function Km(n){const e=n.match(gV);return e?e[0]:""}const mV=/^[^\/()?;=#]+/,vV=/^[^=?&#]+/,IV=/^[^&#]+/;class wV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[W]=new ce(e,t)),r}parseSegment(){const e=Km(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new ma(cd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function yV(n){const e=n.match(mV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Km(this.remaining);o&&(r=o,this.capture(r))}e[cd(t)]=cd(r)}parseQueryParam(e){const t=function CV(n){const e=n.match(vV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function EV(n){const e=n.match(IV);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=OD(t),i=OD(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Km(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new S(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=W);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[W]:new ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function LD(n){return n.segments.length>0?new ce([],{[W]:n}):n}function FD(n){const e={};for(const r of Object.keys(n.children)){const i=FD(n.children[r]);if(r===W&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function _V(n){if(1===n.numberOfChildren&&n.children[W]){const e=n.children[W];return new ce(n.segments.concat(e.segments),e.children)}return n}(new ce(n.segments,e))}function Yr(n){return n instanceof fi}function UD(n){let e;const o=LD(function t(i){const s={};for(const c of i.children){const u=t(c);s[c.outlet]=u}const a=new ce(i.url,s);return i===n&&(e=a),a}(n.root));return e??o}function HD(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return Wm(o,o,o,t,r);const i=function SV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jD(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new jD(t,e,r)}(e);if(i.toRoot())return Wm(o,o,new ce([],{}),t,r);const s=function AV(n,e,t){if(n.isAbsolute)return new ld(e,!0,0);if(!t)return new ld(e,!1,NaN);if(null===t.parent)return new ld(t,!0,0);const r=ud(n.commands[0])?0:1;return function DV(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new S(4005,!1);o=r.segments.length}return new ld(r,!1,o-i)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(i,o,n),a=s.processChildren?Ia(s.segmentGroup,s.index,i.commands):$D(s.segmentGroup,s.index,i.commands);return Wm(o,s.segmentGroup,a,t,r)}function ud(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ca(n){return"object"==typeof n&&null!=n&&n.outlets}function Wm(n,e,t,r,o){let s,i={};r&&Object.entries(r).forEach(([c,u])=>{i[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:BD(n,e,t);const a=LD(FD(s));return new fi(a,i,o)}function BD(n,e,t){const r={};return Object.entries(n.children).forEach(([o,i])=>{r[o]=i===e?t:BD(i,e,t)}),new ce(n.segments,r)}class jD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ud(r[0]))throw new S(4003,!1);const o=r.find(Ca);if(o&&o!==DD(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ld{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $D(n,e,t){if(n||(n=new ce([],{})),0===n.segments.length&&n.hasChildren())return Ia(n,e,t);const r=function RV(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(Ca(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(o>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!GD(c,u,s))return i;r+=2}else{if(!GD(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new ce(n.segments.slice(0,r.pathIndex),{});return i.children[W]=new ce(n.segments.slice(r.pathIndex),n.children),Ia(i,0,o)}return r.match&&0===o.length?new ce(n.segments,{}):r.match&&!n.hasChildren()?Qm(n,e,t):r.match?Ia(n,0,o):Qm(n,e,t)}function Ia(n,e,t){if(0===t.length)return new ce(n.segments,{});{const r=function bV(n){return Ca(n[0])?n[0].outlets:{[W]:n}}(t),o={};if(Object.keys(r).some(i=>i!==W)&&n.children[W]&&1===n.numberOfChildren&&0===n.children[W].segments.length){const i=Ia(n.children[W],e,t);return new ce(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=$D(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new ce(n.segments,o)}}function Qm(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(Ca(i)){const c=MV(i.outlets);return new ce(r,c)}if(0===o&&ud(t[0])){r.push(new ma(n.segments[e].path,VD(t[0]))),o++;continue}const s=Ca(i)?i.outlets[W]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&ud(a)?(r.push(new ma(s,VD(a))),o+=2):(r.push(new ma(s,{})),o++)}return new ce(r,{})}function MV(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Qm(new ce([],{}),0,r))}),e}function VD(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GD(n,e,t){return n==t.path&&An(e,t.parameters)}const Ea="imperative";class Dn{constructor(e,t){this.id=e,this.url=t}}class Ym extends Dn{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pi extends Dn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wa extends Dn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _a extends Dn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class dd extends Dn{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zD extends Dn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kV extends Dn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NV extends Dn{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class PV extends Dn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OV extends Dn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xV{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class LV{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class FV{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UV{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HV{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BV{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jm{}class Zm{constructor(e){this.url=e}}class jV{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ta,this.attachRef=null}}let Ta=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jV,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class qD{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ey(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ey(e,this._root).map(t=>t.value)}}function Xm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xm(n,t);if(r)return r}return null}function ey(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ey(n,t);if(r.length)return r.unshift(e),r}return[]}class Qn{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class KD extends qD{constructor(e,t){super(e),this.snapshot=t,ty(this,e)}toString(){return this.snapshot.toString()}}function WD(n,e){const t=function $V(n,e){const s=new hd([],{},{},"",{},W,e,null,{});return new YD("",new Qn(s,[]))}(0,e),r=new bt([new ma("",{})]),o=new bt({}),i=new bt({}),s=new bt({}),a=new bt(""),c=new mi(r,o,s,a,i,W,e,t.root);return c.snapshot=t.root,new KD(new Qn(c,[]),t)}class mi{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(u=>u[ga]))??L(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(le(e=>hi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(le(e=>hi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function QD(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function VV(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hd{get title(){return this.data?.[ga]}constructor(e,t,r,o,i,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class YD extends qD{constructor(e,t){super(t),this.url=e,ty(this,t)}toString(){return JD(this._root)}}function ty(n,e){e.value._routerState=n,e.children.forEach(t=>ty(n,t))}function JD(n){const e=n.children.length>0?` { ${n.children.map(JD).join(", ")} } `:"";return`${n.value}${e}`}function ny(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),function iV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ry(n,e){const t=An(n.params,e.params)&&function uV(n,e){return Qr(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ry(n.parent,e.parent))}let ZD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=P(Ta),this.location=P(tn),this.changeDetector=P(Qp),this.environmentInjector=P(Jt),this.inputBinder=P(fd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new GV(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mr]})}}return n})();class GV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===mi?this.route:e===Ta?this.childContexts:this.parent.get(e,t)}}const fd=new k("");function Sa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function qV(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Sa(n,r,o);return Sa(n,r)})}(n,e,t);return new Qn(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Sa(n,a)),s}}const r=function KV(n){return new mi(new bt(n.url),new bt(n.params),new bt(n.queryParams),new bt(n.fragment),new bt(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>Sa(n,i));return new Qn(r,o)}}const oy="ngNavigationCancelingError";function eb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Yr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=tb(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function tb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[oy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function nb(n){return n&&n[oy]}let rb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ja({type:n,selectors:[["ng-component"]],standalone:!0,features:[hT],decls:1,vars:0,template:function(r,o){1&r&&dp(0,"router-outlet")},dependencies:[ZD],encapsulation:2})}}return n})();function iy(n){const e=n.children&&n.children.map(iy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==W&&(t.component=rb),t}function cn(n){return n.outlet||W}function Aa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class t2{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ny(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=gi(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=gi(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=gi(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=gi(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new BV(i.value.snapshot))}),e.children.length&&this.forwardEvent(new UV(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(ny(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ny(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Aa(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class ob{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pd{constructor(e,t){this.component=e,this.route=t}}function n2(n,e,t){const r=n._root;return Da(r,e?e._root:null,t,[r.value])}function yi(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function LM(n){return null!==Ga(n)}(n)?e.get(n):n:r}function Da(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=gi(e);return n.children.forEach(s=>{(function o2(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function i2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qr(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ry(n,e)||!An(n.queryParams,e.queryParams);default:return!ry(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ob(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Da(n,e,i.component?a?a.children:null:t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new pd(a.outlet.component,s))}else s&&ba(e,a,o),o.canActivateChecks.push(new ob(r)),Da(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ba(a,t.getContext(s),o)),o}function ba(n,e,t){const r=gi(n),o=n.value;Object.entries(r).forEach(([i,s])=>{ba(s,o.component?e?e.children.getContext(i):null:e,t)}),t.canDeactivateChecks.push(new pd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Ra(n){return"function"==typeof n}function ib(n){return n instanceof rd||"EmptyError"===n?.name}const gd=Symbol("INITIAL_VALUE");function vi(){return Pn(n=>ED(n.map(e=>e.pipe(di(1),function Y$(...n){const e=Li(n);return Pe((t,r)=>{(e?jm(n,t,e):jm(n,t)).subscribe(r)})}(gd)))).pipe(le(e=>{for(const t of e)if(!0!==t){if(t===gd)return gd;if(!1===t||t instanceof fi)return t}return!0}),Kr(e=>e!==gd),di(1)))}function sb(n){return function NR(...n){return vv(n)}(et(e=>{if(Yr(e))throw eb(0,e)}),le(e=>!0===e))}class md{constructor(e){this.segmentGroup=e||null}}class ab{constructor(e){this.urlTree=e}}function Ci(n){return pa(new md(n))}function cb(n){return pa(new ab(n))}class S2{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new S(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return L(r);if(o.numberOfChildren>1||!o.children[W])return pa(new S(4e3,!1));o=o.children[W]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new fi(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ce(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new S(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A2(n,e,t,r,o){const i=ay(n,e,t);return i.matched?(r=function QV(n,e){return n.providers&&!n._injector&&(n._injector=dT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function w2(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?L(o.map(s=>{const a=yi(s,n);return Ir(function d2(n){return n&&Ra(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(vi(),sb()):L(!0)}(r,e,t).pipe(le(s=>!0===s?i:{...sy}))):L(i)}function ay(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...sy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||oV)(t,n,e);if(!o)return{...sy};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function ub(n,e,t,r){return t.length>0&&function R2(n,e,t){return t.some(r=>yd(n,e,r)&&cn(r)!==W)}(n,t,r)?{segmentGroup:new ce(e,b2(r,new ce(t,n.children))),slicedSegments:[]}:0===t.length&&function M2(n,e,t){return t.some(r=>yd(n,e,r))}(n,t,r)?{segmentGroup:new ce(n.segments,D2(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ce(n.segments,n.children),slicedSegments:t}}function D2(n,e,t,r,o){const i={};for(const s of r)if(yd(n,t,s)&&!o[cn(s)]){const a=new ce([],{});i[cn(s)]=a}return{...o,...i}}function b2(n,e){const t={};t[W]=e;for(const r of n)if(""===r.path&&cn(r)!==W){const o=new ce([],{});t[cn(r)]=o}return t}function yd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class O2{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new S2(this.urlSerializer,this.urlTree)}noMatchError(e){return new S(4002,!1)}recognize(){const e=ub(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Cr(t=>{if(t instanceof ab)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof md?this.noMatchError(t):t}),le(t=>{const r=new hd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),o=new Qn(r,t),i=new YD("",o),s=function TV(n,e,t=null,r=null){return HD(UD(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,W).pipe(Cr(r=>{throw r instanceof md?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=QD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return pe(o).pipe(li(i=>{const s=r.children[i],a=function XV(n,e){const t=n.filter(r=>cn(r)===e);return t.push(...n.filter(r=>cn(r)!==e)),t}(t,i);return this.processSegmentGroup(e,a,s,i)}),function X$(n,e){return Pe(function Z$(n,e,t,r,o){return(i,s)=>{let a=t,c=e,u=0;i.subscribe(Oe(s,l=>{const d=u++;c=a?n(c,l,d):(a=!0,l),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),od(null),function eV(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kr((o,i)=>n(o,i,r)):Jn,Vm(1),t?od(e):SD(()=>new rd))}(),Ye(i=>{if(null===i)return Ci(r);const s=lb(i);return function x2(n){n.sort((e,t)=>e.value.outlet===W?-1:t.value.outlet===W?1:e.value.outlet.localeCompare(t.value.outlet))}(s),L(s)}))}processSegment(e,t,r,o,i,s){return pe(t).pipe(li(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,o,i,s).pipe(Cr(c=>{if(c instanceof md)return L(null);throw c}))),Wr(a=>!!a),Cr(a=>{if(ib(a))return function N2(n,e,t){return 0===e.length&&!n.children[t]}(r,o,i)?L([]):Ci(r);throw a}))}processSegmentAgainstRoute(e,t,r,o,i,s,a){return function k2(n,e,t,r){return!!(cn(n)===r||r!==W&&yd(e,t,n))&&("**"===n.path||ay(e,n,t).matched)}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,i,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s):Ci(o):Ci(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cb(i):this.applyRedirects.lineralizeSegments(r,i).pipe(Ye(s=>{const a=new ce(s,{});return this.processSegment(e,t,a,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=ay(t,o,i);if(!a)return Ci(t);const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,l);return o.redirectTo.startsWith("/")?cb(d):this.applyRedirects.lineralizeSegments(o,d).pipe(Ye(h=>this.processSegment(e,r,t,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a;if("**"===r.path){const c=o.length>0?DD(o).parameters:{};a=L({snapshot:new hd(o,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,db(r),cn(r),r.component??r._loadedComponent??null,r,hb(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=A2(t,r,o,e).pipe(le(({matched:c,consumedSegments:u,remainingSegments:l,parameters:d})=>c?{snapshot:new hd(u,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,db(r),cn(r),r.component??r._loadedComponent??null,r,hb(r)),consumedSegments:u,remainingSegments:l}:null));return a.pipe(Pn(c=>null===c?Ci(t):this.getChildConfig(e=r._injector??e,r,o).pipe(Pn(({routes:u})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:g,slicedSegments:y}=ub(t,h,f,u);if(0===y.length&&g.hasChildren())return this.processChildren(l,u,g).pipe(le(_=>null===_?null:[new Qn(d,_)]));if(0===u.length&&0===y.length)return L([new Qn(d,[])]);const C=cn(r)===i;return this.processSegment(l,u,g,y,C?W:i,!0).pipe(le(_=>[new Qn(d,_)]))}))))}getChildConfig(e,t,r){return t.children?L({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?L({routes:t._loadedRoutes,injector:t._loadedInjector}):function E2(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?L(!0):L(o.map(s=>{const a=yi(s,n);return Ir(function a2(n){return n&&Ra(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(vi(),sb())}(e,t,r).pipe(Ye(o=>o?this.configLoader.loadChildren(e,t).pipe(et(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function T2(n){return pa(tb(!1,3))}())):L({routes:[],injector:e})}}function L2(n){const e=n.value.routeConfig;return e&&""===e.path}function lb(n){const e=[],t=new Set;for(const r of n){if(!L2(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=lb(r.children);e.push(new Qn(r.value,o))}return e.filter(r=>!t.has(r))}function db(n){return n.data||{}}function hb(n){return n.resolve||{}}function fb(n){return"string"==typeof n.title||null===n.title}function cy(n){return Pn(e=>{const t=n(e);return t?pe(t).pipe(le(()=>e)):L(e)})}const vd=new k("ROUTES");let pb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(U1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return L(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ir(t.loadComponent()).pipe(le(gb),et(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Gm(()=>{this.componentLoaders.delete(t)})),o=new TD(r,()=>new Dt).pipe($m());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function V2(n,e,t,r){return Ir(n.loadChildren()).pipe(le(gb),Ye(o=>o instanceof uT||Array.isArray(o)?L(o):pe(e.compileModuleAsync(o))),le(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(t).injector,s=i.get(vd,[],{optional:!0,self:!0}).flat()),{routes:s.map(iy),injector:i}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Gm(()=>{this.childrenLoaders.delete(r)})),s=new TD(i,()=>new Dt).pipe($m());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gb(n){return function G2(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Cd=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Dt,this.transitionAbortSubject=new Dt,this.configLoader=P(pb),this.environmentInjector=P(Jt),this.urlSerializer=P(ya),this.rootContexts=P(Ta),this.inputBindingEnabled=null!==P(fd,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new LV(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new xV(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new bt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ea,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kr(i=>0!==i.id),le(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Pn(i=>{this.currentTransition=i;let s=!1,a=!1;return L(i).pipe(et(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pn(c=>{const u=c.currentBrowserUrl.toString(),l=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new _a(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),pn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return L(c).pipe(Pn(h=>{const f=this.transitions?.getValue();return this.events.next(new Ym(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?pn:Promise.resolve(h)}),function F2(n,e,t,r,o,i){return Ye(s=>function P2(n,e,t,r,o,i,s="emptyOnly"){return new O2(n,e,t,r,o,s,i).recognize()}(n,e,t,r,s.extractedUrl,o,i).pipe(le(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),et(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new zD(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:g,restoredState:y,extras:C}=c,_=new Ym(h,this.urlSerializer.serialize(f),g,y);this.events.next(_);const v=WD(0,this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:v,urlAfterRedirects:f,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},L(i)}{const h="";return this.events.next(new _a(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),pn}}),et(c=>{const u=new kV(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),le(c=>(this.currentTransition=i={...c,guards:n2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function f2(n,e){return Ye(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?L({...t,guardsResult:!0}):function p2(n,e,t,r){return pe(n).pipe(Ye(o=>function I2(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?L(i.map(a=>{const c=Aa(e)??o,u=yi(a,c);return Ir(function l2(n){return n&&Ra(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Wr())})).pipe(vi()):L(!0)}(o.component,o.route,t,e,r)),Wr(o=>!0!==o,!0))}(s,r,o,n).pipe(Ye(a=>a&&function s2(n){return"boolean"==typeof n}(a)?function g2(n,e,t,r){return pe(e).pipe(li(o=>jm(function y2(n,e){return null!==n&&e&&e(new FV(n)),L(!0)}(o.route.parent,r),function m2(n,e){return null!==n&&e&&e(new HV(n)),L(!0)}(o.route,r),function C2(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function r2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>_D(()=>L(s.guards.map(c=>{const u=Aa(s.node)??t,l=yi(c,u);return Ir(function u2(n){return n&&Ra(n.canActivateChild)}(l)?l.canActivateChild(r,n):u.runInContext(()=>l(r,n))).pipe(Wr())})).pipe(vi())));return L(i).pipe(vi())}(n,o.path,t),function v2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return L(!0);const o=r.map(i=>_D(()=>{const s=Aa(e)??t,a=yi(i,s);return Ir(function c2(n){return n&&Ra(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Wr())}));return L(o).pipe(vi())}(n,o.route,t))),Wr(o=>!0!==o,!0))}(r,i,n,e):L(a)),le(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),et(c=>{if(i.guardsResult=c.guardsResult,Yr(c.guardsResult))throw eb(0,c.guardsResult);const u=new NV(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Kr(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),cy(c=>{if(c.guards.canActivateChecks.length)return L(c).pipe(et(u=>{const l=new PV(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Pn(u=>{let l=!1;return L(u).pipe(function U2(n,e){return Ye(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return L(t);let i=0;return pe(o).pipe(li(s=>function H2(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!fb(o)&&(i[ga]=o.title),function B2(n,e,t,r){const o=function j2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return L({});const i={};return pe(o).pipe(Ye(s=>function $2(n,e,t,r){const o=Aa(e)??r,i=yi(n,o);return Ir(i.resolve?i.resolve(e,t):o.runInContext(()=>i(e,t)))}(n[s],e,t,r).pipe(Wr(),et(a=>{i[s]=a}))),Vm(1),function tV(n){return le(()=>n)}(i),Cr(s=>ib(s)?pn:pa(s)))}(i,n,e,r).pipe(le(s=>(n._resolvedData=s,n.data=QD(n,t).resolve,o&&fb(o)&&(n.data[ga]=o.title),null)))}(s.route,r,n,e)),et(()=>i++),Vm(1),Ye(s=>i===o.length?L(t):pn))})}(t.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",2)}}))}),et(u=>{const l=new OV(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),cy(c=>{const u=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(et(h=>{l.component=h}),le(()=>{})));for(const h of l.children)d.push(...u(h));return d};return ED(u(c.targetSnapshot.root)).pipe(od(),di(1))}),cy(()=>this.afterPreactivation()),le(c=>{const u=function zV(n,e,t){const r=Sa(n,e._root,t?t._root:void 0);return new KD(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:u},i}),et(()=>{this.events.next(new Jm)}),((n,e,t,r)=>le(o=>(new t2(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),di(1),et({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function nV(n){return Pe((e,t)=>{Ht(n).subscribe(Oe(t,()=>t.complete(),Wd)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(et(c=>{throw c}))),Gm(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Cr(c=>{if(a=!0,nb(c))this.events.next(new wa(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function WV(n){return nb(n)&&Yr(n.url)}(c)?this.events.next(new Zm(c.url)):i.resolve(!1);else{this.events.next(new dd(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(t.errorHandler(c))}catch(u){i.reject(u)}}return pn}))}))}cancelNavigationTransition(t,r,o){const i=new wa(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mb(n){return n!==Ea}let yb=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===W);return r}getResolvedTitleForRoute(t){return t.data[ga]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return P(z2)},providedIn:"root"})}}return n})(),z2=(()=>{class n extends yb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(TA))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),q2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return P(W2)},providedIn:"root"})}}return n})();class K2{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let W2=(()=>{class n extends K2{static{this.\u0275fac=function(){let t;return function(o){return(t||(t=function aI(n){return On(()=>{const e=n.prototype.constructor,t=e[xn]||qh(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[xn]||qh(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}(n)))(o||n)}}()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const uy=new k("",{providedIn:"root",factory:()=>({})});let Q2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(){return P(Y2)},providedIn:"root"})}}return n})(),Y2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ma=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ma||{});function J2(n){throw n}function Z2(n,e,t){return e.parse("/")}const X2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let un=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=P(rS),this.isNgZoneEnabled=!1,this._events=new Dt,this.options=P(uy,{optional:!0})||{},this.pendingTasks=P(oS),this.errorHandler=this.options.errorHandler||J2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Z2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=P(Q2),this.routeReuseStrategy=P(q2),this.titleStrategy=P(yb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=P(vd,{optional:!0})?.flat()??[],this.navigationTransitions=P(Cd),this.urlSerializer=P(ya),this.location=P(xs),this.componentInputBindingEnabled=!!P(fd,{optional:!0}),this.eventsSubscription=new At,this.isNgZoneEnabled=P(Ce)instanceof Ce&&Ce.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new fi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=WD(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(Cb(r)&&this._events.next(r));if(r instanceof Ym)mb(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof _a)this.rawUrlTree=o.rawUrl;else if(r instanceof zD){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Jm)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof wa)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Zm){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),s={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mb(o.source)};this.scheduleNavigation(i,Ea,null,s,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof dd&&this.restoreHistory(o,!0),r instanceof pi&&(this.navigated=!0),Cb(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ea,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(iy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...i};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}null!==l&&(l=this.removeEmptyProps(l));try{d=UD(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return HD(d,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Yr(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Ea,null,r)}navigate(t,r={skipLocationChange:!1}){return function tG(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new S(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...X2}:!1===r?{...eG}:r,Yr(t))return RD(this.currentUrlTree,t,o);const i=this.parseUrl(t);return RD(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});const l=this.pendingTasks.add();return function vb(n,e){n.events.pipe(Kr(t=>t instanceof pi||t instanceof wa||t instanceof dd||t instanceof _a),le(t=>t instanceof pi||t instanceof _a?Ma.COMPLETE:t instanceof wa&&(0===t.code||1===t.code)?Ma.REDIRECTING:Ma.FAILED),Kr(t=>t!==Ma.REDIRECTING),di(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Cb(n){return!(n instanceof Jm||n instanceof Zm)}const Id="@azure/msal-angular",ka="4.0.22",fy=new k("MSAL_INSTANCE"),Ab=new k("MSAL_GUARD_CONFIG"),uG=new k("MSAL_INTERCEPTOR_CONFIG"),lG=new k("MSAL_BROADCAST_CONFIG");let py=(()=>{class n{constructor(t,r){this.msalInstance=t,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(Id,ka).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new L$(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Dt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new bt("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);const i=Cj.getInteractionStatusFromEvent(o,this._inProgress.value);null!==i&&(this.msalInstance.getLogger().clone(Id,ka).verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){"startup"===this._inProgress.value&&this._inProgress.next("none")}}return n.\u0275fac=function(t){return new(t||n)(O(fy),O(lG,8))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})(),Ed=(()=>{class n{constructor(t,r,o){this.instance=t,this.location=r,this.injector=o;const i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",ka)}initialize(){return pe(this.instance.initialize())}acquireTokenPopup(t){return pe(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return pe(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return pe(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return pe(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(py).resetInProgressEvent()}))}loginPopup(t){return pe(this.instance.loginPopup(t))}loginRedirect(t){return pe(this.instance.loginRedirect(t))}logout(t){return pe(this.instance.logout(t))}logoutRedirect(t){return pe(this.instance.logoutRedirect(t))}logoutPopup(t){return pe(this.instance.logoutPopup(t))}ssoSilent(t){return pe(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(Id,ka)),this.logger}setLogger(t){this.logger=t.clone(Id,ka),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(O(fy),O(xs),O(Zt))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})(),dG=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===N.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(le(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(t.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(le(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==N.Popup&&this.msalGuardConfig.interactionType!==N.Redirect)throw new $u("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),L(!0);if(ee.hashContainsKnownProperties(window.location.hash)&&nd()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),L(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(li(()=>this.authService.handleRedirectObservable()),li(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),L(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){const o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=0===this.location.prepareExternalUrl(t.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?L(this.parseUrl(this.location.path())):L(this.parseUrl(""))}return L(!0)}),Cr(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),L(this.loginFailedRoute)):L(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(O(Ab),O(py),O(Ed),O(xs),O(un))},n.\u0275prov=B({token:n,factory:n.\u0275fac}),n})(),hG=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(x(Ed))},n.\u0275cmp=Ja({type:n,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),fG=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:fy,useValue:t},{provide:Ab,useValue:r},{provide:uG,useValue:o},Ed]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=no({type:n}),n.\u0275inj=Dr({providers:[dG,py],imports:[oA]}),n})(),pG=(()=>{class n{constructor(t){this.msalService=t}login(){this.msalService.loginRedirect({scopes:["user.read"]})}logout(){this.msalService.logoutRedirect()}static{this.\u0275fac=function(r){return new(r||n)(x(Ed))}}static{this.\u0275cmp=Ja({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[3,"click"]],template:function(r,o){1&r&&(qo(0,"h1"),ou(1,"Login com Azure AD"),Ko(),qo(2,"button",0),ws("click",function(){return o.login()}),ou(3,"Entrar"),Ko(),qo(4,"button",0),ws("click",function(){return o.logout()}),ou(5,"Sair"),Ko())},encapsulation:2})}}return n})();var _e=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(_e||{});class Er{constructor(e,t,r){this.level=_e.Info;const i=e||Er.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:_e.Info,this.correlationId=i.correlationId||E.EMPTY_STRING,this.packageName=t||E.EMPTY_STRING,this.packageVersion=r||E.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:_e.Info}}clone(e,t,r){return new Er({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${_e[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:_e.Error,containsPii:!1,correlationId:t||E.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:_e.Error,containsPii:!0,correlationId:t||E.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:_e.Warning,containsPii:!1,correlationId:t||E.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:_e.Warning,containsPii:!0,correlationId:t||E.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:_e.Info,containsPii:!1,correlationId:t||E.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:_e.Info,containsPii:!0,correlationId:t||E.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:_e.Verbose,containsPii:!1,correlationId:t||E.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:_e.Verbose,containsPii:!0,correlationId:t||E.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:_e.Trace,containsPii:!1,correlationId:t||E.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:_e.Trace,containsPii:!0,correlationId:t||E.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Tt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"},wd={createNewGuid:()=>{throw T(Q)},base64Decode:()=>{throw T(Q)},base64Encode:()=>{throw T(Q)},base64UrlEncode:()=>{throw T(Q)},encodeKid:()=>{throw T(Q)},getPublicKeyThumbprint:()=>m(function*(){throw T(Q)})(),removeTokenBindingKey:()=>m(function*(){throw T(Q)})(),clearKeystore:()=>m(function*(){throw T(Q)})(),signJwt:()=>m(function*(){throw T(Q)})(),hashString:()=>m(function*(){throw T(Q)})()},Db="@azure/msal-common",my="15.13.2";function _d(n,e){if(!n)throw T(rl);try{const t=e(n);return JSON.parse(t)}catch{throw T(Ks)}}function Ii(n){if(!n)throw T(Ks);const e=n.split(Bs.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?E.EMPTY_STRING:e[1]}}function bb(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Td(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:u,preferred_username:l,upn:d,login_hint:h}=r,f=s||c||u||"";return{tenantId:f,localAccountId:o||i||"",name:a,username:l||d||"",loginHint:h,isHomeTenant:bb(f,n)}}return{tenantId:t,localAccountId:e,username:"",isHomeTenant:bb(t,n)}}function yy(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=Td(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}function vy(n){return n&&(n.tid||n.tfp||n.acr)||null}class Re{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){const o=new Re;let i;o.authorityType=1===t.authorityType?"ADFS":t.protocolMode===Tt.OIDC?"Generic":"MSSTS",e.clientInfo&&r&&(i=_d(e.clientInfo,r),i.xms_tdbr&&(o.dataBoundary="EU"===i.xms_tdbr?"EU":"None")),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw T(Xs);if(o.environment=s,o.realm=i?.utid||vy(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const u=Td(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[u]}return o}static createFromAccountInfo(e,t,r){const o=new Re;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o.dataBoundary=e.dataBoundary,o}static generateHomeAccountId(e,t,r,o,i){if(1!==t&&2!==t){if(e)try{const s=_d(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}function bn(n,e){const t=function gG(n){if(!n)throw T(ol);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw T(Ws);return t[2]}(n);try{const r=e(t);return JSON.parse(r)}catch{throw T(Ws)}}function Rn(n){if(!n.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return n.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function Rb(n,e){if(0===e||Date.now()-3e5>n+e)throw T(ll)}const kb={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Cy={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Nb=new Set;function Pb(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=Sd(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function Sd(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}Cy.metadata.forEach(n=>{n.aliases.forEach(e=>{Nb.add(e)})});const Ad="cache_quota_exceeded",Iy="cache_error_unknown",Ey={[Ad]:"Exceeded cache storage capacity.",[Iy]:"Unexpected error occurred when using cache storage."};class Ei extends de{constructor(e,t){const r=t||(Ey[e]?Ey[e]:Ey[Iy]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ei.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function wy(n){return n instanceof Error?"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||n.message.includes("exceeded the quota")?new Ei(Ad):new Ei(n.name,n.message):new Ei(Iy)}class _y{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Db,my),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?Re.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=bn(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=yy(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){const i=Re.getAccountInfo(e);let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const u=s.get(r);if(!u)return[];s=new Map([[r,u]])}const c=[];return s.forEach(u=>{const l=this.getTenantedAccountInfoByFilter(i,a,u,t,o);l&&c.push(l)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r,o){var i=this;return m(function*(){if(!e)throw T(gl);try{e.account&&(yield i.setAccount(e.account,t,r)),e.idToken&&!1!==o?.idToken&&(yield i.setIdTokenCredential(e.idToken,t,r)),e.accessToken&&!1!==o?.accessToken&&(yield i.saveAccessToken(e.accessToken,t,r)),e.refreshToken&&!1!==o?.refreshToken&&(yield i.setRefreshTokenCredential(e.refreshToken,t,r)),e.appMetadata&&i.setAppMetadata(e.appMetadata,t)}catch(s){throw i.commonLogger?.error("CacheManager.saveCacheRecord: failed"),s instanceof de?s:wy(s)}})()}saveAccessToken(e,t,r){var o=this;return m(function*(){const i={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=o.getTokenKeys(),a=Ue.fromString(e.target);s.accessToken.forEach(c=>{if(!o.accessTokenKeyMatchesFilter(c,i,!1))return;const u=o.getAccessTokenCredential(c,t);u&&o.credentialMatchesFilter(u,i)&&Ue.fromString(u.target).intersectingScopeSets(a)&&o.removeAccessToken(c,t)}),yield o.setAccessTokenCredential(e,t,r)})()}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{const s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&0===c.length||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||"string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===ze.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===ae.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(i=>i.includes(e.homeAccountId)&&i.includes(e.environment)).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==ze.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==ae.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ze.ID_TOKEN,clientId:this.clientId,realm:o},t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=a;if(!o){const l=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&l.set(f,h)});const d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;u=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((l,d)=>{this.removeIdToken(d,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){const i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);const s=Ue.createSearchScopes(t.scopes),a=t.authenticationScheme||ae.BEARER,c=a&&a.toLowerCase()!==ae.BEARER.toLowerCase()?ze.ACCESS_TOKEN_WITH_AUTH_SCHEME:ze.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,u,!0)){const g=this.getAccessTokenCredential(f,i);g&&this.credentialMatchesFilter(g,u)&&d.push(g)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),d.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),i)}),this.performanceClient.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),d[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&-1===o.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===o.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===o.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===o.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ze.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&u.push(h)}});const l=u.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&i&&r&&i.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw T(dl);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||"1"!==t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=function mG(n,e){let t;const r=n.canonicalAuthority;if(r){const o=new ee(r).getUrlComponents().HostNameAndPort;t=Pb(o,n.cloudDiscoveryMetadata?.metadata,"config",e)||Pb(o,Cy.metadata,"hardcoded_values",e)||n.knownAuthorities}return t||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==ze.ACCESS_TOKEN&&e.credentialType!==ze.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Ue.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(bg)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class vG extends _y{setAccount(){return m(function*(){throw T(Q)})()}getAccount(){throw T(Q)}setIdTokenCredential(){return m(function*(){throw T(Q)})()}getIdTokenCredential(){throw T(Q)}setAccessTokenCredential(){return m(function*(){throw T(Q)})()}getAccessTokenCredential(){throw T(Q)}setRefreshTokenCredential(){return m(function*(){throw T(Q)})()}getRefreshTokenCredential(){throw T(Q)}setAppMetadata(){throw T(Q)}getAppMetadata(){throw T(Q)}setServerTelemetry(){throw T(Q)}getServerTelemetry(){throw T(Q)}setAuthorityMetadata(){throw T(Q)}getAuthorityMetadata(){throw T(Q)}getAuthorityMetadataKeys(){throw T(Q)}setThrottlingCache(){throw T(Q)}getThrottlingCache(){throw T(Q)}removeItem(){throw T(Q)}getKeys(){throw T(Q)}getAccountKeys(){throw T(Q)}getTokenKeys(){throw T(Q)}generateCredentialKey(){throw T(Q)}generateAccountKey(){throw T(Q)}}class Ob{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class xb{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Ob}}startPerformanceMeasurement(){return new Ob}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Lb={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},CG={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:_e.Info,correlationId:E.EMPTY_STRING},IG={claimsBasedCachingEnabled:!1},EG={sendGetRequestAsync:()=>m(function*(){throw T(Q)})(),sendPostRequestAsync:()=>m(function*(){throw T(Q)})()},wG={sku:E.SKU,version:my,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},_G={clientSecret:E.EMPTY_STRING,clientAssertion:void 0},TG={azureCloudInstance:"none",tenant:`${E.DEFAULT_COMMON_TENANT}`},SG={application:{appName:"",appVersion:""}};function DG(n){return{clientCapabilities:[],azureCloudOptions:TG,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...n}}function Fb(n){return n.authOptions.authority.options.protocolMode===Tt.OIDC}const bG={sendGetRequestAsync:()=>Promise.reject(T(Q)),sendPostRequestAsync:()=>Promise.reject(T(Q))};class Dd{navigateInternal(e,t){return Dd.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Dd.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(b(ed,"failed_to_redirect"))},t.timeout)})}}class bd extends de{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,bd.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function Na(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new bd(n,e,t)}class RG{sendGetRequestAsync(e,t){return m(function*(){let r,o={},i=0;const s=Ub(t);try{r=yield fetch(e,{method:"GET",headers:s})}catch(a){throw Na(b(window.navigator.onLine?$l:ci),void 0,void 0,a)}o=Hb(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw Na(b(ca),i,o,a)}})()}sendPostRequestAsync(e,t){return m(function*(){const r=t&&t.body||"",o=Ub(t);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch(c){throw Na(b(window.navigator.onLine?jl:ci),void 0,void 0,c)}a=Hb(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw Na(b(ca),s,a,c)}})()}}function Ub(n){try{const e=new Headers;return n&&n.headers?(Object.entries(n.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch(e){throw Na(b(tD),void 0,void 0,e)}}function Hb(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw b(nD)}}const Ty=1e4,Bb=2e3,Jr="4.26.2",We="msal",Sy="browser",tt=2,Rd=2,OG=`${We}.${Sy}.log.level`,xG=`${We}.${Sy}.log.pii`,LG=`${We}.${Sy}.platform.auth.dom`,$b=`${We}.version`,Vb="account.keys",Gb="token.keys";function wi(n=Rd){return n<1?`${We}.${Vb}`:`${We}.${n}.${Vb}`}function _i(n,e=tt){return e<1?`${We}.${Gb}.${n}`:`${We}.${e}.${Gb}.${n}`}class Ay{static loggerCallback(e,t){switch(e){case _e.Error:return void console.error(t);case _e.Info:return void console.info(t);case _e.Verbose:return void console.debug(t);case _e.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment=typeof window<"u",this.config=function NG({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:E.EMPTY_STRING,authority:`${E.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:E.EMPTY_STRING,authorityMetadata:E.EMPTY_STRING,redirectUri:typeof window<"u"?Wn():"",postLogoutRedirectUri:E.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Tt.AAD,OIDCOptions:{serverResponseType:Ou.FRAGMENT,defaultScopes:[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:E.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:He.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:He.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||e.cacheLocation!==He.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:_e.Info,piiLoggingEnabled:!1},u={...{...Lb,loggerOptions:a,networkClient:o?new RG:bG,navigationClient:new Dd,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||6e4,iframeHashTimeout:t?.loadFrameTimeout||Ty,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||Bb,pollIntervalMilliseconds:_t.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:t?.loggerOptions||a},l={application:{appName:E.EMPTY_STRING,appVersion:E.EMPTY_STRING},client:new xb};if(n?.protocolMode!==Tt.OIDC&&n?.OIDCOptions&&new Er(u.loggerOptions).warning(JSON.stringify(fe(Zu))),n?.protocolMode&&n.protocolMode===Tt.OIDC&&u?.allowPlatformBroker)throw fe(Xu);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n?.OIDCOptions}},cache:{...s,...e},system:u,telemetry:{...l,...r}}}(e,this.browserEnvironment);try{t=window[He.SessionStorage]}catch{}const r=t?.getItem(OG),o=t?.getItem(xG)?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(_e).includes(r)?_e[r]:void 0;a&&(s.loggerCallback=Ay.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new Er(s,"@azure/msal-browser",Jr),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let zb=(()=>{class n extends Ay{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){var t=this;return m(function*(){return t.available=typeof window<"u",t.available})()}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();const qb="missing_kid_error",Kb="missing_alg_error",FG={[qb]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Kb]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Dy extends de{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Dy.prototype)}}function Wb(n){return new Dy(n,FG[n])}class by{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Wb(qb);if(!e.alg)throw Wb(Kb);const t=new by({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class UG{constructor(){this.dbName=Mg,this.version=1,this.tableName=yj,this.dbOpen=!1}open(){var e=this;return m(function*(){return new Promise((t,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,t()}),o.addEventListener("error",()=>r(b(la)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return m(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var t=this;return m(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(b(mr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);a.addEventListener("success",c=>{const u=c;t.closeConnection(),r(u.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}setItem(e,t){var r=this;return m(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(b(mr));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",u=>{r.closeConnection(),i(u)})})})()}removeItem(e){var t=this;return m(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(b(mr));const a=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);a.addEventListener("success",()=>{t.closeConnection(),r()}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}getKeys(){var e=this;return m(function*(){return yield e.validateDbIsOpen(),new Promise((t,r)=>{if(!e.db)return r(b(mr));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var t=this;return m(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(b(mr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);a.addEventListener("success",c=>{const u=c;t.closeConnection(),r(1===u.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return m(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((t,r)=>{const o=window.indexedDB.deleteDatabase(Mg),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),t(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),t(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class Md{constructor(){this.cache=new Map}initialize(){return m(function*(){})()}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){var r=this;return m(function*(){r.setItem(e,t)})()}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class HG{constructor(e){this.inMemoryCache=new Md,this.indexedDBCache=new UG,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof ha&&e.errorCode===la))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var t=this;return m(function*(){const r=t.inMemoryCache.getItem(e);if(!r)try{return t.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.getItem(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}setItem(e,t){var r=this;return m(function*(){r.inMemoryCache.setItem(e,t);try{yield r.indexedDBCache.setItem(e,t)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var t=this;return m(function*(){t.inMemoryCache.removeItem(e);try{yield t.indexedDBCache.removeItem(e)}catch(r){t.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return m(function*(){const t=e.inMemoryCache.getKeys();if(0===t.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return t})()}containsKey(e){var t=this;return m(function*(){const r=t.inMemoryCache.containsKey(e);if(!r)try{return t.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.containsKey(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return m(function*(){try{e.logger.verbose("Deleting persistent keystore");const t=yield e.indexedDBCache.deleteDatabase();return t&&e.logger.verbose("Persistent keystore deleted"),t}catch(t){return e.handleDatabaseAccessError(t),!1}})()}}let kd=(()=>{class n{constructor(t,r,o){this.logger=t,function E$(n){if(!window)throw b(ai);if(!window.crypto)throw b(sa);if(!n&&!window.crypto.subtle)throw b(sa,"crypto_subtle_undefined")}(o??!1),this.cache=new HG(this.logger),this.performanceClient=r}createNewGuid(){return an()}base64Encode(t){return fa(t)}base64Decode(t){return gt(t)}base64UrlEncode(t){return td(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){var r=this;return m(function*(){const o=r.performanceClient?.startMeasurement(p.CryptoOptsGetPublicKeyThumbprint,t.correlationId),i=yield function _$(n,e){return Sm.apply(this,arguments)}(n.EXTRACTABLE,n.POP_KEY_USAGES),s=yield Am(i.publicKey),c=Qb({e:s.e,kty:s.kty,n:s.n}),u=yield r.hashString(c),l=yield Am(i.privateKey),d=yield function T$(n,e,t){return bm.apply(this,arguments)}(l,!1,["sign"]);return yield r.cache.setItem(u,{privateKey:d,publicKey:i.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),o&&o.end({success:!0}),u})()}removeTokenBindingKey(t){var r=this;return m(function*(){if(yield r.cache.removeItem(t),yield r.cache.containsKey(t))throw T(vl)})()}clearKeystore(){var t=this;return m(function*(){t.cache.clearInMemory();try{return yield t.cache.clearPersistent(),!0}catch(r){return r instanceof Error?t.logger.error(`Clearing keystore failed with error: ${r.message}`):t.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(t,r,o,i){var s=this;return m(function*(){const a=s.performanceClient?.startMeasurement(p.CryptoOptsSignJwt,i),c=yield s.cache.getItem(r);if(!c)throw b(ua);const u=yield Am(c.publicKey),l=Qb(u),d=td(JSON.stringify({kid:r})),f=td(by.getShrHeaderString({...o?.header,alg:u.alg,kid:d}));t.cnf={jwk:JSON.parse(l)};const y=`${f}.${td(JSON.stringify(t))}`,_=(new TextEncoder).encode(y),v=yield function S$(n,e){return Rm.apply(this,arguments)}(c.privateKey,_),M=`${y}.${yr(new Uint8Array(v))}`;return a&&a.end({success:!0}),M})()}hashString(t){return m(function*(){return pD(t)})()}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function Qb(n){return JSON.stringify(n,Object.keys(n).sort())}const Ft=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},I=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let VG=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){var o=this;return m(function*(){o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryDetectRegion,o.correlationId);let i=t;if(i)r.region_source="3";else{const s=n.IMDS_OPTIONS;try{const a=yield I(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(E.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield I(o.getCurrentVersion.bind(o),p.RegionDiscoveryGetCurrentVersion,o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const u=yield I(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(c,s);200===u.status&&(i=u.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(t,r){var o=this;return m(function*(){return o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetRegionFromIMDS,o.correlationId),o.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,E.IMDS_TIMEOUT)})()}getCurrentVersion(t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetCurrentVersion,r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?format=json`,t);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();function St(){return Math.round((new Date).getTime()/1e3)}function Yb(n){return n.getTime()/1e3}function Ti(n){return n?new Date(1e3*Number(n)):new Date}function Nd(n,e){const t=Number(n)||0;return St()+e>t}function Jb(n,e){const t=Number(n)+24*e*60*60*1e3;return Date.now()>t}function Pd(n,e,t,r,o){return{credentialType:ze.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function Od(n,e,t,r,o,i,s,a,c,u,l,d,h,f,g){const y={homeAccountId:n,credentialType:ze.ACCESS_TOKEN,secret:t,cachedAt:St().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:l||ae.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),u&&(y.refreshOn=u.toString()),f&&(y.requestedClaims=f,y.requestedClaimsHash=g),y.tokenType?.toLowerCase()!==ae.BEARER.toLowerCase())switch(y.credentialType=ze.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case ae.POP:const C=bn(t,c);if(!C?.cnf?.kid)throw T(ml);y.keyId=C.cnf.kid;break;case ae.SSH:y.keyId=h}return y}function Zb(n,e,t,r,o,i,s){const a={credentialType:ze.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function xd(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function Xb(n){return!!n&&xd(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===ze.ACCESS_TOKEN||n.credentialType===ze.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function eR(n){return!!n&&xd(n)&&n.credentialType===ze.REFRESH_TOKEN}function tR(){return St()+86400}function Ld(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Ry(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function nR(n){return n.expiresAt<=St()}class nt{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new VG(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(E.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case E.ADFS:return 1;case E.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ee(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw T(sn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw T(sn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw T(sn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw T(Cl);return this.replacePath(this.metadata.end_session_endpoint)}throw T(sn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw T(sn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw T(sn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!nt.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode!==Tt.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new ee(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let u=i[c];if(0===c&&this.canReplaceTenant(o)){const l=new ee(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==l&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${l}`),u=l)}a!==u&&(t=t.replace(`/${u}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===Tt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return m(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityResolveEndpointsAsync,e.correlationId);const t=e.getCurrentMetadataEntity(),r=yield I(e.updateCloudDiscoveryMetadata.bind(e),p.AuthorityUpdateCloudDiscoveryMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,t.preferred_network);const o=yield I(e.updateEndpointMetadata.bind(e),p.AuthorityUpdateEndpointMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.updateCachedMetadata(t,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:tR(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){"cache"!==t&&"cache"!==r?.source&&(e.expiresAt=tR(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateEndpointMetadata,t.correlationId);const r=t.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&t.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield I(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(r.metadata);Ld(e,i,!1),e.canonical_authority=t.canonicalAuthority}return r.source}let o=yield I(t.getEndpointMetadataFromNetwork.bind(t),p.AuthorityGetEndpointMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return t.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield I(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(o)),Ld(e,o,!0),"network";throw T(sl,t.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ld(e,t,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Ld(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=nR(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ee(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw fe(Qu)}return null}getEndpointMetadataFromNetwork(){var e=this;return m(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetEndpointMetadataFromNetwork,e.correlationId);const t={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,t);return function BG(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in kb?kb[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateMetadataWithRegionalInformation,t.correlationId);const r=t.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==E.AZURE_REGION_AUTO_DISCOVER_FLAG)return t.regionDiscoveryMetadata.region_outcome="2",t.regionDiscoveryMetadata.region_used=r,nt.replaceWithRegionalInformation(e,r);const o=yield I(t.regionDiscovery.detectRegion.bind(t.regionDiscovery),p.RegionDiscoveryDetectRegion,t.logger,t.performanceClient,t.correlationId)(t.authorityOptions.azureRegionConfiguration?.environmentRegion,t.regionDiscoveryMetadata);if(o)return t.regionDiscoveryMetadata.region_outcome="4",t.regionDiscoveryMetadata.region_used=o,nt.replaceWithRegionalInformation(e,o);t.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateCloudDiscoveryMetadata,t.correlationId);const r=t.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield I(t.getCloudDiscoveryMetadataFromNetwork.bind(t),p.AuthorityGetCloudDiscoveryMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return Ry(e,o,!0),"network";throw fe(Yu)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||E.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Ry(e,t,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function yG(n){return Sd(Cy.metadata,n)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Ry(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=nR(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),nt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=Sd(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),fe(qs)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),nt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return m(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetCloudDiscoveryMetadataFromNetwork,e.correlationId);const t=`${E.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(t,r);let s,a;if(function jG(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function $G(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===E.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Sd(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof de?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=nt.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ee.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;return t&&"none"!==t.azureCloudInstance&&(r=`${t.azureCloudInstance}/${t.tenant?t.tenant:E.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return E.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw T(sn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Nb.has(e)}static isPublicCloudAuthority(e){return E.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new ee(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${E.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=ee.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=nt.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=nt.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=nt.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new ee(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(E.CIAM_AUTH_URL)&&(t=`${t}${o.HostNameAndPort.split(".")[0]}${E.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function rR(n){return n.endsWith(E.FORWARD_SLASH)?n:`${n}${E.FORWARD_SLASH}`}nt.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const Si="no_tokens_found",Fd="native_account_unavailable",My="refresh_token_expired",ky="ux_not_allowed",Ai="bad_token",oR=["interaction_required","consent_required","login_required",Ai,ky],nz=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ud={[Si]:"No refresh token found in the cache. Please sign-in.",[Fd]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[My]:"Refresh token has expired.",[Ai]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[ky]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class dn extends de{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,dn.prototype),this.timestamp=o||E.EMPTY_STRING,this.traceId=i||E.EMPTY_STRING,this.correlationId=s||E.EMPTY_STRING,this.claims=a||E.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function iR(n,e,t){const r=!!n&&oR.indexOf(n)>-1,o=!!t&&nz.indexOf(t)>-1,i=!!e&&oR.some(s=>e.indexOf(s)>-1);return r||i||o}function Hd(n){return new dn(n,Ud[n])}function Bd(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}class sR{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw T(Q)}setItem(e,t,r,o=!0,i="Lax"){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){s+=`expires=${function oz(n){return new Date((new Date).getTime()+864e5*n).toUTCString()}(r)};`}(o||"None"===i)&&(s+="Secure;"),document.cookie=s}setUserData(){return m(function*(){return Promise.reject(T(Q))})()}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function wr(n,e){const t=n.getItem(wi(e));return t?JSON.parse(t):[]}function hn(n,e,t){const r=e.getItem(_i(n,t));if(r){const o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function jd(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}const aR="msal.cache.encryption";class sz{constructor(e,t,r){if(!window.localStorage)throw Og(Vs);this.memoryStorage=new Md,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}initialize(e){var t=this;return m(function*(){const r=new sR,o=r.getItem(aR);let i={key:"",id:""};if(o)try{i=JSON.parse(o)}catch{}if(i.key&&i.id){const s=Ft(vr,p.Base64Decode,t.logger,t.performanceClient,e)(i.key);t.encryptionCookie={id:i.id,key:yield I(dD,p.GenerateHKDF,t.logger,t.performanceClient,e)(s)}}else{const s=an(),a=yield I(lD,p.GenerateBaseKey,t.logger,t.performanceClient,e)(),c=Ft(yr,p.UrlEncodeArr,t.logger,t.performanceClient,e)(new Uint8Array(a));t.encryptionCookie={id:s,key:yield I(dD,p.GenerateHKDF,t.logger,t.performanceClient,e)(a)},r.setItem(aR,JSON.stringify({id:s,key:c}),0,!0,"None")}yield I(t.importExistingCache.bind(t),p.ImportExistingCache,t.logger,t.performanceClient,e)(e),t.broadcast.addEventListener("message",t.updateCache.bind(t)),t.initialized=!0})()}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw b(qr);return this.memoryStorage.getItem(e)}decryptData(e,t,r){var o=this;return m(function*(){if(!o.initialized||!o.encryptionCookie)throw b(qr);if(t.id!==o.encryptionCookie.id)return o.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=yield I(fD,p.Decrypt,o.logger,o.performanceClient,r)(o.encryptionCookie.key,t.nonce,o.getContext(e),t.data);if(!i)return null;try{return{...JSON.parse(i),lastUpdatedAt:t.lastUpdatedAt}}catch{return o.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}})()}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r,o,i){var s=this;return m(function*(){if(!s.initialized||!s.encryptionCookie)throw b(qr);if(i)s.setItem(e,t);else{const{data:a,nonce:c}=yield I(b$,p.Encrypt,s.logger,s.performanceClient,r)(s.encryptionCookie.key,t,s.getContext(e));s.setItem(e,JSON.stringify({id:s.encryptionCookie.id,nonce:c,data:a,lastUpdatedAt:o}))}s.memoryStorage.setItem(e,t),s.broadcast.postMessage({key:e,value:t,context:s.getContext(e)})})()}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),wr(this).forEach(r=>this.removeItem(r));const t=hn(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(We)||-1!==r.indexOf(this.clientId))&&this.removeItem(r)})}importExistingCache(e){var t=this;return m(function*(){if(!t.encryptionCookie)return;let r=wr(t);r=yield t.importArray(r,e),r.length?t.setItem(wi(),JSON.stringify(r)):t.removeItem(wi());const o=hn(t.clientId,t);o.idToken=yield t.importArray(o.idToken,e),o.accessToken=yield t.importArray(o.accessToken,e),o.refreshToken=yield t.importArray(o.refreshToken,e),o.idToken.length||o.accessToken.length||o.refreshToken.length?t.setItem(_i(t.clientId),JSON.stringify(o)):t.removeItem(_i(t.clientId))})()}getItemFromEncryptedCache(e,t){var r=this;return m(function*(){if(!r.encryptionCookie)return null;const o=r.getItem(e);if(!o)return null;let i;try{i=JSON.parse(o)}catch{return null}return jd(i)?i.id!==r.encryptionCookie.id?(r.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(r.performanceClient.incrementFields({encryptedCacheCount:1},t),I(fD,p.Decrypt,r.logger,r.performanceClient,t)(r.encryptionCookie.key,i.nonce,r.getContext(e),i.data)):(r.performanceClient.incrementFields({unencryptedCacheCount:1},t),o)})()}importArray(e,t){var r=this;return m(function*(){const o=[],i=[];return e.forEach(s=>{const a=r.getItemFromEncryptedCache(s,t).then(c=>{c?(r.memoryStorage.setItem(s,c),o.push(s)):r.removeItem(s)});i.push(a)}),yield Promise.all(i),o})()}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(p.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:o,context:i}=e.data;return r?i&&i!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),void t.end({success:!1,errorCode:"contextMismatch"})):(o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class az{constructor(){if(!window.sessionStorage)throw Og(Vs)}initialize(){return m(function*(){})()}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){var r=this;return m(function*(){r.setItem(e,t)})()}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}function _r(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Py extends _y{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new Md,this.browserStorage=cR(e,t.cacheLocation,o,i),this.temporaryCacheStorage=cR(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new sR,this.eventHandler=s}initialize(e){var t=this;return m(function*(){t.performanceClient.addFields({cacheLocation:t.cacheConfig.cacheLocation,cacheRetentionDays:t.cacheConfig.cacheRetentionDays},e),yield t.browserStorage.initialize(e),yield t.migrateExistingCache(e),t.trackVersionChanges(e)})()}migrateExistingCache(e){var t=this;return m(function*(){let r=wr(t.browserStorage),o=hn(t.clientId,t.browserStorage);t.performanceClient.addFields({preMigrateAcntCount:r.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},e);for(let s=0;s<Rd;s++){const a=s;yield t.removeStaleAccounts(s,a,e)}for(let s=0;s<tt;s++){const a=s;yield t.migrateIdTokens(s,a,e)}const i=t.getKMSIValues();for(let s=0;s<tt;s++)yield t.migrateAccessTokens(s,i,e),yield t.migrateRefreshTokens(s,i,e);r=wr(t.browserStorage),o=hn(t.clientId,t.browserStorage),t.performanceClient.addFields({postMigrateAcntCount:r.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},e)})()}updateOldEntry(e,t){var r=this;return m(function*(){const o=r.browserStorage.getItem(e),i=r.validateAndParseJson(o||"");if(!i)return r.browserStorage.removeItem(e),null;if(i.lastUpdatedAt){if(Jb(i.lastUpdatedAt,r.cacheConfig.cacheRetentionDays))return r.browserStorage.removeItem(e),r.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null}else i.lastUpdatedAt=Date.now().toString(),r.setItem(e,JSON.stringify(i),t);const s=jd(i)?yield r.browserStorage.decryptData(e,i,t):i;return s&&xd(s)?(Xb(s)||eR(s))&&s.expiresOn&&Nd(s.expiresOn,300)?(r.browserStorage.removeItem(e),r.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):s:(r.performanceClient.incrementFields({invalidCacheCount:1},t),null)})()}removeStaleAccounts(e,t,r){var o=this;return m(function*(){const i=wr(o.browserStorage,e);if(0!==i.length){for(const s of[...i]){o.performanceClient.incrementFields({oldAcntCount:1},r);const a=o.browserStorage.getItem(s),c=o.validateAndParseJson(a||"");c?c.lastUpdatedAt?Jb(c.lastUpdatedAt,o.cacheConfig.cacheRetentionDays)&&(yield o.removeAccountOldSchema(s,c,t,r),_r(i,s)):(c.lastUpdatedAt=Date.now().toString(),o.setItem(s,JSON.stringify(c),r)):_r(i,s)}o.setAccountKeys(i,r,e)}})()}removeAccountOldSchema(e,t,r,o){var i=this;return m(function*(){const a=(jd(t)?yield i.browserStorage.decryptData(e,t,o):t)?.homeAccountId;if(a){const c=i.getTokenKeys(r);[...c.idToken].filter(u=>u.includes(a)).forEach(u=>{i.browserStorage.removeItem(u),_r(c.idToken,u)}),[...c.accessToken].filter(u=>u.includes(a)).forEach(u=>{i.browserStorage.removeItem(u),_r(c.accessToken,u)}),[...c.refreshToken].filter(u=>u.includes(a)).forEach(u=>{i.browserStorage.removeItem(u),_r(c.refreshToken,u)}),i.setTokenKeys(c,o,r)}i.performanceClient.incrementFields({expiredAcntRemovedCount:1},o),i.browserStorage.removeItem(e)})()}getKMSIValues(){const e={},t=this.getTokenKeys().idToken;for(const r of t){const o=this.browserStorage.getUserData(r);if(o){const i=JSON.parse(o),s=bn(i.secret,gt);s&&(e[i.homeAccountId]=Rn(s))}}return e}migrateIdTokens(e,t,r){var o=this;return m(function*(){const i=hn(o.clientId,o.browserStorage,e);if(0===i.idToken.length)return;const s=hn(o.clientId,o.browserStorage,tt),a=wr(o.browserStorage),c=wr(o.browserStorage,t);for(const u of[...i.idToken]){o.performanceClient.incrementFields({oldITCount:1},r);const l=yield o.updateOldEntry(u,r);if(!l){_r(i.idToken,u);continue}const d=a.find(D=>D.includes(l.homeAccountId)),h=c.find(D=>D.includes(l.homeAccountId));let f=null;if(d)f=o.getAccount(d,r);else if(h){const D=o.browserStorage.getItem(h),M=o.validateAndParseJson(D||"");f=M&&jd(M)?yield o.browserStorage.decryptData(h,M,r):M}if(!f){o.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const g=bn(l.secret,gt),y=o.generateCredentialKey(l),C=o.getIdTokenCredential(y,r),_=Object.keys(g).includes("signin_state"),v=C&&Object.keys(bn(C.secret,gt)||{}).includes("signin_state");if(!C||l.lastUpdatedAt>C.lastUpdatedAt&&(_||!v)){const D=f.tenantProfiles||[],M=vy(g)||f.realm;if(M&&!D.find(Ut=>Ut.tenantId===M)){const Ut=Td(f.homeAccountId,f.localAccountId,M,g);D.push(Ut)}f.tenantProfiles=D;const z=o.generateAccountKey(Re.getAccountInfo(f)),Qe=Rn(g);yield o.setUserData(z,JSON.stringify(f),r,f.lastUpdatedAt,Qe),a.includes(z)||a.push(z),yield o.setUserData(y,JSON.stringify(l),r,l.lastUpdatedAt,Qe),o.performanceClient.incrementFields({migratedITCount:1},r),s.idToken.push(y)}}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r),o.setAccountKeys(a,r)})()}migrateAccessTokens(e,t,r){var o=this;return m(function*(){const i=hn(o.clientId,o.browserStorage,e);if(0===i.accessToken.length)return;const s=hn(o.clientId,o.browserStorage,tt);for(const a of[...i.accessToken]){o.performanceClient.incrementFields({oldATCount:1},r);const c=yield o.updateOldEntry(a,r);if(!c){_r(i.accessToken,a);continue}if(!Object.keys(t).includes(c.homeAccountId)){o.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const u=o.generateCredentialKey(c),l=t[c.homeAccountId];if(s.accessToken.includes(u)){const d=o.getAccessTokenCredential(u,r);(!d||c.lastUpdatedAt>d.lastUpdatedAt)&&(yield o.setUserData(u,JSON.stringify(c),r,c.lastUpdatedAt,l),o.performanceClient.incrementFields({migratedATCount:1},r))}else yield o.setUserData(u,JSON.stringify(c),r,c.lastUpdatedAt,l),o.performanceClient.incrementFields({migratedATCount:1},r),s.accessToken.push(u)}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r)})()}migrateRefreshTokens(e,t,r){var o=this;return m(function*(){const i=hn(o.clientId,o.browserStorage,e);if(0===i.refreshToken.length)return;const s=hn(o.clientId,o.browserStorage,tt);for(const a of[...i.refreshToken]){o.performanceClient.incrementFields({oldRTCount:1},r);const c=yield o.updateOldEntry(a,r);if(!c){_r(i.refreshToken,a);continue}if(!Object.keys(t).includes(c.homeAccountId)){o.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const u=o.generateCredentialKey(c),l=t[c.homeAccountId];if(s.refreshToken.includes(u)){const d=o.getRefreshTokenCredential(u,r);(!d||c.lastUpdatedAt>d.lastUpdatedAt)&&(yield o.setUserData(u,JSON.stringify(c),r,c.lastUpdatedAt,l),o.performanceClient.incrementFields({migratedRTCount:1},r))}else yield o.setUserData(u,JSON.stringify(c),r,c.lastUpdatedAt,l),o.performanceClient.incrementFields({migratedRTCount:1},r),s.refreshToken.push(u)}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r)})()}trackVersionChanges(e){const t=this.browserStorage.getItem($b);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Jr&&this.setItem($b,Jr,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch{return null}}setItem(e,t,r){const o=new Array(tt+1).fill(0),i=[];for(let a=0;a<=20;a++)try{if(this.browserStorage.setItem(e,t),a>0)for(let c=0;c<=tt;c++){const u=o.slice(0,c).reduce((d,h)=>d+h,0);if(u>=a)break;a>u&&o[c]>0&&this.removeAccessTokenKeys(i.slice(u,a>u+o[c]?u+o[c]:a),r,c)}break}catch(c){const u=wy(c);if(!(u.errorCode===Ad&&a<20))throw u;if(!i.length)for(let l=0;l<=tt;l++)if(e===_i(this.clientId,l)){const d=JSON.parse(t).accessToken;i.push(...d),o[l]=d.length}else{const d=this.getTokenKeys(l).accessToken;i.push(...d),o[l]=d.length}if(i.length<=a)throw u;this.removeAccessToken(i[a],r,!1)}}setUserData(e,t,r,o,i){var s=this;return m(function*(){const a=new Array(tt+1).fill(0),c=[];for(let l=0;l<=20;l++)try{if(yield I(s.browserStorage.setUserData.bind(s.browserStorage),p.SetUserData,s.logger,s.performanceClient)(e,t,r,o,i),l>0)for(let d=0;d<=tt;d++){const h=a.slice(0,d).reduce((g,y)=>g+y,0);if(h>=l)break;l>h&&a[d]>0&&s.removeAccessTokenKeys(c.slice(h,l>h+a[d]?h+a[d]:l),r,d)}break}catch(d){const h=wy(d);if(!(h.errorCode===Ad&&l<20))throw h;if(!c.length)for(let f=0;f<=tt;f++){const g=s.getTokenKeys(f).accessToken;c.push(...g),a[f]=g.length}if(c.length<=l)throw h;s.removeAccessToken(c[l],r,!1)}})()}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const o=this.validateAndParseJson(r);return o&&Re.isAccountEntity(o)?_y.toObject(new Re,o):null}setAccount(e,t,r){var o=this;return m(function*(){o.logger.trace("BrowserCacheManager.setAccount called");const i=o.generateAccountKey(Re.getAccountInfo(e)),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.addAccountKeyToMap(i,t);o.performanceClient.addFields({kmsi:r},t),o.cacheConfig.cacheLocation===He.LocalStorage&&a&&o.eventHandler.emitEvent("msal:accountAdded",void 0,Re.getAccountInfo(e))})()}getAccountKeys(){return wr(this.browserStorage)}setAccountKeys(e,t,r=Rd){0===e.length?this.removeItem(wi(r)):this.setItem(wi(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return-1===r.indexOf(e)?(r.push(e),this.setItem(wi(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);o>-1?(r.splice(o,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===He.LocalStorage&&this.eventHandler.emitEvent("msal:accountRemoved",void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=tt){this.logger.trace("removeAccessTokenKey called");const o=this.getTokenKeys(r);let i=0;if(e.forEach(s=>{const a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0)return this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),void this.setTokenKeys(o,t,r)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=tt){return hn(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=tt){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(_i(this.clientId,r),JSON.stringify(e),t):this.removeItem(_i(this.clientId,r))}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const o=this.validateAndParseJson(r);return o&&function zG(n){return!!n&&xd(n)&&n.hasOwnProperty("realm")&&n.credentialType===ze.ID_TOKEN}(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,t,r){var o=this;return m(function*(){o.logger.trace("BrowserCacheManager.setIdTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys();-1===a.idToken.indexOf(i)&&(o.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),a.idToken.push(i),o.setTokenKeys(a,t))})()}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const o=this.validateAndParseJson(r);return o&&Xb(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,t,r){var o=this;return m(function*(){o.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys(),c=a.accessToken.indexOf(i);-1!==c&&a.accessToken.splice(c,1),o.logger.trace(`access token ${-1===c?"added to":"updated in"} map`),a.accessToken.push(i),o.setTokenKeys(a,t)})()}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const o=this.validateAndParseJson(r);return o&&eR(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,t,r){var o=this;return m(function*(){o.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys();-1===a.refreshToken.indexOf(i)&&(o.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),a.refreshToken.push(i),o.setTokenKeys(a,t))})()}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function QG(n,e){return!!e&&0===n.indexOf(bg)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function WG({environment:n,clientId:e}){return[bg,n,e].join(Bs.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function qG(n,e){const t=0===n.indexOf(qe.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function YG(n,e){return!!e&&0===n.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",t)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||E.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||E.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey("active-account-filters"),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey("active-account-filters");if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:St().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent("msal:activeAccountChanged")}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function KG(n,e){let t=!1;n&&(t=0===n.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===He.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(-1!==t.indexOf(We)||-1!==t.indexOf(this.clientId))&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(-1!==t.indexOf(We)||-1!==t.indexOf(this.clientId))&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(p.ClearTokensAndKeysWithClaims,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(o=>{const i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Lt.startsWith(e,We)?e:`${We}.${this.clientId}.${e}`}generateCredentialKey(e){const t=e.credentialType===ze.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==ae.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${We}.${tt}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("|").toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return[`${We}.${Rd}`,e.homeAccountId,e.environment,t||e.tenantId||""].join("|").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("code.verifier")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=fa(JSON.stringify(e));if(this.setTemporaryCache("request.params",r,!0),t){const o=fa(t);this.setTemporaryCache("code.verifier",o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache("request.params",!0);if(!e)throw b(Hl);const t=this.getTemporaryCache("code.verifier",!0);let r,o="";try{r=JSON.parse(gt(e)),t&&(o=gt(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),b(Bl)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${We}.interaction.status`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),gD(window),null}}setInteractionInProgress(e,t="signin"){const r=`${We}.interaction.status`;if(e){if(this.getInteractionInProgress())throw b(kl);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){var r=this;return m(function*(){const o=Pd(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;t.claims&&(i=yield r.cryptoImpl.hashString(t.claims));const s=Od(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Yb(e.expiresOn):0,e.extExpiresOn?Yb(e.extExpiresOn):0,gt,void 0,e.tokenType,void 0,t.sshKid,t.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId,Rn(bn(e.idToken,gt)))})()}saveCacheRecord(e,t,r,o){var i=()=>super.saveCacheRecord,s=this;return m(function*(){try{yield i().call(s,e,t,r,o)}catch(a){if(a instanceof Ei&&s.performanceClient&&t)try{const c=s.getTokenKeys();s.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},t)}catch{}throw a}})()}}function cR(n,e,t,r){try{switch(e){case He.LocalStorage:return new sz(n,t,r);case He.SessionStorage:return new az}}catch(o){t.error(o)}return new Md}class yz{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Er({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||function x$(){return an()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case"msal:accountAdded":case"msal:accountRemoved":case"msal:activeAccountChanged":this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(0===r.length||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){this.invokeCallbacks(e.data)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}function uR(n,e,t,r,o,i,s){return Oy.apply(this,arguments)}function Oy(){return(Oy=m(function*(n,e,t,r,o,i,s){s?.addQueueMeasurement(p.AuthorityFactoryCreateDiscoveredInstance,i);const a=nt.transformCIAMAuthority(rR(n)),c=new nt(a,e,t,r,o,i,s);try{return yield I(c.resolveEndpointsAsync.bind(c),p.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw T(sn)}})).apply(this,arguments)}class Zr extends de{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,Zr.prototype)}}class Mn{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,t,r){const o=Mn.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new Zr(i.errorCodes?.join(" ")||E.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(Mn.checkResponseStatus(r)||Mn.checkResponseForRetryAfter(r)){const i={throttleTime:Mn.calculateThrottleTime(parseInt(r.headers[ft.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Mn.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(ft.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,o){const i=Bd(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}}class xy{constructor(e,t){this.config=function AG({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:h}){const f={...CG,...t};return{authOptions:DG(n),systemOptions:{...Lb,...e},loggerOptions:f,cacheOptions:{...IG,...r},storageInterface:o||new vG(n.clientId,wd,new Er(f),new xb),networkInterface:i||EG,cryptoInterface:s||wd,clientCredentials:a||_G,libraryInfo:{...wG,...c},telemetry:{...SG,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new Er(this.config.loggerOptions,Db,my),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[ft.CONTENT_TYPE]=E.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=Ii(e.credential);t[ft.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":t[ft.CCS_HEADER]=`UPN: ${e.credential}`}return t}executePostToTokenEndpoint(e,t,r,o,i,s){var a=this;return m(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:t,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,t,r,o){var i=this;return m(function*(){let s;Mn.preProcess(i.cacheManager,e,o);try{s=yield I(i.networkClient.sendPostRequestAsync.bind(i.networkClient),p.NetworkClientSendPostRequestAsync,i.logger,i.performanceClient,o)(t,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a[ft.X_MS_HTTP_VERSION]||"",requestId:a[ft.X_MS_REQUEST_ID]||""},o)}catch(a){if(a instanceof bd){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c[ft.X_MS_HTTP_VERSION]||"",requestId:c[ft.X_MS_REQUEST_ID]||"",contentTypeHeader:c[ft.CONTENT_TYPE]||void 0,contentLengthHeader:c[ft.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof de?a:T(il)}return Mn.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.UpdateTokenEndpointAuthority,t);const o=`https://${e}/${r.authority.tenant}/`,i=yield uR(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,t,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Al(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&gr(t,e.tokenQueryParameters),am(t,e.correlationId),_l(t,e.correlationId,this.performanceClient),ra(t)}}class Di{static setRequestState(e,t,r){const o=Di.generateLibraryState(e,r);return t?`${o}${E.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw T(ta);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw T(ta);if(!t)throw T(pr);try{const r=t.split(E.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(E.RESOURCE_DELIM):E.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||E.EMPTY_STRING,libraryState:a}}catch{throw T(pr)}}}class bi{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.PopTokenGenerateCnf,e.correlationId);const o=yield I(r.generateKid.bind(r),p.PopTokenGenerateCnf,t,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var t=this;return m(function*(){return t.performanceClient?.addQueueMeasurement(p.PopTokenGenerateKid,e.correlationId),{kid:yield t.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,t,r){var o=this;return m(function*(){return o.signPayload(e,t,r)})()}signPayload(e,t,r,o){var i=this;return m(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:u,shrOptions:l}=r,h=(a?new ee(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:St(),m:s?.toUpperCase(),u:h?.HostNameAndPort,nonce:u||i.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:c||void 0,...o},t,l,r.correlationId)})()}}class Cz{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Xr{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||E.NOT_AVAILABLE} - Timestamp: ${e.timestamp||E.NOT_AVAILABLE} - Description: ${e.error_description||E.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||E.NOT_AVAILABLE} - Trace ID: ${e.trace_id||E.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new Zr(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw iR(e.error,e.error_description,e.suberror)?new dn(e.error,e.error_description,e.suberror,e.timestamp||E.EMPTY_STRING,e.trace_id||E.EMPTY_STRING,e.correlation_id||E.EMPTY_STRING,e.claims||E.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,u){var l=this;return m(function*(){let d,h;if(l.performanceClient?.addQueueMeasurement(p.HandleServerTokenResponse,e.correlation_id),e.id_token){if(d=bn(e.id_token||E.EMPTY_STRING,l.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw T(ul);if(o.maxAge||0===o.maxAge){const y=d.auth_time;if(!y)throw T(Ys);Rb(y,o.maxAge)}}l.homeAccountIdentifier=Re.generateHomeAccountId(e.client_info||E.EMPTY_STRING,t.authorityType,l.logger,l.cryptoObj,d),i&&i.state&&(h=Di.parseRequestState(l.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=l.generateCacheRecord(e,t,r,o,d,s,i);let g;try{if(l.persistencePlugin&&l.serializableCache&&(l.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Cz(l.serializableCache,!0),yield l.persistencePlugin.beforeCacheAccess(g)),a&&!c&&f.account){const y=l.cacheStorage.generateAccountKey(Re.getAccountInfo(f.account));if(!l.cacheStorage.getAccount(y,o.correlationId))return l.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield Xr.generateAuthenticationResult(l.cryptoObj,t,f,!1,o,d,h,void 0,u)}yield l.cacheStorage.saveCacheRecord(f,o.correlationId,Rn(d||{}),o.storeInCache)}finally{l.persistencePlugin&&l.serializableCache&&g&&(l.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield l.persistencePlugin.afterCacheAccess(g))}return Xr.generateAuthenticationResult(l.cryptoObj,t,f,!1,o,d,h,e,u)})()}generateCacheRecord(e,t,r,o,i,s,a){const c=t.getPreferredCache();if(!c)throw T(Xs);const u=vy(i);let l,d;e.id_token&&i&&(l=Pd(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),d=Ly(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,u,a,void 0,this.logger));let h=null;if(e.access_token){const y=e.scope?Ue.fromString(e.scope):new Ue(o.scopes||[]),C=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,_=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,v=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,D=r+C,M=D+_,z=v&&v>0?r+v:void 0;h=Od(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||t.tenant||"",y.printScopes(),D,M,this.cryptoObj.base64Decode,z,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let y;e.refresh_token_expires_in&&(y=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),f=Zb(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,y)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:l,accessToken:h,refreshToken:f,appMetadata:g}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,u){return m(function*(){let f,g,l=E.EMPTY_STRING,d=[],h=null,y=E.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==ae.POP||i.popKid)l=r.accessToken.secret;else{const D=new bi(e),{secret:M,keyId:z}=r.accessToken;if(!z)throw T(na);l=yield D.signPopToken(M,z,i)}d=Ue.fromString(r.accessToken.target).asArray(),h=Ti(r.accessToken.expiresOn),f=Ti(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(g=Ti(r.accessToken.refreshOn))}r.appMetadata&&(y="1"===r.appMetadata.familyId?"1":"");const C=s?.oid||s?.sub||"",_=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const v=r.account?yy(Re.getAccountInfo(r.account),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:C,tenantId:_,scopes:d,account:v,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:l,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:g,correlationId:i.correlationId,requestId:u||E.EMPTY_STRING,familyId:y,tokenType:r.accessToken?.tokenType||E.EMPTY_STRING,state:a?a.userRequestState:E.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||E.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||E.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function Ly(n,e,t,r,o,i,s,a,c,u,l,d){d?.verbose("setCachedAccount called");const f=n.getAccountKeys().find(v=>v.startsWith(t));let g=null;f&&(g=n.getAccount(f,o));const y=g||Re.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:l},e,r),C=y.tenantProfiles||[],_=c||y.realm;if(_&&!C.find(v=>v.tenantId===_)){const v=Td(t,y.localAccountId,_,i);C.push(v)}return y.tenantProfiles=C,y}function lR(n,e,t){return Fy.apply(this,arguments)}function Fy(){return(Fy=m(function*(n,e,t){return"string"==typeof n?n:n({clientId:e,tokenEndpoint:t})})).apply(this,arguments)}class dR extends xy{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){var r=this;return m(function*(){if(r.performanceClient?.addQueueMeasurement(p.AuthClientAcquireToken,e.correlationId),!e.code)throw T(hl);const o=St(),i=yield I(r.executeTokenRequest.bind(r),p.AuthClientExecuteTokenRequest,r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.[ft.X_MS_REQUEST_ID],a=new Xr(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),I(a.handleServerTokenResponse.bind(a),p.HandleServerTokenResponse,r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,t,void 0,void 0,void 0,s)})()}getLogoutUri(e){if(!e)throw fe(Wu);const t=this.createLogoutUrlQueryString(e);return ee.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.AuthClientExecuteTokenRequest,t.correlationId);const o=r.createTokenQueryParameters(t),i=ee.appendQueryString(e.tokenEndpoint,o),s=yield I(r.createTokenRequestBody.bind(r),p.AuthClientCreateTokenRequestBody,r.logger,r.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const l=_d(t.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${l.uid}${Bs.CLIENT_INFO_SEPARATOR}${l.utid}`,type:"home_account_id"}}catch(l){r.logger.verbose("Could not parse client info for CCS Header: "+l)}const c=r.createTokenRequestHeaders(a||t.ccsCredential),u=Bd(r.config.authOptions.clientId,t);return I(r.executePostToTokenEndpoint.bind(r),p.AuthorizationCodeClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,t.correlationId)(i,s,c,u,t.correlationId,p.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.AuthClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(om(r,e.embeddedClientId||e.tokenBodyParameters?.[Gr]||t.config.authOptions.clientId),t.includeRedirectUri)im(r,e.redirectUri);else if(!e.redirectUri)throw fe(Vu);if(rm(r,e.scopes,!0,t.oidcDefaultScopes),function u$(n,e){n.set("code",e)}(r,e.code),cm(r,t.config.libraryInfo),um(r,t.config.telemetry.application),XA(r),t.serverTelemetryManager&&!Fb(t.config)&&ZA(r,t.serverTelemetryManager),e.codeVerifier&&function d$(n,e){n.set("code_verifier",e)}(r,e.codeVerifier),t.config.clientCredentials.clientSecret&&zA(r,t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const i=t.config.clientCredentials.clientAssertion;qA(r,yield lR(i.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),KA(r,i.assertionType)}if(WA(r,"authorization_code"),dm(r),e.authenticationScheme===ae.POP){const i=new bi(t.cryptoUtils,t.performanceClient);let s;s=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield I(i.generateCnf.bind(i),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,hm(r,s)}else if(e.authenticationScheme===ae.SSH){if(!e.sshJwk)throw fe(oi);JA(r,e.sshJwk)}let o;if((!Lt.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&sm(r,e.claims,t.config.authOptions.clientCapabilities),e.clientInfo)try{const i=_d(e.clientInfo,t.cryptoUtils.base64Decode);o={credential:`${i.uid}${Bs.CLIENT_INFO_SEPARATOR}${i.utid}`,type:"home_account_id"}}catch(i){t.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(t.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{oa(r,Ii(o.credential))}catch(i){t.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":Sl(r,o.credential)}return e.embeddedClientId&&Al(r,t.config.authOptions.clientId,t.config.authOptions.redirectUri),e.tokenBodyParameters&&gr(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[$A])&&gr(r,{[$A]:"1"}),_l(r,e.correlationId,t.performanceClient),ra(r)})()}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function o$(n,e){n.set("post_logout_redirect_uri",e)}(t,e.postLogoutRedirectUri),e.correlationId&&am(t,e.correlationId),e.idTokenHint&&function i$(n,e){n.set("id_token_hint",e)}(t,e.idTokenHint),e.state&&GA(t,e.state),e.logoutHint&&function h$(n,e){n.set("logout_hint",e)}(t,e.logoutHint),e.extraQueryParameters&&gr(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&QA(t),ra(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class Pa{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||E.EMPTY_STRING,this.wrapperVer=e.wrapperVer||E.EMPTY_STRING,this.telemetryCacheKey=qe.CACHE_KEY+Bs.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${qe.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const o=t.join(qe.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(qe.VALUE_SEPARATOR);return[qe.SCHEMA_VERSION,s,o].join(qe.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Pa.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(qe.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(qe.VALUE_SEPARATOR),i=e.errors.length,a=[i,t<i?qe.OVERFLOW_TRUE:qe.OVERFLOW_FALSE].join(qe.VALUE_SEPARATOR);return[qe.SCHEMA_VERSION,e.cacheHits,r,o,a].join(qe.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=qe.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?t.errors.push(e instanceof de?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):t.errors.push(qe.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Pa.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const a=e.failedRequests[2*t+1]||E.EMPTY_STRING,c=e.errors[t]||E.EMPTY_STRING;if(o+=(e.failedRequests[2*t]||E.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<qe.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||E.EMPTY_STRING),e.push(this.regionSource||E.EMPTY_STRING),e.push(this.regionOutcome||E.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function Iz(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,u)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function Ez(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join("|"))}({skuArr:a,index:u,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class pR{constructor(e,t,r,o,i,s,a,c,u){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=u||an(),this.logger=o.clone(_t.MSAL_SKU,Jr,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e,t){var r=this;return m(function*(){if(t)try{r.browserStorage.removeAccount(t,e),r.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{r.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{r.logger.verbose("No account provided in logout request, clearing all cache items.",r.correlationId),r.browserStorage.clear(e),yield r.browserCrypto.clearKeystore()}catch{r.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),ee.getAbsoluteUrl(e||this.config.auth.redirectUri,Wn())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Pa(r,this.browserStorage)}getDiscoveredAuthority(e){var t=this;return m(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetDiscoveredAuthority,t.correlationId);const i={protocolMode:t.config.auth.protocolMode,OIDCOptions:t.config.auth.OIDCOptions,knownAuthorities:t.config.auth.knownAuthorities,cloudDiscoveryMetadata:t.config.auth.cloudDiscoveryMetadata,authorityMetadata:t.config.auth.authorityMetadata,skipAuthorityMetadataCache:t.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||t.config.auth.authority,c=r&&(o?.length?"true"===o:t.config.auth.instanceAware)?t.config.auth.authority.replace(ee.getDomainFromUrl(s),r.environment):s,u=nt.generateAuthority(c,e.requestAzureCloudOptions||t.config.auth.azureCloudOptions),l=yield I(uR,p.AuthorityFactoryCreateDiscoveredInstance,t.logger,t.performanceClient,t.correlationId)(u,t.config.system.networkClient,t.browserStorage,i,t.logger,t.correlationId,t.performanceClient);if(r&&!l.isAlias(r.environment))throw fe(el);return l})()}}function Uy(n,e,t,r){return Hy.apply(this,arguments)}function Hy(){return(Hy=m(function*(n,e,t,r){t.addQueueMeasurement(p.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===ae.SSH){if(!n.sshJwk)throw fe(oi);if(!n.sshKid)throw fe(Ju)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=ae.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&n.claims&&!Lt.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield pD(n.claims)),s})).apply(this,arguments)}function wz(n,e,t,r,o){return By.apply(this,arguments)}function By(){return(By=m(function*(n,e,t,r,o){r.addQueueMeasurement(p.InitializeSilentRequest,n.correlationId);const i=yield I(Uy,p.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}})).apply(this,arguments)}function gR(n,e){let t;const r=n.httpMethod;if(e===Tt.EAR){if(t=r||"POST","POST"!==t)throw fe(tl)}else t=r||"GET";if(n.authorizePostBodyParameters&&"POST"!==t)throw fe(nl);return t}class Ri extends pR{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||an(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ee.getAbsoluteUrl(e.postLogoutRedirectUri,Wn())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ee.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Wn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ee.getAbsoluteUrl(Wn(),Wn())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var t=this;return m(function*(){t.performanceClient.addQueueMeasurement(p.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const r=yield I(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)(e);return new dR(r,t.performanceClient)})()}getClientConfiguration(e){var t=this;return m(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetClientConfiguration,t.correlationId);const c=e.authority||(yield I(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,t.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a})),u=t.config.system.loggerOptions;return{authOptions:{clientId:t.config.auth.clientId,authority:c,clientCapabilities:t.config.auth.clientCapabilities,redirectUri:t.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:t.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:u.loggerCallback,piiLoggingEnabled:u.piiLoggingEnabled,logLevel:u.logLevel,correlationId:t.correlationId},cacheOptions:{claimsBasedCachingEnabled:t.config.cache.claimsBasedCachingEnabled},cryptoInterface:t.browserCrypto,networkInterface:t.networkClient,storageInterface:t.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:_t.MSAL_SKU,version:Jr,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},telemetry:t.config.telemetry}})()}initializeAuthorizationRequest(e,t){var r=this;return m(function*(){r.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationRequest,r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Di.setRequestState(r.browserCrypto,e&&e.state||E.EMPTY_STRING,{interactionType:t}),c={...yield I(Uy,p.InitializeBaseRequest,r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||an(),responseMode:r.config.auth.OIDCOptions.serverResponseType},u={...c,httpMethod:gR(c,r.config.auth.protocolMode)};if(e.loginHint||e.sid)return u;const l=e.account||r.browserStorage.getActiveAccount(r.correlationId);return l&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,r.correlationId),u.account=l),u})()}}function Oa(n,e,t){const r=Il(n);if(!r)throw FA(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),b(bl)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),b(Dl));return r}function jy(n,e,t,r){const o=ra(e,t,r);return ee.appendQueryString(n.authorizationEndpoint,o)}function mR(n,e){if(!n.state||!e)throw T(Qs,n.state?"Cached State":"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw T(pr,n.state)}try{r=decodeURIComponent(e)}catch{throw T(pr,n.state)}if(t!==r)throw T(cl);if(n.error||n.error_description||n.suberror){const o=function Dz(n){const e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+5):void 0}(n);throw iR(n.error,n.error_description,n.suberror)?new dn(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Zr(n.error||"",n.error_description,n.suberror,o)}}class yR{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){var r=this;return m(function*(){let o;r.performanceClient.addQueueMeasurement(p.HandleCodeResponse,t.correlationId);try{o=function Az(n,e){if(mR(n,e),!n.code)throw T(yl);return n}(e,t.state)}catch(i){throw i instanceof Zr&&i.subError===zr?b(zr):i}return I(r.handleCodeResponseFromServer.bind(r),p.HandleCodeResponseFromServer,r.logger,r.performanceClient,t.correlationId)(o,t)})()}handleCodeResponseFromServer(e,t){var r=this;return m(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement(p.HandleCodeResponseFromServer,i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield I(r.authModule.updateAuthority.bind(r.authModule),p.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield I(r.authModule.acquireToken.bind(r.authModule),p.AuthClientAcquireToken,r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}const vR="user_switch",Hz={[vR]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class kn extends de{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,kn.prototype),this.name="NativeAuthError",this.ext=r}}function Mi(n){if(n.ext&&n.ext.status&&"DISABLED"===n.ext.status||n.ext&&n.ext.error&&-2147186943===n.ext.error)return!0;switch(n.errorCode){case"ContentError":case"PageException":return!0;default:return!1}}function $d(n,e,t){if(t&&t.status)switch(t.status){case"ACCOUNT_UNAVAILABLE":return Hd(Fd);case"USER_INTERACTION_REQUIRED":return new dn(n,e);case"USER_CANCEL":return b(zr);case"NO_NETWORK":return b(ci);case"UX_NOT_ALLOWED":return Hd(ky)}return new kn(n,Hz[n]||e,t)}class Bz extends xy{constructor(e,t){super(e,t)}acquireCachedToken(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.SilentFlowClientAcquireCachedToken,e.correlationId);let r="0";if(e.forceRefresh||!t.config.cacheOptions.claimsBasedCachingEnabled&&!Lt.isEmptyObj(e.claims))throw t.setCacheOutcome("1",e.correlationId),T(Sn);if(!e.account)throw T(Zs);const o=e.account.tenantId||function JG(n){const r=new ee(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=t.cacheManager.getTokenKeys(),s=t.cacheManager.getAccessToken(e.account,e,i,o);if(!s)throw t.setCacheOutcome("2",e.correlationId),T(Sn);if(function GG(n){return Number(n)>St()}(s.cachedAt)||Nd(s.expiresOn,t.config.systemOptions.tokenRenewalOffsetSeconds))throw t.setCacheOutcome("3",e.correlationId),T(Sn);s.refreshOn&&Nd(s.refreshOn,0)&&(r="4");const a=e.authority||t.authority.getPreferredCache(),c={account:t.cacheManager.getAccount(t.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:t.cacheManager.getIdToken(e.account,e.correlationId,i,o,t.performanceClient),refreshToken:null,appMetadata:t.cacheManager.readAppMetadataFromCache(a)};return t.setCacheOutcome(r,e.correlationId),t.config.serverTelemetryManager&&t.config.serverTelemetryManager.incrementCacheHits(),[yield I(t.generateResultFromCacheRecord.bind(t),p.SilentFlowClientGenerateResultFromCacheRecord,t.logger,t.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){var r=this;return m(function*(){let o;if(r.performanceClient?.addQueueMeasurement(p.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(o=bn(e.idToken.secret,r.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const i=o?.auth_time;if(!i)throw T(Ys);Rb(i,t.maxAge)}return Xr.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,t,o)})()}}class CR extends Ri{acquireToken(e){var t=this;return m(function*(){t.performanceClient.addQueueMeasurement(p.SilentCacheClientAcquireToken,e.correlationId);const r=t.initializeServerTelemetryManager(61),o=yield I(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new Bz(o,t.performanceClient);t.logger.verbose("Silent auth client created");try{const a=(yield I(i.acquireCachedToken.bind(i),p.SilentFlowClientAcquireCachedToken,t.logger,t.performanceClient,e.correlationId)(e))[0];return t.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof ha&&s.errorCode===ua&&t.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}}class Vd extends pR{constructor(e,t,r,o,i,s,a,c,u,l,d,h){super(e,t,r,o,i,s,c,u,h),this.apiId=a,this.accountId=l,this.platformAuthProvider=u,this.nativeStorageManager=d,this.silentCacheClient=new CR(e,this.nativeStorageManager,r,o,i,s,c,u,h);const f=this.platformAuthProvider.getExtensionName();this.skus=Pa.makeExtraSkuString({libraryName:_t.MSAL_SKU,libraryVersion:Jr,extensionName:f,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(e,t){var r=this;return m(function*(){r.performanceClient.addQueueMeasurement(p.NativeInteractionClientAcquireToken,r.correlationId),r.logger.trace("NativeInteractionClient - acquireToken called.");const o=r.performanceClient.startMeasurement(p.NativeInteractionClientAcquireToken,r.correlationId),i=St(),s=r.initializeServerTelemetryManager(r.apiId);try{const a=yield r.initializeNativeRequest(e);try{const u=yield r.acquireTokensFromCache(r.accountId,a);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch(u){if(1===t)throw r.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),o.end({success:!1,brokerErrorCode:"cache_request_failed"}),u;r.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const c=yield r.platformAuthProvider.sendMessage(a);return yield r.handleNativeResponse(c,a,i).then(u=>(o.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),s.clearNativeBrokerErrorCode(),u)).catch(u=>{throw o.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError}),u})}catch(a){throw a instanceof kn&&s.setNativeBrokerErrorCode(a.errorCode),o.end({success:!1}),a}})()}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ue.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){var r=this;return m(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),T(ea);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},r.correlationId);if(!o)throw T(ea);try{const i=r.createSilentCacheRequest(t,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,t){var r=this;return m(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o);try{yield r.platformAuthProvider.sendMessage(i)}catch(c){if(c instanceof kn&&(r.initializeServerTelemetryManager(r.apiId).setNativeBrokerErrorCode(c.errorCode),Mi(c)))throw c}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const s={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},a=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);t.end({success:!0}),yield r.navigationClient.navigateExternal(a,s)})()}handleRedirectPromise(e,t){var r=this;return m(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a=St();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=yield r.platformAuthProvider.sendMessage(s),u=yield r.handleNativeResponse(c,s,a);return r.initializeServerTelemetryManager(r.apiId).clearNativeBrokerErrorCode(),e&&r.correlationId&&r.performanceClient.addFields({isNativeBroker:!0},r.correlationId),u}catch(c){throw c}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){var o=this;return m(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=bn(e.id_token,gt),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},o.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)o.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==a&&e.account.id!==t.accountId)throw $d(vR);const c=yield o.getDiscoveredAuthority({requestAuthority:t.authority}),u=Ly(o.browserStorage,c,s,gt,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger);e.expires_in=Number(e.expires_in);const l=yield o.generateAuthenticationResult(e,t,i,u,c.canonicalAuthority,r);return yield o.cacheAccount(u,o.correlationId,Rn(i)),yield o.cacheNativeTokens(e,t,s,i,e.access_token,l.tenantId,r),l})()}createHomeAccountIdentifier(e,t){return Re.generateHomeAccountId(e.client_info||E.EMPTY_STRING,0,this.logger,this.browserCrypto,t)}generateScopes(e,t){return Ue.fromString(t||e)}generatePopAccessToken(e,t){var r=this;return m(function*(){if(t.tokenType===ae.POP&&t.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new bi(r.browserCrypto),i={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw T(na);return o.signPopToken(e.access_token,t.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,t,r,o,i,s){var a=this;return m(function*(){const c=a.addTelemetryFromNativeResponse(e.properties.MATS),u=a.generateScopes(t.scope,e.scope),l=e.account.properties||{},d=l.UID||r.oid||r.sub||E.EMPTY_STRING,h=l.TenantId||r.tid||E.EMPTY_STRING,f=yy(Re.getAccountInfo(o),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const g=yield a.generatePopAccessToken(e,t),y=t.tokenType===ae.POP?ae.POP:ae.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:u.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:Ti(s+e.expires_in),tokenType:y,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e,t,r){var o=this;return m(function*(){yield o.browserStorage.setAccount(e,o.correlationId,r),o.browserStorage.removeAccountContext(Re.getAccountInfo(e),t)})()}cacheNativeTokens(e,t,r,o,i,s,a){const c=Pd(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=a+(t.tokenType===ae.POP?E.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e.scope,t.scope),h=Od(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),l,0,gt,void 0,t.tokenType,void 0,t.keyId);return this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:h},this.correlationId,Rn(o),t.storeInCache)}getExpiresInValue(e,t){return e===ae.POP?E.SHR_NONCE_VALIDITY:("string"==typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var t=this;return m(function*(){t.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=yield t.getCanonicalAuthority(e),{scopes:o,...i}=e,s=new Ue(o||[]);s.appendScopes(ti);const a={...i,accountId:t.accountId,clientId:t.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:t.getRedirectUri(e.redirectUri),prompt:t.getPrompt(e.prompt),correlationId:t.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(a.signPopToken&&e.popKid)throw b(Zl);if(t.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry="MATS",e.authenticationScheme===ae.POP){const c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},u=new bi(t.browserCrypto);let l;if(a.keyId)l=t.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const d=yield I(u.generateCnf.bind(u),p.PopTokenGenerateCnf,t.logger,t.performanceClient,t.correlationId)(c,t.logger);l=d.reqCnfString,a.keyId=d.kid,a.signPopToken=!0}a.reqCnf=l}return t.addRequestSKUs(a),a})()}getCanonicalAuthority(e){var t=this;return m(function*(){const r=e.authority||t.config.auth.authority;e.account&&(yield t.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new ee(r);return o.validateAsUri(),o})()}getPrompt(e){switch(this.apiId){case 863:case 61:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Ge.NONE}if(e)switch(e){case Ge.NONE:case Ge.CONSENT:case Ge.LOGIN:case Ge.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),b(Yl)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(El)&&e.extraParameters.hasOwnProperty(wl)&&e.extraParameters.hasOwnProperty(Gr);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[wl],r=e.extraParameters[Gr]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}}function $y(n,e,t,r,o){return Vy.apply(this,arguments)}function Vy(){return(Vy=m(function*(n,e,t,r,o){const i=function Sz(n,e,t,r){const o=e.correlationId,i=new Map;if(om(i,e.embeddedClientId||e.extraQueryParameters?.[Gr]||n.clientId),rm(i,[...e.scopes||[],...e.extraScopesToConsent||[]],!0,n.authority.options.OIDCOptions?.defaultScopes),im(i,e.redirectUri),am(i,o),function n$(n,e){n.set(Ej,e||hj.QUERY)}(i,e.responseMode),dm(i),e.prompt&&(function a$(n,e){n.set(bj,e)}(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(function s$(n,e){n.set(Zj,e)}(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==Ge.SELECT_ACCOUNT)if(e.sid&&e.prompt===Ge.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),VA(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){const a=function bz(n){return n.idTokenClaims?.sid||null}(e.account);let c=function Rz(n){return n.loginHint||n.idTokenClaims?.login_hint||null}(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Tl(i,c),r?.addFields({loginHintFromClaim:!0},o);try{oa(i,Ii(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===Ge.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),VA(i,a),r?.addFields({sidFromClaim:!0},o);try{oa(i,Ii(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Tl(i,e.loginHint),Sl(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Tl(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{oa(i,Ii(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Tl(i,e.loginHint),Sl(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&function c$(n,e){n.set(Dj,e)}(i,e.nonce),e.state&&GA(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&sm(i,e.claims,n.clientCapabilities),e.embeddedClientId&&Al(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(tm))&&QA(i),i}({...n.auth,authority:e},t,r,o);if(cm(i,{sku:_t.MSAL_SKU,version:Jr,os:"",cpu:""}),n.auth.protocolMode!==Tt.OIDC&&um(i,n.telemetry.application),t.platformBroker&&(function r$(n){n.set(Wj,"1")}(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===ae.POP)){const s=new kd(r,o),a=new bi(s);let c;c=t.popKid?s.encodeKid(t.popKid):(yield I(a.generateCnf.bind(a),p.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,hm(i,c)}return _l(i,t.correlationId,o),i})).apply(this,arguments)}function Gy(n,e,t,r,o){return zy.apply(this,arguments)}function zy(){return(zy=m(function*(n,e,t,r,o){if(!t.codeChallenge)throw fe(zs);const i=yield I($y,p.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return nm(i,Dg.CODE),lm(i,t.codeChallenge,E.S256_CODE_CHALLENGE_METHOD),gr(i,t.extraQueryParameters||{}),jy(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})).apply(this,arguments)}function qy(n,e,t,r,o,i){return Ky.apply(this,arguments)}function Ky(){return(Ky=m(function*(n,e,t,r,o,i){if(!r.earJwk)throw b(fm);const s=yield $y(e,t,r,o,i);nm(s,Dg.IDTOKEN_TOKEN_REFRESHTOKEN),function f$(n,e){n.set(e$,encodeURIComponent(e)),n.set(t$,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(s,r.earJwk),lm(s,r.codeChallenge,E.S256_CODE_CHALLENGE_METHOD);const a=new Map;return gr(a,r.extraQueryParameters||{}),IR(n,jy(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters),s)})).apply(this,arguments)}function Wy(n,e,t,r,o,i){return Qy.apply(this,arguments)}function Qy(){return(Qy=m(function*(n,e,t,r,o,i){const s=yield $y(e,t,r,o,i);nm(s,Dg.CODE),lm(s,r.codeChallenge,r.codeChallengeMethod||E.S256_CODE_CHALLENGE_METHOD),function p$(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}(s,r.authorizePostBodyParameters||{});const a=new Map;return gr(a,r.extraQueryParameters||{}),IR(n,jy(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters),s)})).apply(this,arguments)}function IR(n,e,t){const r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{const s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function ER(n,e,t,r,o,i,s,a,c,u){return Yy.apply(this,arguments)}function Yy(){return(Yy=m(function*(n,e,t,r,o,i,s,a,c,u){if(a.verbose("Account id found, calling WAM for token"),!u)throw b(da);const l=new kd(a,c),d=new Vd(r,o,l,a,s,r.system.navigationClient,t,c,u,e,i,n.correlationId),{userRequestState:h}=Di.parseRequestState(l,n.state);return I(d.acquireToken.bind(d),p.NativeInteractionClientAcquireToken,a,c,n.correlationId)({...n,state:h,prompt:void 0})})).apply(this,arguments)}function ki(n,e,t,r,o,i,s,a,c,u,l,d){return Jy.apply(this,arguments)}function Jy(){return(Jy=m(function*(n,e,t,r,o,i,s,a,c,u,l,d){if(Mn.removeThrottle(s,o.auth.clientId,n),e.accountId)return I(ER,p.HandleResponsePlatformBroker,u,l,n.correlationId)(n,e.accountId,r,o,s,a,c,u,l,d);const h={...n,code:e.code||"",codeVerifier:t},f=new yR(i,s,h,u,l);return yield I(f.handleCodeResponse.bind(f),p.HandleCodeResponse,u,l,n.correlationId)(e,n)})).apply(this,arguments)}function Zy(n,e,t,r,o,i,s,a,c,u,l){return Xy.apply(this,arguments)}function Xy(){return(Xy=m(function*(n,e,t,r,o,i,s,a,c,u,l){if(Mn.removeThrottle(i,r.auth.clientId,n),mR(e,n.state),!e.ear_jwe)throw b(eD);if(!n.earJwk)throw b(fm);const d=JSON.parse(yield I(D$,p.DecryptEarResponse,c,u,n.correlationId)(n.earJwk,e.ear_jwe));if(d.accountId)return I(ER,p.HandleResponsePlatformBroker,c,u,n.correlationId)(n,d.accountId,t,r,i,s,a,c,u,l);const h=new Xr(r.auth.clientId,i,new kd(c,u),c,null,null,u);h.validateTokenResponse(d);const f={code:"",state:n.state,nonce:n.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return yield I(h.handleServerTokenResponse.bind(h),p.HandleServerTokenResponse,c,u,n.correlationId)(d,o,St(),n,f,void 0,void 0,void 0,void 0)})).apply(this,arguments)}const jz=32;function eo(n,e,t){return ev.apply(this,arguments)}function ev(){return(ev=m(function*(n,e,t){n.addQueueMeasurement(p.GeneratePkceCodes,t);const r=Ft($z,p.GenerateCodeVerifier,e,n,t)(n,e,t);return{verifier:r,challenge:yield I(Vz,p.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t)}})).apply(this,arguments)}function $z(n,e,t){try{const r=new Uint8Array(jz);return Ft(w$,p.GetRandomValues,e,n,t)(r),yr(r)}catch{throw b(ia)}}function Vz(n,e,t,r){return tv.apply(this,arguments)}function tv(){return(tv=m(function*(n,e,t,r){e.addQueueMeasurement(p.GenerateCodeChallengeFromVerifier,r);try{const o=yield I(uD,p.Sha256Digest,t,e,r)(n,e,r);return yr(new Uint8Array(o))}catch{throw b(ia)}})).apply(this,arguments)}class Gd{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(p.NativeMessageHandlerHandshake),this.platformAuthType="PlatformAuthExtensionHandler"}sendMessage(e){var t=this;return m(function*(){t.logger.trace(t.platformAuthType+" - sendMessage called.");const r={method:"GetToken",request:e},o={channel:qt_CHANNEL_ID,extensionId:t.extensionId,responseId:an(),body:r};t.logger.trace(t.platformAuthType+" - Sending request to browser extension"),t.logger.tracePii(t.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(o)}`),t.messageChannel.port1.postMessage(o);const i=yield new Promise((a,c)=>{t.resolvers.set(o.responseId,{resolve:a,reject:c})});return t.validatePlatformBrokerResponse(i)})()}static createProvider(e,t,r){return m(function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const o=new Gd(e,t,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new Gd(e,t,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return m(function*(){e.logger.trace(e.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const t={channel:qt_CHANNEL_ID,extensionId:e.extensionId,responseId:an(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(t,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(t.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(b(Wl)),e.handshakeResolvers.delete(t.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===qt_CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&"Handshake"===t.body.method){const r=this.handshakeResolvers.get(t.responseId);if(!r)return void this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(b(Ql))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if("Response"===i){if(!r)return;const s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject($d(s.code,s.description,s.ext));else{if(!s.result)throw Ng(ri,"Event does not contain result.");s.result.code&&s.result.description?r.reject($d(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(t.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Ng(ri,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return"ppnbnpeolgkicgegkbkbjmhlideopiji"===this.getExtensionId()?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class nv{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType="PlatformAuthDOMHandler"}static createProvider(e,t,r){return m(function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts("MicrosoftEntra"))?.includes("get-token-and-sign-out"))return e.trace("Platform auth api available in DOM"),new nv(e,t,r)})()}getExtensionId(){return"MicrosoftEntra"}getExtensionVersion(){return""}getExtensionName(){return"DOM API"}sendMessage(e){var t=this;return m(function*(){t.logger.trace(t.platformAuthType+" - Sending request to browser DOM API");try{const r=t.initializePlatformDOMRequest(e),o=yield window.navigator.platformAuthentication.executeGetToken(r);return t.validatePlatformBrokerResponse(o)}catch(r){throw t.logger.error(t.platformAuthType+" - executeGetToken DOM API error"),r}})()}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:u,embeddedClientId:l,extraParameters:d,...h}=e,f=this.getDOMExtraParams(h);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...f},isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:u,embeddedClientId:l}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),$d(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw Ng(ri,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{})}}}function wR(n,e,t,r){return ov.apply(this,arguments)}function ov(){return(ov=m(function*(n,e,t,r){n.trace("getPlatformAuthProvider called",t);const o=function Gz(){let n;try{return n=window[He.SessionStorage],"true"===n?.getItem(LG)}catch{return!1}}();let i;n.trace("Has client allowed platform auth via DOM API: "+o);try{o&&(i=yield nv.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield Gd.createProvider(n,r||Bb,e))}catch(s){n.trace("Platform auth not available",s)}return i})).apply(this,arguments)}function xa(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case ae.BEARER:case ae.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class zz extends Ri{constructor(e,t,r,o,i,s,a,c,u,l){super(e,t,r,o,i,s,a,u,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||ti,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const i={...e,httpMethod:gR(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){var o=this;return m(function*(){o.logger.verbose("acquireTokenPopupAsync called");const i=yield I(o.initializeAuthorizationRequest.bind(o),p.StandardInteractionClientInitializeAuthorizationRequest,o.logger,o.performanceClient,o.correlationId)(e,N.Popup);t.popup&&CD(i.authority);const s=xa(o.config,o.logger,o.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,o.config.auth.protocolMode===Tt.EAR?o.executeEarFlow(i,t,r):o.executeCodeFlow(i,t,r)})()}executeCodeFlow(e,t,r){var o=this;return m(function*(){const i=e.correlationId,s=o.initializeServerTelemetryManager(862),a=r||(yield I(eo,p.GeneratePkceCodes,o.logger,o.performanceClient,i)(o.performanceClient,o.logger,i)),c={...e,codeChallenge:a.challenge};try{const u=yield I(o.createAuthCodeClient.bind(o),p.StandardInteractionClientCreateAuthCodeClient,o.logger,o.performanceClient,i)({serverTelemetryManager:s,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account});if("POST"===c.httpMethod)return yield o.executeCodeFlowWithPost(c,t,u,a.verifier);{const l=yield I(Gy,p.GetAuthCodeUrl,o.logger,o.performanceClient,i)(o.config,u.authority,c,o.logger,o.performanceClient),d=o.initiateAuthRequest(l,t);o.eventHandler.emitEvent("msal:popupOpened",N.Popup,{popupWindow:d},null);const h=yield o.monitorPopupForHash(d,t.popupWindowParent),f=Ft(Oa,p.DeserializeResponse,o.logger,o.performanceClient,o.correlationId)(h,o.config.auth.OIDCOptions.serverResponseType,o.logger);return yield I(ki,p.HandleResponseCode,o.logger,o.performanceClient,i)(e,f,a.verifier,862,o.config,u,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)}}catch(u){throw t.popup?.close(),u instanceof de&&(u.setCorrelationId(o.correlationId),s.cacheFailedRequest(u)),u}})()}executeEarFlow(e,t,r){var o=this;return m(function*(){const i=e.correlationId,s=yield I(o.getDiscoveredAuthority.bind(o),p.StandardInteractionClientGetDiscoveredAuthority,o.logger,o.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=yield I(Mm,p.GenerateEarKey,o.logger,o.performanceClient,i)(),c=r||(yield I(eo,p.GeneratePkceCodes,o.logger,o.performanceClient,i)(o.performanceClient,o.logger,i)),u={...e,earJwk:a,codeChallenge:c.challenge},l=t.popup||o.openPopup("about:blank",t);(yield qy(l.document,o.config,s,u,o.logger,o.performanceClient)).submit();const h=yield I(o.monitorPopupForHash.bind(o),p.SilentHandlerMonitorIframeForHash,o.logger,o.performanceClient,i)(l,t.popupWindowParent),f=Ft(Oa,p.DeserializeResponse,o.logger,o.performanceClient,o.correlationId)(h,o.config.auth.OIDCOptions.serverResponseType,o.logger);if(!f.ear_jwe&&f.code){const g=yield I(o.createAuthCodeClient.bind(o),p.StandardInteractionClientCreateAuthCodeClient,o.logger,o.performanceClient,i)({serverTelemetryManager:o.initializeServerTelemetryManager(862),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:s});return I(ki,p.HandleResponseCode,o.logger,o.performanceClient,i)(u,f,c.verifier,862,o.config,g,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)}return I(Zy,p.HandleResponseEar,o.logger,o.performanceClient,i)(u,f,862,o.config,s,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)})()}executeCodeFlowWithPost(e,t,r,o){var i=this;return m(function*(){const s=e.correlationId,a=yield I(i.getDiscoveredAuthority.bind(i),p.StandardInteractionClientGetDiscoveredAuthority,i.logger,i.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=t.popup||i.openPopup("about:blank",t);(yield Wy(c.document,i.config,a,e,i.logger,i.performanceClient)).submit();const l=yield I(i.monitorPopupForHash.bind(i),p.SilentHandlerMonitorIframeForHash,i.logger,i.performanceClient,s)(c,t.popupWindowParent),d=Ft(Oa,p.DeserializeResponse,i.logger,i.performanceClient,i.correlationId)(l,i.config.auth.OIDCOptions.serverResponseType,i.logger);return I(ki,p.HandleResponseCode,i.logger,i.performanceClient,s)(e,d,o,862,i.config,r,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)})()}logoutPopupAsync(e,t,r,o){var i=this;return m(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",N.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(i.correlationId,e.account);const c=(yield I(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",N.Popup,e);const u=i.openPopup(c,t);if(i.eventHandler.emitEvent("msal:popupOpened",N.Popup,{popupWindow:u},null),yield i.monitorPopupForHash(u,t.popupWindowParent).catch(()=>{}),o){const l={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=ee.getAbsoluteUrl(o,Wn());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,l)}else i.logger.verbose("No main window navigation requested")}catch(a){throw t.popup?.close(),a instanceof de&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.eventHandler.emitEvent("msal:logoutFailure",N.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",N.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",N.Popup)})()}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),b(ii)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(b(zr));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===Ou.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw b(Pl);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),b(Nl)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=r.popupSize?.width,l=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!u||u<0||u>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=_t.POPUP_WIDTH),(!l||l<0||l>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=_t.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-_t.POPUP_HEIGHT/2+s)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-_t.POPUP_WIDTH/2+i)),o.open(e,t,`width=${u}, height=${l}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${_t.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){return`${_t.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class Kz extends Ri{constructor(e,t,r,o,i,s,a,c,u,l){super(e,t,r,o,i,s,a,u,l),this.nativeStorage=c}acquireToken(e){var t=this;return m(function*(){const r=yield I(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,t.correlationId)(e,N.Redirect);r.platformBroker=xa(t.config,t.logger,t.platformAuthProvider,e.authenticationScheme);const o=s=>{s.persisted&&(t.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),t.browserStorage.resetRequestCache(),t.eventHandler.emitEvent("msal:restoreFromBFCache",N.Redirect))},i=t.getRedirectStartPage(e.redirectStartPage);t.logger.verbosePii(`Redirect start page: ${i}`),t.browserStorage.setTemporaryCache("request.origin",i,!0),window.addEventListener("pageshow",o);try{t.config.auth.protocolMode===Tt.EAR?yield t.executeEarFlow(r):yield t.executeCodeFlow(r,e.onRedirectNavigate)}catch(s){throw s instanceof de&&s.setCorrelationId(t.correlationId),window.removeEventListener("pageshow",o),s}})()}executeCodeFlow(e,t){var r=this;return m(function*(){const o=e.correlationId,i=r.initializeServerTelemetryManager(861),s=yield I(eo,p.GeneratePkceCodes,r.logger,r.performanceClient,o)(r.performanceClient,r.logger,o),a={...e,codeChallenge:s.challenge};r.browserStorage.cacheAuthorizeRequest(a,s.verifier);try{if("POST"===a.httpMethod)return yield r.executeCodeFlowWithPost(a);{const c=yield I(r.createAuthCodeClient.bind(r),p.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),u=yield I(Gy,p.GetAuthCodeUrl,r.logger,r.performanceClient,e.correlationId)(r.config,c.authority,a,r.logger,r.performanceClient);return yield r.initiateAuthRequest(u,t)}}catch(c){throw c instanceof de&&(c.setCorrelationId(r.correlationId),i.cacheFailedRequest(c)),c}})()}executeEarFlow(e){var t=this;return m(function*(){const r=e.correlationId,o=yield I(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield I(Mm,p.GenerateEarKey,t.logger,t.performanceClient,r)(),s=yield I(eo,p.GeneratePkceCodes,t.logger,t.performanceClient,r)(t.performanceClient,t.logger,r),a={...e,earJwk:i,codeChallenge:s.challenge};return t.browserStorage.cacheAuthorizeRequest(a,s.verifier),(yield qy(document,t.config,o,a,t.logger,t.performanceClient)).submit(),new Promise((u,l)=>{setTimeout(()=>{l(b(ed,"failed_to_redirect"))},t.config.system.redirectNavigationTimeout)})})()}executeCodeFlowWithPost(e){var t=this;return m(function*(){const r=e.correlationId,o=yield I(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return t.browserStorage.cacheAuthorizeRequest(e),(yield Wy(document,t.config,o,e,t.logger,t.performanceClient)).submit(),new Promise((s,a)=>{setTimeout(()=>{a(b(ed,"failed_to_redirect"))},t.config.system.redirectNavigationTimeout)})})()}handleRedirectPromise(){var e=this;return m(function*(t="",r,o,i){const s=e.initializeServerTelemetryManager(865);try{const[a,c]=e.getRedirectResponse(t||"");if(!a)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.resetRequestCache(),"back_forward"!==function qz(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}()?i.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const u=e.browserStorage.getTemporaryCache("request.origin",!0)||E.EMPTY_STRING;if(UA(u)===UA(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),u.indexOf("#")>-1&&function R$(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(u),yield e.handleResponse(a,r,o,s);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(a,r,o,s);if(!nd()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",c,!0);const h={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let f=!0;if(u&&"null"!==u)e.logger.verbose(`Navigating to loginRequestUrl: ${u}`),f=yield e.navigationClient.navigateInternal(u,h);else{const g=function k$(){const e=new ee(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",g,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=yield e.navigationClient.navigateInternal(g,h)}if(!f)return yield e.handleResponse(a,r,o,s)}return null}catch(a){throw a instanceof de&&(a.setCorrelationId(e.correlationId),s.cacheFailedRequest(a)),a}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===Ou.QUERY?window.location.search:window.location.hash);let r=Il(t);if(r){try{!function Tz(n,e,t){if(!n.state)throw b(aa);const r=function _z(n,e){if(!e)return null;try{return Di.parseRequestState(n,e).libraryState.meta}catch{throw T(pr)}}(e,n.state);if(!r)throw b(Rl);if(r.interactionType!==t)throw b(Ml)}(r,this.browserCrypto,N.Redirect)}catch(i){return i instanceof de&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return gD(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=Il(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){var i=this;return m(function*(){if(!e.state)throw b(aa);if(e.ear_jwe){const c=yield I(i.getDiscoveredAuthority.bind(i),p.StandardInteractionClientGetDiscoveredAuthority,i.logger,i.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return I(Zy,p.HandleResponseEar,i.logger,i.performanceClient,t.correlationId)(t,e,861,i.config,c,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)}const a=yield I(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return I(ki,p.HandleResponseCode,i.logger,i.performanceClient,t.correlationId)(t,e,r,861,i.config,a,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)})()}initiateAuthRequest(e,t){var r=this;return m(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},i=t||r.config.auth.onRedirectNavigate;return"function"==typeof i?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==i(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield r.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield r.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),b(ii)})()}logout(e){var t=this;return m(function*(){t.logger.verbose("logoutRedirect called");const r=t.initializeLogoutRequest(e),o=t.initializeServerTelemetryManager(961);try{t.eventHandler.emitEvent("msal:logoutStart",N.Redirect,e),yield t.clearCacheOnLogout(t.correlationId,r.account);const i={apiId:961,timeout:t.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield I(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(t.eventHandler.emitEvent("msal:logoutSuccess",N.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0,"signout"),void(yield t.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return t.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0,"signout"),void(yield t.navigationClient.navigateExternal(a,i));t.browserStorage.setInteractionInProgress(!1),t.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof de&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),t.eventHandler.emitEvent("msal:logoutFailure",N.Redirect,null,i),t.eventHandler.emitEvent("msal:logoutEnd",N.Redirect),i}t.eventHandler.emitEvent("msal:logoutEnd",N.Redirect)})()}getRedirectStartPage(e){const t=e||window.location.href;return ee.getAbsoluteUrl(t,Wn())}}function Wz(n,e,t,r,o){return iv.apply(this,arguments)}function iv(){return(iv=m(function*(n,e,t,r,o){if(e.addQueueMeasurement(p.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),b(ii);return o?I(Jz,p.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ft(Zz,p.SilentHandlerLoadFrameSync,t,e,r)(n)})).apply(this,arguments)}function Qz(n,e,t,r,o){return sv.apply(this,arguments)}function sv(){return(sv=m(function*(n,e,t,r,o){const i=zd();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Wy(i.contentDocument,n,e,t,r,o)).submit(),i})).apply(this,arguments)}function Yz(n,e,t,r,o){return av.apply(this,arguments)}function av(){return(av=m(function*(n,e,t,r,o){const i=zd();if(!i.contentDocument)throw"No document associated with iframe!";return(yield qy(i.contentDocument,n,e,t,r,o)).submit(),i})).apply(this,arguments)}function _R(n,e,t,r,o,i,s){return cv.apply(this,arguments)}function cv(){return(cv=m(function*(n,e,t,r,o,i,s){return r.addQueueMeasurement(p.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Ty&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Ty}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(l),c(b(Ol))},e),l=window.setInterval(()=>{let d="";const h=n.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||"about:blank"===d)return;let f="";h&&(f=s===Ou.QUERY?h.location.search:h.location.hash),window.clearTimeout(u),window.clearInterval(l),a(f)},t)}).finally(()=>{Ft(Xz,p.RemoveHiddenIframe,o,r,i)(n)})})).apply(this,arguments)}function Jz(n,e,t,r){return t.addQueueMeasurement(p.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=zd();window.setTimeout(()=>{s?(s.src=n,o(s)):i("Unable to load iframe")},e)})}function Zz(n){const e=zd();return e.src=n,e}function zd(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("allow","local-network-access *"),document.body.appendChild(n),n}function Xz(n){document.body===n.parentNode&&document.body.removeChild(n)}class eq extends Ri{constructor(e,t,r,o,i,s,a,c,u,l,d){super(e,t,r,o,i,s,c,l,d),this.apiId=a,this.nativeStorage=u}acquireToken(e){var t=this;return m(function*(){t.performanceClient.addQueueMeasurement(p.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&t.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==Ge.NONE&&r.prompt!==Ge.NO_SESSION&&(t.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${Ge.NONE}`),r.prompt=Ge.NONE):r.prompt=Ge.NONE;const o=yield I(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,N.Silent);return o.platformBroker=xa(t.config,t.logger,t.platformAuthProvider,o.authenticationScheme),CD(o.authority),t.config.auth.protocolMode===Tt.EAR?t.executeEarFlow(o):t.executeCodeFlow(o)})()}executeCodeFlow(e){var t=this;return m(function*(){let r;const o=t.initializeServerTelemetryManager(t.apiId);try{return r=yield I(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield I(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,e.correlationId)(r,e)}catch(i){if(i instanceof de&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),!(r&&i instanceof de&&i.errorCode===_t.INVALID_GRANT_ERROR))throw i;return t.performanceClient.addFields({retryError:i.errorCode},t.correlationId),yield I(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,t.correlationId)(r,e)}})()}executeEarFlow(e){var t=this;return m(function*(){const r=e.correlationId,o=yield I(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield I(Mm,p.GenerateEarKey,t.logger,t.performanceClient,r)(),s=yield I(eo,p.GeneratePkceCodes,t.logger,t.performanceClient,r)(t.performanceClient,t.logger,r),a={...e,earJwk:i,codeChallenge:s.challenge},c=yield I(Yz,p.SilentHandlerInitiateAuthRequest,t.logger,t.performanceClient,r)(t.config,o,a,t.logger,t.performanceClient),u=t.config.auth.OIDCOptions.serverResponseType,l=yield I(_R,p.SilentHandlerMonitorIframeForHash,t.logger,t.performanceClient,r)(c,t.config.system.iframeHashTimeout,t.config.system.pollIntervalMilliseconds,t.performanceClient,t.logger,r,u),d=Ft(Oa,p.DeserializeResponse,t.logger,t.performanceClient,r)(l,u,t.logger);if(!d.ear_jwe&&d.code){const h=yield I(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,r)({serverTelemetryManager:t.initializeServerTelemetryManager(t.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:o});return I(ki,p.HandleResponseCode,t.logger,t.performanceClient,r)(a,d,s.verifier,t.apiId,t.config,h,t.browserStorage,t.nativeStorage,t.eventHandler,t.logger,t.performanceClient,t.platformAuthProvider)}return I(Zy,p.HandleResponseEar,t.logger,t.performanceClient,r)(a,d,t.apiId,t.config,o,t.browserStorage,t.nativeStorage,t.eventHandler,t.logger,t.performanceClient,t.platformAuthProvider)})()}logout(){return Promise.reject(b(si))}silentTokenHelper(e,t){var r=this;return m(function*(){const o=t.correlationId;r.performanceClient.addQueueMeasurement(p.SilentIframeClientTokenHelper,o);const i=yield I(eo,p.GeneratePkceCodes,r.logger,r.performanceClient,o)(r.performanceClient,r.logger,o),s={...t,codeChallenge:i.challenge};let a;if("POST"===t.httpMethod)a=yield I(Qz,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(r.config,e.authority,s,r.logger,r.performanceClient);else{const d=yield I(Gy,p.GetAuthCodeUrl,r.logger,r.performanceClient,o)(r.config,e.authority,s,r.logger,r.performanceClient);a=yield I(Wz,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(d,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait)}const c=r.config.auth.OIDCOptions.serverResponseType,u=yield I(_R,p.SilentHandlerMonitorIframeForHash,r.logger,r.performanceClient,o)(a,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,c),l=Ft(Oa,p.DeserializeResponse,r.logger,r.performanceClient,o)(u,c,r.logger);return I(ki,p.HandleResponseCode,r.logger,r.performanceClient,o)(t,l,i.verifier,r.apiId,r.config,e,r.browserStorage,r.nativeStorage,r.eventHandler,r.logger,r.performanceClient,r.platformAuthProvider)})()}}class nq extends xy{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireToken,e.correlationId);const r=St(),o=yield I(t.executeTokenRequest.bind(t),p.RefreshTokenClientExecuteTokenRequest,t.logger,t.performanceClient,e.correlationId)(e,t.authority),i=o.headers?.[ft.X_MS_REQUEST_ID],s=new Xr(t.config.authOptions.clientId,t.cacheManager,t.cryptoUtils,t.logger,t.config.serializableCache,t.config.persistencePlugin);return s.validateTokenResponse(o.body),I(s.handleServerTokenResponse.bind(s),p.HandleServerTokenResponse,t.logger,t.performanceClient,e.correlationId)(o.body,t.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var t=this;return m(function*(){if(!e)throw fe(Ku);if(t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw T(Zs);if(t.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield I(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof dn&&o.errorCode===Si||o instanceof Zr&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return I(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1);throw o}return I(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=Ft(r.cacheManager.getRefreshToken.bind(r.cacheManager),p.CacheManagerGetRefreshToken,r.logger,r.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,r.performanceClient);if(!o)throw Hd(Si);if(o.expiresOn&&Nd(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw r.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),Hd(My);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||ae.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield I(r.acquireToken.bind(r),p.RefreshTokenClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof dn&&(r.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),s.subError===Ai)){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=r.cacheManager.generateCredentialKey(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,t){var r=this;return m(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=r.createTokenQueryParameters(e),i=ee.appendQueryString(t.tokenEndpoint,o),s=yield I(r.createTokenRequestBody.bind(r),p.RefreshTokenClientCreateTokenRequestBody,r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c=Bd(r.config.authOptions.clientId,e);return I(r.executePostToTokenEndpoint.bind(r),p.RefreshTokenClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,p.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return m(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(om(r,e.embeddedClientId||e.tokenBodyParameters?.[Gr]||t.config.authOptions.clientId),e.redirectUri&&im(r,e.redirectUri),rm(r,e.scopes,!0,t.config.authOptions.authority.options.OIDCOptions?.defaultScopes),WA(r,"refresh_token"),dm(r),cm(r,t.config.libraryInfo),um(r,t.config.telemetry.application),XA(r),t.serverTelemetryManager&&!Fb(t.config)&&ZA(r,t.serverTelemetryManager),function l$(n,e){n.set("refresh_token",e)}(r,e.refreshToken),t.config.clientCredentials.clientSecret&&zA(r,t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const o=t.config.clientCredentials.clientAssertion;qA(r,yield lR(o.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),KA(r,o.assertionType)}if(e.authenticationScheme===ae.POP){const o=new bi(t.cryptoUtils,t.performanceClient);let i;i=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield I(o.generateCnf.bind(o),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,hm(r,i)}else if(e.authenticationScheme===ae.SSH){if(!e.sshJwk)throw fe(oi);JA(r,e.sshJwk)}if((!Lt.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&sm(r,e.claims,t.config.authOptions.clientCapabilities),t.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{oa(r,Ii(e.ccsCredential.credential))}catch(o){t.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case"UPN":Sl(r,e.ccsCredential.credential)}return e.embeddedClientId&&Al(r,t.config.authOptions.clientId,t.config.authOptions.redirectUri),e.tokenBodyParameters&&gr(r,e.tokenBodyParameters),_l(r,e.correlationId,t.performanceClient),ra(r)})()}}class rq extends Ri{acquireToken(e){var t=this;return m(function*(){t.performanceClient.addQueueMeasurement(p.SilentRefreshClientAcquireToken,e.correlationId);const r=yield I(Uy,p.InitializeBaseRequest,t.logger,t.performanceClient,e.correlationId)(e,t.config,t.performanceClient,t.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=t.getRedirectUri(e.redirectUri));const i=t.initializeServerTelemetryManager(61),s=yield t.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return I(s.acquireTokenByRefreshToken.bind(s),p.RefreshTokenClientAcquireTokenByRefreshToken,t.logger,t.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(b(si))}createRefreshTokenClient(e){var t=this;return m(function*(){const r=yield I(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new nq(r,t.performanceClient)})()}}class oq{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){var o=this;return m(function*(){if(!o.isBrowserEnvironment)throw b(ai);const i=e.correlationId||an(),s=t.id_token?bn(t.id_token,gt):void 0,a=Rn(s||{}),c={protocolMode:o.config.auth.protocolMode,knownAuthorities:o.config.auth.knownAuthorities,cloudDiscoveryMetadata:o.config.auth.cloudDiscoveryMetadata,authorityMetadata:o.config.auth.authorityMetadata,skipAuthorityMetadataCache:o.config.auth.skipAuthorityMetadataCache},u=e.authority?new nt(nt.generateAuthority(e.authority,e.azureCloudOptions),o.config.system.networkClient,o.storage,c,o.logger,e.correlationId||an()):void 0,l=yield o.loadAccount(e,r.clientInfo||t.client_info||"",i,s,u),d=yield o.loadIdToken(t,l.homeAccountId,l.environment,l.realm,i,a),h=yield o.loadAccessToken(e,t,l.homeAccountId,l.environment,l.realm,r,i,a),f=yield o.loadRefreshToken(t,l.homeAccountId,l.environment,i,a);return o.generateAuthenticationResult(e,{account:l,idToken:d,accessToken:h,refreshToken:f},s,u)})()}loadAccount(e,t,r,o,i){var s=this;return m(function*(){if(s.logger.verbose("TokenCache - loading account"),e.account){const l=Re.createFromAccountInfo(e.account);return yield s.storage.setAccount(l,r,Rn(o||{})),l}if(!i||!t&&!o)throw s.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),b(Vl);const a=Re.generateHomeAccountId(t,i.authorityType,s.logger,s.cryptoObj,o),c=o?.tid,u=Ly(s.storage,i,a,gt,r,o,t,i.hostnameAndPort,c,void 0,void 0,s.logger);return yield s.storage.setAccount(u,r,Rn(o||{})),u})()}loadIdToken(e,t,r,o,i,s){var a=this;return m(function*(){if(!e.id_token)return a.logger.verbose("TokenCache - no id token found in response"),null;a.logger.verbose("TokenCache - loading id token");const c=Pd(t,r,e.id_token,a.config.auth.clientId,o);return yield a.storage.setIdTokenCredential(c,i,s),c})()}loadAccessToken(e,t,r,o,i,s,a,c){var u=this;return m(function*(){if(!t.access_token)return u.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return u.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(t.scope||e.scopes&&e.scopes.length))return u.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;u.logger.verbose("TokenCache - loading access token");const l=t.scope?Ue.fromString(t.scope):new Ue(e.scopes),d=s.expiresOn||t.expires_in+St(),h=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+St(),f=Od(r,o,t.access_token,u.config.auth.clientId,i,l.printScopes(),d,h,gt);return yield u.storage.setAccessTokenCredential(f,a,c),f})()}loadRefreshToken(e,t,r,o,i){var s=this;return m(function*(){if(!e.refresh_token)return s.logger.verbose("TokenCache - no refresh token found in response"),null;s.logger.verbose("TokenCache - loading refresh token");const a=Zb(t,r,e.refresh_token,s.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield s.storage.setRefreshTokenCredential(a,o,i),a})()}generateAuthenticationResult(e,t,r,o){let c,i="",s=[],a=null;t?.accessToken&&(i=t.accessToken.secret,s=Ue.fromString(t.accessToken.target).asArray(),a=Ti(t.accessToken.expiresOn),c=Ti(t.accessToken.extendedExpiresOn));const u=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:Re.getAccountInfo(u),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}class iq extends dR{constructor(e){super(e),this.includeRedirectUri=!1}}class sq extends Ri{constructor(e,t,r,o,i,s,a,c,u,l){super(e,t,r,o,i,s,c,u,l),this.apiId=a}acquireToken(e){var t=this;return m(function*(){if(!e.code)throw b(Gl);const r=yield I(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(e,N.Silent),o=t.initializeServerTelemetryManager(t.apiId);try{const i={...r,code:e.code},s=yield I(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new iq(s);t.logger.verbose("Auth code client created");const c=new yR(a,t.browserStorage,i,t.logger,t.performanceClient);return yield I(c.handleCodeResponseFromServer.bind(c),p.HandleCodeResponseFromServer,t.logger,t.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof de&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(b(si))}}function qd(n,e,t){try{Bm(n)}catch(r){throw e.end({success:!1},r,t),r}}class Kd{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new kd(this.logger,this.performanceClient):wd,this.eventHandler=new yz(this.logger),this.browserStorage=this.isBrowserEnvironment?new Py(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function ZG(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw fe(qs)}return{canonicalAuthority:n.authority?rR(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth)):((n,e,t,r)=>new Py(this.config.auth.clientId,{cacheLocation:He.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:He.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},wd,this.logger,this.performanceClient,this.eventHandler))(),this.nativeInternalStorage=new Py(this.config.auth.clientId,{cacheLocation:He.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:He.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new oq(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return m(function*(){const r=new Kd(e);return yield r.initialize(t),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){var r=this;return m(function*(){if(r.logger.trace("initialize called"),r.initialized)return void r.logger.info("initialize has already been called, exiting early.");if(!r.isBrowserEnvironment)return r.logger.info("in non-browser environment, exiting early."),r.initialized=!0,void r.eventHandler.emitEvent("msal:initializeEnd");const o=e?.correlationId||r.getRequestCorrelationId(),i=r.config.system.allowPlatformBroker,s=r.performanceClient.startMeasurement(p.InitializeClientApplication,o);if(r.eventHandler.emitEvent("msal:initializeStart"),!t)try{r.logMultipleInstances(s)}catch{}if(yield I(r.browserStorage.initialize.bind(r.browserStorage),p.InitializeCache,r.logger,r.performanceClient,o)(o),i)try{r.platformAuthProvider=yield wR(r.logger,r.performanceClient,o,r.config.system.nativeBrokerHandshakeTimeout)}catch(a){r.logger.verbose(a)}r.config.cache.claimsBasedCachingEnabled||(r.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ft(r.browserStorage.clearTokensAndKeysWithClaims.bind(r.browserStorage),p.ClearTokensAndKeysWithClaims,r.logger,r.performanceClient,o)(o)),r.config.system.asyncPopups&&(yield r.preGeneratePkceCodes(o)),r.initialized=!0,r.eventHandler.emitEvent("msal:initializeEnd"),s.end({allowPlatformBroker:i,success:!0})})()}handleRedirectPromise(e){var t=this;return m(function*(){if(t.logger.verbose("handleRedirectPromise called"),yD(t.initialized),t.isBrowserEnvironment){const r=e||"";let o=t.redirectResponse.get(r);return typeof o>"u"?(o=t.handleRedirectPromiseInternal(e),t.redirectResponse.set(r,o),t.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):t.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return t.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var t=this;return m(function*(){if(!t.browserStorage.isInteractionInProgress(!0))return t.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if("signout"===t.browserStorage.getInteractionInProgress()?.type)return t.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),t.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=t.getAllAccounts(),i=t.browserStorage.getCachedNativeRequest(),s=i&&t.platformAuthProvider&&!e;let a,c;t.eventHandler.emitEvent("msal:handleRedirectStart",N.Redirect);try{if(s&&t.platformAuthProvider){a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,i?.correlationId||""),t.logger.trace("handleRedirectPromise - acquiring token from native platform"),a.add({isPlatformBrokerRequest:!0});const u=new Vd(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,865,t.performanceClient,t.platformAuthProvider,i.accountId,t.nativeInternalStorage,i.correlationId);c=I(u.handleRedirectPromise.bind(u),p.HandleNativeRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(t.performanceClient,a.event.correlationId)}else{const[u,l]=t.browserStorage.getCachedRequest(),d=u.correlationId;a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,d),t.logger.trace("handleRedirectPromise - acquiring token from web flow");const h=t.createRedirectClient(d);c=I(h.handleRedirectPromise.bind(h),p.HandleRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(e,u,l,a)}}catch(u){throw t.browserStorage.resetRequestCache(),u}return c.then(u=>(u?(t.browserStorage.resetRequestCache(),o.length<t.getAllAccounts().length?(t.eventHandler.emitEvent("msal:loginSuccess",N.Redirect,u),t.logger.verbose("handleRedirectResponse returned result, login success")):(t.eventHandler.emitEvent("msal:acquireTokenSuccess",N.Redirect,u),t.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0},void 0,u.account)):a.event.errorCode?a.end({success:!1},void 0):a.discard(),t.eventHandler.emitEvent("msal:handleRedirectEnd",N.Redirect),u)).catch(u=>{t.browserStorage.resetRequestCache();const l=u;throw t.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",N.Redirect,null,l),t.eventHandler.emitEvent("msal:handleRedirectEnd",N.Redirect),a.end({success:!1},l),u})})()}acquireTokenRedirect(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e);t.logger.verbose("acquireTokenRedirect called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenPreRedirect,r);o.add({scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return o.add({navigateCallbackResult:!1!==c}),o.event=o.end({success:!0},void 0,e.account)||o.event,c};else{const a=t.config.auth.onRedirectNavigate;t.config.auth.onRedirectNavigate=c=>{const u="function"==typeof a?a(c):void 0;return o.add({navigateCallbackResult:!1!==u}),o.event=o.end({success:!0},void 0,e.account)||o.event,u}}const s=t.getAllAccounts().length>0;try{let a;return vD(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0,"signin"),t.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",N.Redirect,e),a=t.platformAuthProvider&&t.canUsePlatformBroker(e)?new Vd(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,861,t.performanceClient,t.platformAuthProvider,t.getNativeAccountId(e),t.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(u=>{if(o.add({brokerErrorName:u.name,brokerErrorCode:u.errorCode}),u instanceof kn&&Mi(u))return t.platformAuthProvider=void 0,t.createRedirectClient(r).acquireToken(e);if(u instanceof dn)return t.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createRedirectClient(r).acquireToken(e);throw u}):t.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw t.browserStorage.resetRequestCache(),2===o.event.status?t.performanceClient.startMeasurement(p.AcquireTokenRedirect,r).end({success:!1},a,e.account):o.end({success:!1},a,e.account),t.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",N.Redirect,null,a),a}})()}acquireTokenPopup(e){var t=this;const r=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(p.AcquireTokenPopup,r);o.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",r),qd(this.initialized,o,e.account),this.browserStorage.setInteractionInProgress(!0,"signin")}catch(c){return Promise.reject(c)}const i=this.getAllAccounts();let s;this.eventHandler.emitEvent(i.length>0?"msal:acquireTokenStart":"msal:loginStart",N.Popup,e);const a=this.getPreGeneratedPkceCodes(r);return this.canUsePlatformBroker(e)?(o.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:r},862).then(c=>(o.end({success:!0},void 0,c.account),c)).catch(c=>{if(o.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof kn&&Mi(c))return this.platformAuthProvider=void 0,this.createPopupClient(r).acquireToken(e,a);if(c instanceof dn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(r).acquireToken(e,a);throw c})):s=this.createPopupClient(r).acquireToken(e,a),s.then(c=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",N.Popup,c):this.eventHandler.emitEvent("msal:acquireTokenSuccess",N.Popup,c),o.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>(this.eventHandler.emitEvent(i.length>0?"msal:acquireTokenFailure":"msal:loginFailure",N.Popup,null,c),o.end({success:!1},c,e.account),Promise.reject(c))).finally(m(function*(){t.browserStorage.setInteractionInProgress(!1),t.config.system.asyncPopups&&(yield t.preGeneratePkceCodes(r))}))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return t.ssoSilentMeasurement=t.performanceClient.startMeasurement(p.SsoSilent,r),t.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),qd(t.initialized,t.ssoSilentMeasurement,e.account),t.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),t.logger.verbose("ssoSilent called",r),t.eventHandler.emitEvent("msal:ssoSilentStart",N.Silent,o),t.canUsePlatformBroker(o)?(t.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),i=t.acquireTokenNative(o,863).catch(s=>{if(t.ssoSilentMeasurement?.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s instanceof kn&&Mi(s))return t.platformAuthProvider=void 0,t.createSilentIframeClient(o.correlationId).acquireToken(o);throw s})):i=t.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(t.eventHandler.emitEvent("msal:ssoSilentSuccess",N.Silent,s),t.ssoSilentMeasurement?.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),s)).catch(s=>{throw t.eventHandler.emitEvent("msal:ssoSilentFailure",N.Silent,null,s),t.ssoSilentMeasurement?.end({success:!1},s,e.account),s}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e);t.logger.trace("acquireTokenByCode called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenByCode,r);qd(t.initialized,o),t.eventHandler.emitEvent("msal:acquireTokenByCodeStart",N.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw b(ql);if(e.code){const i=e.code;let s=t.hybridAuthCodeResponses.get(i);return s?(t.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(t.logger.verbose("Initiating new acquireTokenByCode request",r),s=t.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(t.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",N.Silent,a),t.hybridAuthCodeResponses.delete(i),o.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>{throw t.hybridAuthCodeResponses.delete(i),t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",N.Silent,null,a),o.end({success:!1},a),a}),t.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(t.canUsePlatformBroker(e,e.nativeAccountId)){o.add({isPlatformBrokerRequest:!0});const i=yield t.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof kn&&Mi(s)&&(t.platformAuthProvider=void 0),o.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return o.end({success:!0},void 0,i.account),i}throw b(Kl)}throw b(zl)}catch(i){throw t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",N.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var t=this;return m(function*(){return t.logger.trace("acquireTokenByCodeAsync called",e.correlationId),t.acquireTokenByCodeAsyncMeasurement=t.performanceClient.startMeasurement(p.AcquireTokenByCodeAsync,e.correlationId),t.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),yield t.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(t.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache}),i)).catch(i=>{throw t.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,t){var r=this;return m(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenFromCache,e.correlationId),t){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return I(o.acquireToken.bind(o),p.SilentCacheClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw T(Sn)}})()}acquireTokenByRefreshToken(e,t){var r=this;return m(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenByRefreshToken,e.correlationId),t){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return I(o.acquireToken.bind(o),p.SilentRefreshClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw T(Sn)}})()}acquireTokenBySilentIframe(e){var t=this;return m(function*(){t.performanceClient.addQueueMeasurement(p.AcquireTokenBySilentIframe,e.correlationId);const r=t.createSilentIframeClient(e.correlationId);return I(r.acquireToken.bind(r),p.SilentIframeClientAcquireToken,t.logger,t.performanceClient,e.correlationId)(e)})()}logout(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e);return t.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),t.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e);return vD(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0,"signout"),t.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Bm(this.initialized),this.browserStorage.setInteractionInProgress(!0,"signout"),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){var t=this;return m(function*(){if(!t.isBrowserEnvironment)return void t.logger.info("in non-browser environment, returning early.");const r=t.getRequestCorrelationId(e);return t.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const t=this.getRequestCorrelationId();return function uz(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function lz(n,e,t,r){const o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function dz(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function hz(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function fz(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function pz(n,e,t){e.setActiveAccount(n,t)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function gz(n,e){return n.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,t){var r=this;return m(function*(){r.logger.verbose("hydrateCache called");const o=Re.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield r.browserStorage.setAccount(o,e.correlationId,Rn(e.idTokenClaims)),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,t)):r.browserStorage.hydrateCache(e,t)})()}acquireTokenNative(e,t,r,o){var i=this;return m(function*(){if(i.logger.trace("acquireTokenNative called"),!i.platformAuthProvider)throw b(da);return new Vd(i.config,i.browserStorage,i.browserCrypto,i.logger,i.eventHandler,i.navigationClient,t,i.performanceClient,i.platformAuthProvider,r||i.getNativeAccountId(e),i.nativeInternalStorage,e.correlationId).acquireToken(e,o)})()}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!xa(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Ge.NONE:case Ge.CONSENT:case Ge.LOGIN:case Ge.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new zz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Kz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new eq(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new CR(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new rq(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new sq(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return mD(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===He.LocalStorage?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===He.LocalStorage?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?an():E.EMPTY_STRING}loginRedirect(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e);return t.logger.verbose("loginRedirect called",r),t.acquireTokenRedirect({correlationId:r,...e||OA})})()}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||OA})}acquireTokenSilent(e){var t=this;return m(function*(){const r=t.getRequestCorrelationId(e),o=t.performanceClient.startMeasurement(p.AcquireTokenSilent,r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),qd(t.initialized,o,e.account),t.logger.verbose("acquireTokenSilent called",r);const i=e.account||t.getActiveAccount();if(!i)throw b(Ul);return t.acquireTokenSilentDeduped(e,i,r).then(s=>(o.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),{...s,state:e.state,correlationId:r})).catch(s=>{throw s instanceof de&&s.setCorrelationId(r),o.end({success:!1},s,i),s})})()}acquireTokenSilentDeduped(e,t,r){var o=this;return m(function*(){const i=Bd(o.config.auth.clientId,{...e,authority:e.authority||o.config.auth.authority,correlationId:r},t.homeAccountId),s=JSON.stringify(i),a=o.activeSilentTokenRequests.get(s);if(typeof a>"u"){o.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),o.performanceClient.addFields({deduped:!1},r);const c=I(o.acquireTokenSilentAsync.bind(o),p.AcquireTokenSilentAsync,o.logger,o.performanceClient,r)({...e,correlationId:r},t);return o.activeSilentTokenRequests.set(s,c),c.finally(()=>{o.activeSilentTokenRequests.delete(s)})}return o.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.performanceClient.addFields({deduped:!0},r),a})()}acquireTokenSilentAsync(e,t){var r=this;return m(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement(p.AcquireTokenSilentAsync,e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",N.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield I(wz,p.InitializeSilentRequest,r.logger,r.performanceClient,e.correlationId)(e,t,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=m(function*(u){if(function cq(n,e){const o=!(n instanceof dn&&n.subError!==Ai)&&(n.errorCode===_t.INVALID_GRANT_ERROR||n.errorCode===Sn)||n.errorCode===Si||n.errorCode===My,i=vj.includes(e);return o&&i}(u,s)){if(r.activeIframeRequest){if(5!==s){const[d,h]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,i.correlationId);const f=r.performanceClient.startMeasurement(p.AwaitConcurrentIframe,i.correlationId);f.add({awaitIframeCorrelationId:h});const g=yield d;if(f.end({success:g}),g)return r.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),u}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),I(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(h=>{d=h}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),I(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i).then(h=>(d(!0),h)).catch(h=>{throw d(!1),h}).finally(()=>{r.activeIframeRequest=void 0})}}throw u});return function(u){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",N.Silent,c),r.performanceClient.addFields({fromCache:c.fromCache},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",N.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,t){var r=this;return m(function*(){return xa(r.config,r.logger,r.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),r.acquireTokenNative(e,61,e.account.nativeAccountId,t).catch(function(){var o=m(function*(i){throw r.performanceClient.addFields({brokerErrorName:i.name,brokerErrorCode:i.errorCode},e.correlationId),i instanceof kn&&Mi(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.platformAuthProvider=void 0,T(Sn)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),1===t&&r.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),I(r.acquireTokenFromCache.bind(r),p.AcquireTokenFromCache,r.logger,r.performanceClient,e.correlationId)(e,t).catch(o=>{if(1===t)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",N.Silent,e),I(r.acquireTokenByRefreshToken.bind(r),p.AcquireTokenByRefreshToken,r.logger,r.performanceClient,e.correlationId)(e,t)}))})()}preGeneratePkceCodes(e){var t=this;return m(function*(){return t.logger.verbose("Generating new PKCE codes"),t.pkceCode=yield I(eo,p.GeneratePkceCodes,t.logger,t.performanceClient,e)(t.performanceClient,t.logger,e),Promise.resolve()})()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;window&&(window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function aq(n,e,t){const r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}(t,e,this.logger))}}function uv(){return(uv=m(function*(n,e){const t=new zb(n);return yield t.initialize(),Kd.createController(t,e)})).apply(this,arguments)}class La{static createPublicClientApplication(e){return m(function*(){const t=yield function uq(n,e){return uv.apply(this,arguments)}(e);return new La(e,t)})()}constructor(e,t){this.isBroker=!1,this.controller=t||new Kd(new zb(e))}initialize(e){var t=this;return m(function*(){return t.controller.initialize(e,t.isBroker)})()}acquireTokenPopup(e){var t=this;return m(function*(){return t.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){var r=this;return m(function*(){return r.controller.hydrateCache(e,t)})()}clearCache(e){return this.controller.clearCache(e)}}let dq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=no({type:n,bootstrap:[pG,hG]})}static{this.\u0275inj=Dr({imports:[ij,fG.forRoot(new La({auth:{clientId:"da9762ef-4af4-4987-aefd-7c286c70e784",authority:"https://login.microsoftonline.com/29d45e57-3212-42ca-9229-0f0abdc4d331",redirectUri:"https://laurochagas.github.io/login-msal-angular/#/",postLogoutRedirectUri:"https://laurochagas.github.io/login-msal-angular/#/"}}),{interactionType:N.Redirect,authRequest:{scopes:["user.read"]}},{interactionType:N.Redirect,protectedResourceMap:new Map([["https://graph.microsoft.com/v1.0/me",["user.read"]]])})]})}}return n})();rj().bootstrapModule(dq).catch(n=>console.error(n))}},ue=>{ue(ue.s=60)}]);