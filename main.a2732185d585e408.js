"use strict";(self.webpackChunkmsal_angular_tutorial=self.webpackChunkmsal_angular_tutorial||[]).push([[792],{769:()=>{function fe(n){return"function"==typeof n}function Xi(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const oc=Xi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function es(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Lt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(fe(r))try{r()}catch(i){e=i instanceof oc?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Zv(i)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Zv(e);else{if(e instanceof Lt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&es(t,e)}remove(e){const{_finalizers:t}=this;t&&es(t,e),e instanceof Lt&&e._removeParent(this)}}Lt.EMPTY=(()=>{const n=new Lt;return n.closed=!0,n})();const Yv=Lt.EMPTY;function Jv(n){return n instanceof Lt||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function Zv(n){fe(n)?n():n.unsubscribe()}const Hr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ic={setTimeout(n,e,...t){const{delegate:r}=ic;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ic;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xv(n){ic.setTimeout(()=>{const{onUnhandledError:e}=Hr;if(!e)throw n;e(n)})}function Ih(){}const DM=wh("C",void 0,void 0);function wh(n,e,t){return{kind:n,value:e,error:t}}let Br=null;function sc(n){if(Hr.useDeprecatedSynchronousErrorHandling){const e=!Br;if(e&&(Br={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Br;if(Br=null,t)throw r}}else n()}class Th extends Lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jv(e)&&e.add(this)):this.destination=OM}static create(e,t,r){return new ts(e,t,r)}next(e){this.isStopped?Sh(function RM(n){return wh("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Sh(function bM(n){return wh("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sh(DM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kM=Function.prototype.bind;function _h(n,e){return kM.call(n,e)}class NM{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ac(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ac(r)}else ac(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ac(t)}}}class ts extends Th{constructor(e,t,r){let o;if(super(),fe(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Hr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&_h(e.next,i),error:e.error&&_h(e.error,i),complete:e.complete&&_h(e.complete,i)}):o=e}this.destination=new NM(o)}}function ac(n){Hr.useDeprecatedSynchronousErrorHandling?function MM(n){Hr.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=n)}(n):Xv(n)}function Sh(n,e){const{onStoppedNotification:t}=Hr;t&&ic.setTimeout(()=>t(n,e))}const OM={closed:!0,next:Ih,error:function PM(n){throw n},complete:Ih},Ah="function"==typeof Symbol&&Symbol.observable||"@@observable";function lr(n){return n}function eC(n){return 0===n.length?lr:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let xe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function LM(n){return n&&n instanceof Th||function FM(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}(n)&&Jv(n)}(t)?t:new ts(t,r,o);return sc(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=tC(r))((o,i)=>{const s=new ts({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ah](){return this}pipe(...t){return eC(t)(this)}toPromise(t){return new(t=tC(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function tC(n){var e;return null!==(e=n??Hr.Promise)&&void 0!==e?e:Promise}const UM=Xi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let wt=(()=>{class n extends xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new nC(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UM}next(t){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?Yv:(this.currentObservers=null,i.push(t),new Lt(()=>{this.currentObservers=null,es(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new xe;return t.source=this,t}}return n.create=(e,t)=>new nC(e,t),n})();class nC extends wt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Yv}}function rC(n){return fe(n?.lift)}function Ue(n){return e=>{if(rC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function He(n,e,t,r,o){return new HM(n,e,t,r,o)}class HM extends Th{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ne(n,e){return Ue((t,r)=>{let o=0;t.subscribe(He(r,i=>{r.next(n.call(e,i,o++))}))})}function ur(n){return this instanceof ur?(this.v=n,this):new ur(n)}function aC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Mh(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}(a,c,(s=n[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const cC=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function lC(n){return fe(n?.then)}function uC(n){return fe(n[Ah])}function dC(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function hC(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fC=function hk(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pC(n){return fe(n?.[fC])}function gC(n){return function sC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(g){return Promise.resolve(g).then(f,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(f,g){r[f]&&(o[f]=function(m){return new Promise(function(v,w){i.push([f,m,v,w])>1||c(f,m)})},g&&(o[f]=g(o[f])))}function c(f,g){try{!function l(f){f.value instanceof ur?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}(r[f](g))}catch(m){h(i[0][3],m)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield ur(t.read());if(o)return yield ur(void 0);yield yield ur(r)}}finally{t.releaseLock()}})}function mC(n){return fe(n?.getReader)}function Yt(n){if(n instanceof xe)return n;if(null!=n){if(uC(n))return function fk(n){return new xe(e=>{const t=n[Ah]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(cC(n))return function pk(n){return new xe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(lC(n))return function gk(n){return new xe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xv)})}(n);if(dC(n))return yC(n);if(pC(n))return function mk(n){return new xe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(mC(n))return function yk(n){return yC(gC(n))}(n)}throw hC(n)}function yC(n){return new xe(e=>{(function vk(n,e){var t,r,o,i;return function oC(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(s){s(i)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=aC(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function jn(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function ze(n,e,t=1/0){return fe(e)?ze((r,o)=>ne((i,s)=>e(r,i,o,s))(Yt(n(r,o))),t):("number"==typeof e&&(t=e),Ue((r,o)=>function Ck(n,e,t,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?g(m):c.push(m),g=m=>{i&&e.next(m),l++;let v=!1;Yt(t(m,u++)).subscribe(He(e,w=>{o?.(w),i?f(w):e.next(w)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){const w=c.shift();s?jn(e,s,()=>g(w)):g(w)}h()}catch(w){e.error(w)}}))};return n.subscribe(He(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function Eo(n=1/0){return ze(lr,n)}const on=new xe(n=>n.complete());function Nh(n){return n[n.length-1]}function ns(n){return function Ik(n){return n&&fe(n.schedule)}(Nh(n))?n.pop():void 0}function vC(n,e=0){return Ue((t,r)=>{t.subscribe(He(r,o=>jn(r,n,()=>r.next(o),e),()=>jn(r,n,()=>r.complete(),e),o=>jn(r,n,()=>r.error(o),e)))})}function CC(n,e=0){return Ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function EC(n,e){if(!n)throw new Error("Iterable cannot be null");return new xe(t=>{jn(t,e,()=>{const r=n[Symbol.asyncIterator]();jn(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function le(n,e){return e?function Rk(n,e){if(null!=n){if(uC(n))return function _k(n,e){return Yt(n).pipe(CC(e),vC(e))}(n,e);if(cC(n))return function Ak(n,e){return new xe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(lC(n))return function Sk(n,e){return Yt(n).pipe(CC(e),vC(e))}(n,e);if(dC(n))return EC(n,e);if(pC(n))return function Dk(n,e){return new xe(t=>{let r;return jn(t,e,()=>{r=n[fC](),jn(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>fe(r?.return)&&r.return()})}(n,e);if(mC(n))return function bk(n,e){return EC(gC(n),e)}(n,e)}throw hC(n)}(n,e):Yt(n)}class Ut extends wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function x(...n){return le(n,ns(n))}function IC(n={}){const{connector:e=(()=>new wt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},g=()=>{const m=s;f(),m?.unsubscribe()};return Ue((m,v)=>{l++,!d&&!u&&h();const w=c=c??e();v.add(()=>{l--,0===l&&!d&&!u&&(a=Ph(g,o))}),w.subscribe(v),!s&&l>0&&(s=new ts({next:C=>w.next(C),error:C=>{d=!0,h(),a=Ph(f,t,C),w.error(C)},complete:()=>{u=!0,h(),a=Ph(f,r),w.complete()}}),Yt(m).subscribe(s))})(i)}}function Ph(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ts({next:()=>{r.unsubscribe(),n()}});return Yt(e(...t)).subscribe(r)}function et(n,e){return Ue((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(He(r,c=>{o?.unsubscribe();let l=0;const u=i++;Yt(n(c,u)).subscribe(o=He(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Nk(n,e){return n===e}function ue(n){for(let e in n)if(n[e]===ue)return e;throw Error("Could not find renamed property on target object.")}function Be(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Be).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Oh(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Pk=ue({__forward_ref__:ue});function xh(n){return n.__forward_ref__=xh,n.toString=function(){return Be(this())},n}function j(n){return Fh(n)?n():n}function Fh(n){return"function"==typeof n&&n.hasOwnProperty(Pk)&&n.__forward_ref__===xh}function Lh(n){return n&&!!n.\u0275providers}const wC="https://g.co/ng/security#xss";class A extends Error{constructor(e,t){super(function lc(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function G(n){return"string"==typeof n?n:null==n?"":String(n)}function Uh(n,e){throw new A(-201,!1)}function Jt(n,e){null==n&&function U(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function uc(n){return TC(n,hc)||TC(n,_C)}function TC(n,e){return n.hasOwnProperty(e)?n[e]:null}function dc(n){return n&&(n.hasOwnProperty(Hh)||n.hasOwnProperty(jk))?n[Hh]:null}const hc=ue({\u0275prov:ue}),Hh=ue({\u0275inj:ue}),_C=ue({ngInjectableDef:ue}),jk=ue({ngInjectorDef:ue});var Y=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Y||{});let Bh;function Tt(n){const e=Bh;return Bh=n,e}function AC(n,e,t){const r=uc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Y.Optional?null:void 0!==e?e:void Uh(Be(n))}const ye=globalThis;class k{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rs={},zh="__NG_DI_FLAG__",fc="ngTempTokenPath",Gk=/\n/gm,bC="__source";let Io;function dr(n){const e=Io;return Io=n,e}function Kk(n,e=Y.Default){if(void 0===Io)throw new A(-203,!1);return null===Io?AC(n,void 0,e):Io.get(n,e&Y.Optional?null:void 0,e)}function b(n,e=Y.Default){return(function SC(){return Bh}()||Kk)(j(n),e)}function M(n,e=Y.Default){return b(n,pc(e))}function pc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qh(n){const e=[];for(let t=0;t<n.length;t++){const r=j(n[t]);if(Array.isArray(r)){if(0===r.length)throw new A(900,!1);let o,i=Y.Default;for(let s=0;s<r.length;s++){const a=r[s],c=Wk(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(b(o,i))}else e.push(b(r))}return e}function os(n,e){return n[zh]=e,n.prototype[zh]=e,n}function Wk(n){return n[zh]}function $n(n){return{toString:n}.toString()}var gc=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gc||{}),sn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(sn||{});const Tn={},re=[],mc=ue({\u0275cmp:ue}),Kh=ue({\u0275dir:ue}),Wh=ue({\u0275pipe:ue}),MC=ue({\u0275mod:ue}),Vn=ue({\u0275fac:ue}),is=ue({__NG_ELEMENT_ID__:ue}),kC=ue({__NG_ENV_ID__:ue});function NC(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function Qh(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];OC(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function PC(n){return 3===n||4===n||6===n}function OC(n){return 64===n.charCodeAt(0)}function ss(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||xC(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function xC(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}const FC="ng-template";function Jk(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==NC(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function LC(n){return 4===n.type&&n.value!==FC}function Zk(n,e,t){return e===(4!==n.type||t?n.value:FC)}function Xk(n,e,t){let r=4;const o=n.attrs||[],i=function nN(n){for(let e=0;e<n.length;e++)if(PC(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Zk(n,c,t)||""===c&&1===e.length){if(an(r))return!1;s=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!Jk(n.attrs,l,t)){if(an(r))return!1;s=!0}continue}const d=eN(8&r?"class":c,o,LC(n),t);if(-1===d){if(an(r))return!1;s=!0;continue}if(""!==l){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==NC(f,l,0)||2&r&&l!==h){if(an(r))return!1;s=!0}}}}else{if(!s&&!an(r)&&!an(c))return!1;if(s&&an(c))continue;s=!1,r=c|1&r}}return an(r)||s}function an(n){return 0==(1&n)}function eN(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function rN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function UC(n,e,t=!1){for(let r=0;r<e.length;r++)if(Xk(n,e[r],t))return!0;return!1}function HC(n,e){return n?":not("+e.trim()+")":e}function iN(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!an(s)&&(e+=HC(i,o),o=""),r=s,i=i||!an(r);t++}return""!==o&&(e+=HC(i,o)),e}function wo(n){return $n(()=>{const e=jC(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sn.Emulated,styles:n.styles||re,_:null,schemas:n.schemas||null,tView:null,id:""};$C(t);const r=n.dependencies;return t.directiveDefs=yc(r,!1),t.pipeDefs=yc(r,!0),t.id=function fN(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function lN(n){return X(n)||qe(n)}function uN(n){return null!==n}function Gn(n){return $n(()=>({type:n.type,bootstrap:n.bootstrap||re,declarations:n.declarations||re,imports:n.imports||re,exports:n.exports||re,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function BC(n,e){if(null==n)return Tn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function ct(n){return $n(()=>{const e=jC(n);return $C(e),e})}function X(n){return n[mc]||null}function qe(n){return n[Kh]||null}function lt(n){return n[Wh]||null}function Bt(n,e){const t=n[MC]||null;if(!t&&!0===e)throw new Error(`Type ${Be(n)} does not have '\u0275mod' property.`);return t}function jC(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Tn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||re,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BC(n.inputs,e),outputs:BC(n.outputs)}}function $C(n){n.features?.forEach(e=>e(n))}function yc(n,e){if(!n)return null;const t=e?lt:lN;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(uN)}const De=0,D=1,K=2,Te=3,cn=4,as=5,tt=6,_o=7,Re=8,hr=9,So=10,z=11,cs=12,VC=13,Ao=14,Me=15,ls=16,Do=17,_n=18,us=19,GC=20,fr=21,zn=22,ds=23,hs=24,J=25,Yh=1,zC=2,Sn=7,bo=9,Ke=11;function St(n){return Array.isArray(n)&&"object"==typeof n[Yh]}function ut(n){return Array.isArray(n)&&!0===n[Yh]}function Jh(n){return 0!=(4&n.flags)}function $r(n){return n.componentOffset>-1}function Cc(n){return 1==(1&n.flags)}function ln(n){return!!n.template}function Zh(n){return 0!=(512&n[K])}function Vr(n,e){return n.hasOwnProperty(Vn)?n[Vn]:null}let We=null,Ec=!1;function Zt(n){const e=We;return We=n,e}const WC={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function YC(n){if(!ps(n)||n.dirty){if(!n.producerMustRecompute(n)&&!XC(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ZC(n){n.dirty=!0,function JC(n){if(void 0===n.liveConsumerNode)return;const e=Ec;Ec=!0;try{for(const t of n.liveConsumerNode)t.dirty||ZC(t)}finally{Ec=e}}(n),n.consumerMarkedDirty?.(n)}function ef(n){return n&&(n.nextProducerIndex=0),Zt(n)}function tf(n,e){if(Zt(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ps(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ic(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function XC(n){Ro(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(YC(t),r!==t.version))return!0}return!1}function eE(n){if(Ro(n),ps(n))for(let e=0;e<n.producerNode.length;e++)Ic(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ic(n,e){if(function nE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ro(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ic(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Ro(o),o.producerIndexOfThis[r]=e}}function ps(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ro(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let rE=null;const aE=()=>{},AN=(()=>({...WC,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:aE}))();class DN{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Gr(){return cE}function cE(n){return n.type.prototype.ngOnChanges&&(n.setInput=RN),bN}function bN(){const n=uE(this),e=n?.current;if(e){const t=n.previous;if(t===Tn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RN(n,e,t,r){const o=this.declaredInputs[t],i=uE(n)||function MN(n,e){return n[lE]=e}(n,{previous:Tn,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new DN(c&&c.currentValue,e,a===Tn),n[r]=e}Gr.ngInherit=!0;const lE="__ngSimpleChanges__";function uE(n){return n[lE]||null}const An=function(n,e,t){};function ve(n){for(;Array.isArray(n);)n=n[De];return n}function At(n,e){return ve(e[n.index])}function fE(n,e){return n.data[e]}function jt(n,e){const t=e[n];return St(t)?t:t[De]}function gr(n,e){return null==e?null:n[e]}function pE(n){n[Do]=0}function FN(n){1024&n[K]||(n[K]|=1024,mE(n,1))}function gE(n){1024&n[K]&&(n[K]&=-1025,mE(n,-1))}function mE(n,e){let t=n[Te];if(null===t)return;t[as]+=e;let r=t;for(t=t[Te];null!==t&&(1===e&&1===r[as]||-1===e&&0===r[as]);)t[as]+=e,r=t,t=t[Te]}const H={lFrame:DE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function CE(){return H.bindingsEnabled}function T(){return H.lFrame.lView}function ee(){return H.lFrame.tView}function cf(n){return H.lFrame.contextLView=n,n[Re]}function lf(n){return H.lFrame.contextLView=null,n}function Qe(){let n=EE();for(;null!==n&&64===n.type;)n=n.parent;return n}function EE(){return H.lFrame.currentTNode}function Dn(n,e){const t=H.lFrame;t.currentTNode=n,t.isParent=e}function uf(){return H.lFrame.isParent}function No(){return H.lFrame.bindingIndex++}function WN(n,e){const t=H.lFrame;t.bindingIndex=t.bindingRootIndex=n,hf(e)}function hf(n){H.lFrame.currentDirectiveIndex=n}function pf(n){H.lFrame.currentQueryIndex=n}function YN(n){const e=n[D];return 2===e.type?e.declTNode:1===e.type?n[tt]:null}function SE(n,e,t){if(t&Y.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&Y.Host||(o=YN(i),null===o||(i=i[Ao],10&o.type))););if(null===o)return!1;e=o,n=i}const r=H.lFrame=AE();return r.currentTNode=e,r.lView=n,!0}function gf(n){const e=AE(),t=n[D];H.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AE(){const n=H.lFrame,e=null===n?null:n.child;return null===e?DE(n):e}function DE(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function bE(){const n=H.lFrame;return H.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const RE=bE;function mf(){const n=bE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ht(){return H.lFrame.selectedIndex}function zr(n){H.lFrame.selectedIndex=n}function Se(){const n=H.lFrame;return fE(n.tView,n.selectedIndex)}let kE=!0;function Tc(){return kE}function mr(n){kE=n}function _c(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Sc(n,e,t){NE(n,e,3,t)}function Ac(n,e,t,r){(3&n[K])===t&&NE(n,e,t,r)}function yf(n,e){let t=n[K];(3&t)===e&&(t&=8191,t+=1,n[K]=t)}function NE(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Do]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Do]+=65536),(a<i||-1==i)&&(oP(n,t,e,c),n[Do]=(4294901760&n[Do])+c+2),c++}function PE(n,e){An(4,n,e);const t=Zt(null);try{e.call(n)}finally{Zt(t),An(5,n,e)}}function oP(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];o?n[K]>>13<n[Do]>>16&&(3&n[K])===e&&(n[K]+=8192,PE(a,i)):PE(a,i)}const Po=-1;class ms{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Cf(n){return n!==Po}function ys(n){return 32767&n}function vs(n,e){let t=function cP(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ao],t--;return r}let Ef=!0;function Dc(n){const e=Ef;return Ef=n,e}const OE=255,xE=5;let lP=0;const bn={};function bc(n,e){const t=FE(n,e);if(-1!==t)return t;const r=e[D];r.firstCreatePass&&(n.injectorIndex=e.length,If(r.data,n),If(e,null),If(r.blueprint,null));const o=Rc(n,e),i=n.injectorIndex;if(Cf(o)){const s=ys(o),a=vs(o,e),c=a[D].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function If(n,e){n.push(0,0,0,0,0,0,0,0,e)}function FE(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Rc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=GE(o),null===r)return Po;if(t++,o=o[Ao],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Po}function wf(n,e,t){!function uP(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(is)&&(r=t[is]),null==r&&(r=t[is]=lP++);const o=r&OE;e.data[n+(o>>xE)]|=1<<o}(n,e,t)}function LE(n,e,t){if(t&Y.Optional||void 0!==n)return n;Uh()}function UE(n,e,t,r){if(t&Y.Optional&&void 0===r&&(r=null),!(t&(Y.Self|Y.Host))){const o=n[hr],i=Tt(void 0);try{return o?o.get(e,r,t&Y.Optional):AC(e,r,t&Y.Optional)}finally{Tt(i)}}return LE(r,0,t)}function HE(n,e,t,r=Y.Default,o){if(null!==n){if(2048&e[K]&&!(r&Y.Self)){const s=function mP(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&2048&s[K]&&!(512&s[K]);){const a=BE(i,s,t,r|Y.Self,bn);if(a!==bn)return a;let c=i.parent;if(!c){const l=s[GC];if(l){const u=l.get(t,bn,r);if(u!==bn)return u}c=GE(s),s=s[Ao]}i=c}return o}(n,e,t,r,bn);if(s!==bn)return s}const i=BE(n,e,t,r,bn);if(i!==bn)return i}return UE(e,t,r,o)}function BE(n,e,t,r,o){const i=function fP(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(is)?n[is]:void 0;return"number"==typeof e?e>=0?e&OE:gP:e}(t);if("function"==typeof i){if(!SE(e,n,r))return r&Y.Host?LE(o,0,r):UE(e,t,r,o);try{let s;if(s=i(r),null!=s||r&Y.Optional)return s;Uh()}finally{RE()}}else if("number"==typeof i){let s=null,a=FE(n,e),c=Po,l=r&Y.Host?e[Me][tt]:null;for((-1===a||r&Y.SkipSelf)&&(c=-1===a?Rc(n,e):e[a+8],c!==Po&&$E(r,!1)?(s=e[D],a=ys(c),e=vs(c,e)):a=-1);-1!==a;){const u=e[D];if(jE(i,a,u.data)){const d=hP(a,e,t,s,r,l);if(d!==bn)return d}c=e[a+8],c!==Po&&$E(r,e[D].data[a+8]===l)&&jE(i,a,e)?(s=u,a=ys(c),e=vs(c,e)):a=-1}}return o}function hP(n,e,t,r,o,i){const s=e[D],a=s.data[n+8],u=function Mc(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,c=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const g=s[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(o){const f=s[c];if(f&&ln(f)&&f.type===t)return c}return null}(a,s,t,null==r?$r(a)&&Ef:r!=s&&0!=(3&a.type),o&Y.Host&&i===a);return null!==u?qr(e,s,u,a):bn}function qr(n,e,t,r){let o=n[t];const i=e.data;if(function iP(n){return n instanceof ms}(o)){const s=o;s.resolving&&function Ok(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new A(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ae(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():G(n)}(i[t]));const a=Dc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Tt(s.injectImpl):null;SE(n,r,Y.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function rP(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=cE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}(t,i[t],e)}finally{null!==l&&Tt(l),Dc(a),s.resolving=!1,RE()}}return o}function jE(n,e,t){return!!(t[e+(n>>xE)]&1<<n)}function $E(n,e){return!(n&Y.Self||n&Y.Host&&e)}class ft{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return HE(this._tNode,this._lView,e,pc(r),t)}}function gP(){return new ft(Qe(),T())}function Tf(n){return Fh(n)?()=>{const e=Tf(j(n));return e&&e()}:Vr(n)}function GE(n){const e=n[D],t=e.type;return 2===t?e.declTNode:1===t?n[tt]:null}const xo="__parameters__";function Lo(n,e,t){return $n(()=>{const r=function _f(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(xo)?c[xo]:Object.defineProperty(c,xo,{value:[]})[xo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function Ho(n,e){n.forEach(t=>Array.isArray(t)?Ho(t,e):e(t))}function qE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Oc=os(Lo("Optional"),8),xc=os(Lo("SkipSelf"),4);function Bc(n){return 128==(128&n.flags)}var yr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yr||{});const Mf=new Map;let KP=0;const Nf="__ngContext__";function nt(n,e){St(e)?(n[Nf]=e[us],function QP(n){Mf.set(n[us],n)}(e)):n[Nf]=e}let Pf;function Of(n,e){return Pf(n,e)}function _s(n){const e=n[Te];return ut(e)?e[Te]:e}function fI(n){return gI(n[cs])}function pI(n){return gI(n[cn])}function gI(n){for(;null!==n&&!ut(n);)n=n[cn];return n}function Vo(n,e,t,r,o){if(null!=r){let i,s=!1;ut(r)?i=r:St(r)&&(s=!0,r=r[De]);const a=ve(r);0===n&&null!==t?null==o?CI(e,t,a):Kr(e,t,a,o||null,!0):1===n&&null!==t?Kr(e,t,a,o||null,!0):2===n?function Kc(n,e,t){const r=zc(n,e);r&&function pO(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function yO(n,e,t,r,o){const i=t[Sn];i!==ve(t)&&Vo(e,n,r,i,o);for(let a=Ke;a<t.length;a++){const c=t[a];As(c[D],c,n,e,r,i)}}(e,n,i,t,o)}}function Vc(n,e,t){return n.createElement(e,t)}function yI(n,e){const t=n[bo],r=t.indexOf(e);gE(e),t.splice(r,1)}function Gc(n,e){if(n.length<=Ke)return;const t=Ke+e,r=n[t];if(r){const o=r[ls];null!==o&&o!==n&&yI(o,r),e>0&&(n[t-1][cn]=r[cn]);const i=Nc(n,Ke+e);!function sO(n,e){As(n,e,e[z],2,null,null),e[De]=null,e[tt]=null}(r[D],r);const s=i[_n];null!==s&&s.detachView(i[D]),r[Te]=null,r[cn]=null,r[K]&=-129}return r}function Ff(n,e){if(!(256&e[K])){const t=e[z];e[ds]&&eE(e[ds]),e[hs]&&eE(e[hs]),t.destroyNode&&As(n,e,t,3,null,null),function lO(n){let e=n[cs];if(!e)return Lf(n[D],n);for(;e;){let t=null;if(St(e))t=e[cs];else{const r=e[Ke];r&&(t=r)}if(!t){for(;e&&!e[cn]&&e!==n;)St(e)&&Lf(e[D],e),e=e[Te];null===e&&(e=n),St(e)&&Lf(e[D],e),t=e&&e[cn]}e=t}}(e)}}function Lf(n,e){if(!(256&e[K])){e[K]&=-129,e[K]|=256,function fO(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof ms)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];An(4,a,c);try{c.call(a)}finally{An(5,a,c)}}else{An(4,o,i);try{i.call(o)}finally{An(5,o,i)}}}}}(n,e),function hO(n,e){const t=n.cleanup,r=e[_o];if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else t[i].call(r[t[i+1]]);null!==r&&(e[_o]=null);const o=e[fr];if(null!==o){e[fr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(n,e),1===e[D].type&&e[z].destroy();const t=e[ls];if(null!==t&&ut(e[Te])){t!==e[Te]&&yI(t,e);const r=e[_n];null!==r&&r.detachView(n)}!function YP(n){Mf.delete(n[us])}(e)}}function Uf(n,e,t){return function vI(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[De];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===sn.None||i===sn.Emulated)return null}return At(r,t)}}(n,e.parent,t)}function Kr(n,e,t,r,o){n.insertBefore(e,t,r,o)}function CI(n,e,t){n.appendChild(e,t)}function EI(n,e,t,r,o){null!==r?Kr(n,e,t,r,o):CI(n,e,t)}function zc(n,e){return n.parentNode(e)}let Hf,Vf,Qc,TI=function wI(n,e,t){return 40&n.type?At(n,t):null};function qc(n,e,t,r){const o=Uf(n,r,e),i=e[z],a=function II(n,e,t){return TI(n,e,t)}(r.parent||e[tt],r,e);if(null!=o)if(Array.isArray(t))for(let c=0;c<t.length;c++)EI(i,o,t[c],a,!1);else EI(i,o,t,a,!1);void 0!==Hf&&Hf(i,r,e,t,o)}function Ss(n,e){if(null!==e){const t=e.type;if(3&t)return At(e,n);if(4&t)return Bf(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ss(n,r);{const o=n[e.index];return ut(o)?Bf(-1,o):ve(o)}}if(32&t)return Of(e,n)()||ve(n[e.index]);{const r=SI(n,e);return null!==r?Array.isArray(r)?r[0]:Ss(_s(n[Me]),r):Ss(n,e.next)}}return null}function SI(n,e){return null!==e?n[Me][tt].projection[e.projection]:null}function Bf(n,e){const t=Ke+n+1;if(t<e.length){const r=e[t],o=r[D].firstChild;if(null!==o)return Ss(r,o)}return e[Sn]}function jf(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&nt(ve(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)jf(n,e,t.child,r,o,i,!1),Vo(e,n,o,a,i);else if(32&c){const l=Of(t,r);let u;for(;u=l();)Vo(e,n,o,u,i);Vo(e,n,o,a,i)}else 16&c?DI(n,e,r,t,o,i):Vo(e,n,o,a,i);t=s?t.projectionNext:t.next}}function As(n,e,t,r,o,i){jf(t,r,n.firstChild,e,o,i,!1)}function DI(n,e,t,r,o,i){const s=t[Me],c=s[tt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Vo(e,n,o,c[l],i);else{let l=c;const u=s[Te];Bc(r)&&(l.flags|=128),jf(n,e,l,u,o,i,!0)}}function bI(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RI(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&Qh(n,e,r),null!==o&&bI(n,e,o),null!==i&&function CO(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function NI(n){return function Gf(){if(void 0===Qc&&(Qc=null,ye.trustedTypes))try{Qc=ye.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qc}()?.createScriptURL(n)||n}class PI{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wC})`}}function vr(n){return n instanceof PI?n.changingThisBreaksApplicationSecurity:n}function Ds(n,e){const t=function RO(n){return n instanceof PI&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wC})`)}return t===e}const PO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var qo=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qo||{});function BI(n){const e=Rs();return e?e.sanitize(qo.URL,n)||"":Ds(n,"URL")?vr(n):function zf(n){return(n=String(n)).match(PO)?n:"unsafe:"+n}(G(n))}function jI(n){const e=Rs();if(e)return NI(e.sanitize(qo.RESOURCE_URL,n)||"");if(Ds(n,"ResourceURL"))return NI(vr(n));throw new A(904,!1)}function Rs(){const n=T();return n&&n[So].sanitizer}const Ms=new k("ENVIRONMENT_INITIALIZER"),VI=new k("INJECTOR",-1),GI=new k("INJECTOR_DEF_TYPES");class Qf{get(e,t=rs){if(t===rs){const r=new Error(`NullInjectorError: No provider for ${Be(e)}!`);throw r.name="NullInjectorError",r}return t}}function qO(...n){return{\u0275providers:zI(0,n),\u0275fromNgModule:!0}}function zI(n,...e){const t=[],r=new Set;let o;const i=s=>{t.push(s)};return Ho(e,s=>{const a=s;Jc(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&qI(o,i),t}function qI(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:o}=n[t];Jf(o,i=>{e(i,r)})}}function Jc(n,e,t,r){if(!(n=j(n)))return!1;let o=null,i=dc(n);const s=!i&&X(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const c=n.ngModule;if(i=dc(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Jc(l,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{Ho(i.imports,u=>{Jc(u,e,t,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&qI(l,e)}if(!a){const l=Vr(o)||(()=>new o);e({provide:o,useFactory:l,deps:re},o),e({provide:GI,useValue:o,multi:!0},o),e({provide:Ms,useValue:()=>b(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const l=n;Jf(c,u=>{e(u,l)})}}}return o!==n&&void 0!==n.providers}function Jf(n,e){for(let t of n)Lh(t)&&(t=t.\u0275providers),Array.isArray(t)?Jf(t,e):e(t)}const KO=ue({provide:String,useValue:ue});function Zf(n){return null!==n&&"object"==typeof n&&KO in n}function Wr(n){return"function"==typeof n}const Xf=new k("Set Injector scope."),Zc={},QO={};let ep;function Xc(){return void 0===ep&&(ep=new Qf),ep}class Vt{}class Ko extends Vt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,np(e,s=>this.processProvider(s)),this.records.set(VI,Wo(void 0,this)),o.has("environment")&&this.records.set(Vt,Wo(void 0,this));const i=this.records.get(Xf);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(GI.multi,re,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=dr(this),r=Tt(void 0);try{return e()}finally{dr(t),Tt(r)}}get(e,t=rs,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(kC))return e[kC](this);r=pc(r);const i=dr(this),s=Tt(void 0);try{if(!(r&Y.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function e0(n){return"function"==typeof n||"object"==typeof n&&n instanceof k}(e)&&uc(e);c=l&&this.injectableDefInScope(l)?Wo(tp(e),Zc):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Y.Self?Xc():this.parent).get(e,t=r&Y.Optional&&t===rs?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[fc]=a[fc]||[]).unshift(Be(e)),i)throw a;return function Qk(n,e,t,r){const o=n[fc];throw e[bC]&&o.unshift(e[bC]),n.message=function Yk(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let o=Be(e);if(Array.isArray(e))o=e.map(Be).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Be(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(Gk,"\n  ")}`}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[fc]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Tt(s),dr(i)}}resolveInjectorInitializers(){const e=dr(this),t=Tt(void 0);try{const o=this.get(Ms.multi,re,Y.Self);for(const i of o)i()}finally{dr(e),Tt(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Be(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(e){let t=Wr(e=j(e))?e:j(e&&e.provide);const r=function JO(n){return Zf(n)?Wo(void 0,n.useValue):Wo(function QI(n,e,t){let r;if(Wr(n)){const o=j(n);return Vr(o)||tp(o)}if(Zf(n))r=()=>j(n.useValue);else if(function WI(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...qh(n.deps||[]));else if(function KI(n){return!(!n||!n.useExisting)}(n))r=()=>b(j(n.useExisting));else{const o=j(n&&(n.useClass||n.provide));if(!function ZO(n){return!!n.deps}(n))return Vr(o)||tp(o);r=()=>new o(...qh(n.deps))}return r}(n),Zc)}(e);if(Wr(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=Wo(void 0,Zc,!0),o.factory=()=>qh(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Zc&&(t.value=QO,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XO(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=j(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function tp(n){const e=uc(n),t=null!==e?e.factory:Vr(n);if(null!==t)return t;if(n instanceof k)throw new A(204,!1);if(n instanceof Function)return function YO(n){const e=n.length;if(e>0)throw function Is(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new A(204,!1);const t=function Bk(n){return n&&(n[hc]||n[_C])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new A(204,!1)}function Wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function np(n,e){for(const t of n)Array.isArray(t)?np(t,e):t&&Lh(t)?np(t.\u0275providers,e):e(t)}const el=new k("AppId",{providedIn:"root",factory:()=>t0}),t0="ng",YI=new k("Platform Initializer"),Qr=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),JI=new k("CSP nonce",{providedIn:"root",factory:()=>function zo(){if(void 0!==Vf)return Vf;if(typeof document<"u")return document;throw new A(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ZI=(n,e,t)=>null;function up(n,e,t=!1){return ZI(n,e,t)}class h0{}class tw{}class p0{resolveComponentFactory(e){throw function f0(n){const e=Error(`No component factory found for ${Be(n)}.`);return e.ngComponent=n,e}(e)}}let sl=(()=>{class n{static{this.NULL=new p0}}return n})();function g0(){return Jo(Qe(),T())}function Jo(n,e){return new Cr(At(n,e))}let Cr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=g0}}return n})();class rw{}let al=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function y0(){const n=T(),t=jt(Qe().index,n);return(St(t)?t:n)[z]}()}}return n})(),v0=(()=>{class n{static{this.\u0275prov=F({token:n,providedIn:"root",factory:()=>null})}}return n})();class cl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const C0=new cl("16.2.12"),fp={};function aw(n,e=null,t=null,r){const o=cw(n,e,t,r);return o.resolveInjectorInitializers(),o}function cw(n,e=null,t=null,r,o=new Set){const i=[t||re,qO(n)];return r=r||("object"==typeof n?void 0:Be(n)),new Ko(i,e||Xc(),r||null,o)}let Gt=(()=>{class n{static{this.THROW_IF_NOT_FOUND=rs}static{this.NULL=new Qf}static create(t,r){if(Array.isArray(t))return aw({name:""},r,t,"");{const o=t.name??"";return aw({name:o},t.parent,t.providers,o)}}static{this.\u0275prov=F({token:n,providedIn:"any",factory:()=>b(VI)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function gp(n){return n.ngOriginalError}class Qn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&gp(e);for(;t&&gp(t);)t=gp(t);return t||null}}function mp(n){return e=>{setTimeout(n,void 0,e)}}const pt=class D0 extends wt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=mp(i),o&&(o=mp(o)),s&&(s=mp(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof Lt&&e.add(a),a}};function uw(...n){}class Ce{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function b0(){const n="function"==typeof ye.requestAnimationFrame;let e=ye[n?"requestAnimationFrame":"setTimeout"],t=ye[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function k0(n){const e=()=>{!function M0(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ye,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,vp(n),n.isCheckStableRunning=!0,yp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),vp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{if(function P0(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(o,i,s,a);try{return dw(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),hw(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return dw(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),hw(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,vp(n),yp(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ce.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(Ce.isInAngularZone())throw new A(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,R0,uw,uw);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const R0={};function yp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function vp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hw(n){n._nesting--,yp(n)}class N0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}const fw=new k("",{providedIn:"root",factory:pw});function pw(){const n=M(Ce);let e=!0;return function Mk(...n){const e=ns(n),t=function Tk(n,e){return"number"==typeof Nh(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Yt(r[0]):Eo(t)(le(r,e)):on}(new xe(o=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{o.next(e),o.complete()})}),new xe(o=>{let i;n.runOutsideAngular(()=>{i=n.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,o.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(IC()))}function Yn(n){return n instanceof Function?n():n}let Cp=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Ps(n){for(;n;){n[K]|=64;const e=_s(n);if(Zh(n)&&!e)return n;n=e}return null}const Cw=new k("",{providedIn:"root",factory:()=>!1});let dl=null;function Tw(n,e){return n[e]??Aw()}function _w(n,e){const t=Aw();t.producerNode?.length&&(n[e]=dl,t.lView=n,dl=Sw())}const V0={...WC,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ps(n.lView)},lView:null};function Sw(){return Object.create(V0)}function Aw(){return dl??=Sw(),dl}const q={};function rt(n){Dw(ee(),T(),ht()+n,!1)}function Dw(n,e,t,r){if(!r)if(3==(3&e[K])){const i=n.preOrderCheckHooks;null!==i&&Sc(e,i,t)}else{const i=n.preOrderHooks;null!==i&&Ac(e,i,0,t)}zr(t)}function L(n,e=Y.Default){const t=T();return null===t?b(n,e):HE(Qe(),t,j(n),e)}function hl(n,e,t,r,o,i,s,a,c,l,u){const d=e.blueprint.slice();return d[De]=o,d[K]=140|r,(null!==l||n&&2048&n[K])&&(d[K]|=2048),pE(d),d[Te]=d[Ao]=n,d[Re]=t,d[So]=s||n&&n[So],d[z]=a||n&&n[z],d[hr]=c||n&&n[hr]||null,d[tt]=i,d[us]=function WP(){return KP++}(),d[zn]=u,d[GC]=l,d[Me]=2==e.type?n[Me]:d,d}function ei(n,e,t,r,o){let i=n.data[e];if(null===i)i=function Ep(n,e,t,r,o){const i=EE(),s=uf(),c=n.data[e]=function J0(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function ko(){return null!==H.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(n,e,t,r,o),function KN(){return H.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function gs(){const n=H.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Dn(i,!0),i}function Os(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function Rw(n,e,t,r,o){const i=Tw(e,ds),s=ht(),a=2&r;try{zr(-1),a&&e.length>J&&Dw(n,e,J,!1),An(a?2:0,o);const l=a?i:null,u=ef(l);try{null!==l&&(l.dirty=!1),t(r,o)}finally{tf(l,u)}}finally{a&&null===e[ds]&&_w(e,ds),zr(s),An(a?3:1,o)}}function Ip(n,e,t){if(Jh(e)){const r=Zt(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Zt(r)}}}function wp(n,e,t){CE()&&(function ox(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;$r(t)&&function dx(n,e,t){const r=At(e,n),o=Mw(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=fl(n,hl(n,o,null,s,r,e,null,n[So].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||bc(t,e),nt(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const c=n.data[a],l=qr(e,n,a,t);nt(l,e),null!==s&&hx(0,a-o,l,c,0,s),ln(c)&&(jt(t.index,e)[Re]=qr(e,n,a,t))}}(n,e,t,At(t,e)),64==(64&t.flags)&&xw(n,e,t))}function Tp(n,e,t=At){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}function Mw(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=_p(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _p(n,e,t,r,o,i,s,a,c,l,u){const d=J+r,h=d+o,f=function z0(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:q);return t}(d,h),g="function"==typeof l?l():l;return f[D]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}let kw=n=>null;function Nw(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?Pw(t,e,o,i):r.hasOwnProperty(o)&&Pw(t,e,r[o],i)}return t}function Pw(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Sp(n,e,t,r){if(CE()){const o=null===r?null:{"":-1},i=function sx(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(UC(e,s.selectors,!1))if(r||(r=[]),ln(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Ap(n,e,a.length)}else r.unshift(s),Ap(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Ow(n,e,t,s,o,a),o&&function ax(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new A(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=ss(t.mergedAttrs,t.attrs)}function Ow(n,e,t,r,o,i){for(let l=0;l<r.length;l++)wf(bc(t,e),n,r[l].type);!function lx(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Os(n,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];t.mergedAttrs=ss(t.mergedAttrs,u.hostAttrs),ux(n,t,e,c,u),cx(c,u,o),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Z0(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=t?t.get(d):null,g=h?h.outputs:null;c=Nw(d.inputs,u,c,h?h.inputs:null),l=Nw(d.outputs,u,l,g);const m=null===c||null===s||LC(e)?null:fx(c,u,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,i)}function xw(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function QN(){return H.lFrame.currentDirectiveIndex}();try{zr(i);for(let a=r;a<o;a++){const c=n.data[a],l=e[a];hf(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&ix(c,l)}}finally{zr(-1),hf(s)}}function ix(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ap(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function cx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ln(e)&&(t[""]=n)}}function ux(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=Vr(o.type)),s=new ms(i,ln(o),L);n.blueprint[r]=s,t[r]=s,function nx(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function rx(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,Os(n,t,o.hostVars,q),o)}function Rn(n,e,t,r,o,i){const s=At(n,e);!function Dp(n,e,t,r,o,i,s){if(null==i)n.removeAttribute(e,o,t);else{const a=null==s?G(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}(e[z],s,i,n.value,t,r,o)}function hx(n,e,t,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;)Fw(r,t,s[a++],s[a++],s[a++])}function Fw(n,e,t,r,o){const i=Zt(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(e,o)),null!==n.setInput?n.setInput(e,o,t,r):e[r]=o}finally{Zt(i)}}function fx(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Lw(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function Uw(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=n.data[i];pf(t[r]),s.contentQueries(2,e[i],i)}}}function fl(n,e){return n[cs]?n[VC][cn]=e:n[cs]=e,n[VC]=e,e}function bp(n,e,t){pf(0);const r=Zt(null);try{e(n,t)}finally{Zt(r)}}function $w(n,e){const t=n[hr],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function Rp(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++];Fw(n.data[s],e[s],r,a,o)}}function Jn(n,e,t){const r=function wc(n,e){return ve(e[n])}(e,n);!function mI(n,e,t){n.setValue(e,t)}(n[z],r,t)}function px(n,e){const t=jt(e,n),r=t[D];!function gx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const o=t[De];null!==o&&null===t[zn]&&(t[zn]=up(o,t[hr])),Mp(r,t,t[Re])}function Mp(n,e,t){gf(e);try{const r=n.viewQuery;null!==r&&bp(1,r,t);const o=n.template;null!==o&&Rw(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Uw(n,e),n.staticViewQueries&&bp(2,n.viewQuery,t);const i=n.components;null!==i&&function mx(n,e){for(let t=0;t<e.length;t++)px(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[K]&=-5,mf()}}let Vw=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,o){const i=typeof Zone>"u"?null:Zone.current,s=function SN(n,e,t){const r=Object.create(AN);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const o=s=>{r.cleanupFn=s};return r.ref={notify:()=>ZC(r),run:()=>{if(r.dirty=!1,r.hasRun&&!XC(r))return;r.hasRun=!0;const s=ef(r);try{r.cleanupFn(),r.cleanupFn=aE,r.fn(o)}finally{tf(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,i)},o);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}}return n})();function pl(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Oh(o,a):2==i&&(r=Oh(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function xs(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];null!==i&&r.push(ve(i)),ut(i)&&Gw(i,r);const s=t.type;if(8&s)xs(n,e,t.child,r);else if(32&s){const a=Of(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=SI(e,t);if(Array.isArray(a))r.push(...a);else{const c=_s(e[Me]);xs(c[D],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function Gw(n,e){for(let t=Ke;t<n.length;t++){const r=n[t],o=r[D].firstChild;null!==o&&xs(r[D],r,o,e)}n[Sn]!==n[De]&&e.push(n[Sn])}function gl(n,e,t,r=!0){const o=e[So],i=o.rendererFactory,s=o.afterRenderEventManager;i.begin?.(),s?.begin();try{zw(n,e,n.template,t)}catch(c){throw r&&$w(e,c),c}finally{i.end?.(),o.effectManager?.flush(),s?.end()}}function zw(n,e,t,r){const o=e[K];if(256!=(256&o)){e[So].effectManager?.flush(),gf(e);try{pE(e),function wE(n){return H.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Rw(n,e,t,2,r);const s=3==(3&o);if(s){const l=n.preOrderCheckHooks;null!==l&&Sc(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Ac(e,l,0,null),yf(e,0)}if(function Cx(n){for(let e=fI(n);null!==e;e=pI(e)){if(!e[zC])continue;const t=e[bo];for(let r=0;r<t.length;r++){FN(t[r])}}}(e),qw(e,2),null!==n.contentQueries&&Uw(n,e),s){const l=n.contentCheckHooks;null!==l&&Sc(e,l)}else{const l=n.contentHooks;null!==l&&Ac(e,l,1),yf(e,1)}!function G0(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=Tw(e,hs);try{for(let o=0;o<t.length;o++){const i=t[o];if(i<0)zr(~i);else{const s=i,a=t[++o],c=t[++o];WN(a,s),r.dirty=!1;const l=ef(r);try{c(2,e[s])}finally{tf(r,l)}}}}finally{null===e[hs]&&_w(e,hs),zr(-1)}}(n,e);const a=n.components;null!==a&&Ww(e,a,0);const c=n.viewQuery;if(null!==c&&bp(2,c,r),s){const l=n.viewCheckHooks;null!==l&&Sc(e,l)}else{const l=n.viewHooks;null!==l&&Ac(e,l,2),yf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[K]&=-73,gE(e)}finally{mf()}}}function qw(n,e){for(let t=fI(n);null!==t;t=pI(t))for(let r=Ke;r<t.length;r++)Kw(t[r],e)}function Ex(n,e,t){Kw(jt(e,n),t)}function Kw(n,e){if(!function ON(n){return 128==(128&n[K])}(n))return;const t=n[D],r=n[K];if(80&r&&0===e||1024&r||2===e)zw(t,n,t.template,n[Re]);else if(n[as]>0){qw(n,1);const o=t.components;null!==o&&Ww(n,o,1)}}function Ww(n,e,t){for(let r=0;r<e.length;r++)Ex(n,e[r],t)}class Fs{get rootNodes(){const e=this._lView,t=e[D];return xs(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Re]}set context(e){this._lView[Re]=e}get destroyed(){return 256==(256&this._lView[K])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Te];if(ut(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Gc(e,r),Nc(t,r))}this._attachedToViewContainer=!1}Ff(this._lView[D],this._lView)}onDestroy(e){!function yE(n,e){if(256==(256&n[K]))throw new A(911,!1);null===n[fr]&&(n[fr]=[]),n[fr].push(e)}(this._lView,e)}markForCheck(){Ps(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){this._lView[K]|=128}detectChanges(){gl(this._lView[D],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cO(n,e){As(n,e,e[z],2,null,null)}(this._lView[D],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e}}class Ix extends Fs{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;gl(e[D],e,e[Re],!1)}checkNoChanges(){}get context(){return null}}class Qw extends sl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=X(e);return new Ls(t,this.ngModule)}}function Yw(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Tx{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=pc(r);const o=this.injector.get(e,fp,r);return o!==fp||t===fp?o:this.parentInjector.get(e,t,r)}}class Ls extends tw{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=Yw(e.inputs);if(null!==t)for(const o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return Yw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function sN(n){return n.map(iN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof Vt?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new Tx(e,i):e,a=s.get(rw,null);if(null===a)throw new A(407,!1);const d={rendererFactory:a,sanitizer:s.get(v0,null),effectManager:s.get(Vw,null),afterRenderEventManager:s.get(Cp,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?function q0(n,e,t,r){const i=r.get(Cw,!1)||t===sn.ShadowDom,s=n.selectRootElement(e,i);return function K0(n){kw(n)}(s),s}(h,r,this.componentDef.encapsulation,s):Vc(h,f,function wx(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),w=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let C=null;null!==g&&(C=up(g,s,!0));const S=_p(0,null,null,1,0,null,null,null,null,null,null),P=hl(null,S,null,w,null,null,d,h,s,null,C);let B,Oe;gf(P);try{const Ft=this.componentDef;let Co,Qv=null;Ft.findHostDirectiveDefs?(Co=[],Qv=new Map,Ft.findHostDirectiveDefs(Ft,Co,Qv),Co.push(Ft)):Co=[Ft];const JK=function Sx(n,e){const t=n[D],r=J;return n[r]=e,ei(t,r,2,"#host",null)}(P,g),ZK=function Ax(n,e,t,r,o,i,s){const a=o[D];!function Dx(n,e,t,r){for(const o of n)e.mergedAttrs=ss(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(pl(e,e.mergedAttrs,!0),null!==t&&RI(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=up(e,o[hr]));const l=i.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=hl(o,Mw(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&Ap(a,n,r.length-1),fl(o,d),o[n.index]=d}(JK,g,Ft,Co,P,d,h);Oe=fE(S,J),g&&function Rx(n,e,t,r){if(r)Qh(n,t,["ng-version",C0.full]);else{const{attrs:o,classes:i}=function aN(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!an(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&Qh(n,t,o),i&&i.length>0&&bI(n,t,i.join(" "))}}(h,Ft,g,r),void 0!==t&&function Mx(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(Oe,this.ngContentSelectors,t),B=function bx(n,e,t,r,o,i){const s=Qe(),a=o[D],c=At(s,o);Ow(a,o,s,t,null,r);for(let u=0;u<t.length;u++)nt(qr(o,a,s.directiveStart+u,s),o);xw(a,o,s),c&&nt(c,o);const l=qr(o,a,s.directiveStart+s.componentOffset,s);if(n[Re]=o[Re]=l,null!==i)for(const u of i)u(l,e);return Ip(a,s,n),l}(ZK,Ft,Co,Qv,P,[kx]),Mp(S,P,null)}finally{mf()}return new _x(this.componentType,B,Jo(Oe,P),P,Oe)}}class _x extends h0{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ix(o),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const i=this._rootLView;Rp(i[D],i,o,e,t),this.previousInputValues.set(e,t),Ps(jt(this._tNode.index,i))}}get injector(){return new ft(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function kx(){const n=Qe();_c(T()[D],n)}function nT(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];Array.isArray(o)&&o[2]&&(t[r]=o[2])}n.inputTransforms=t}function ot(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Np(n,e,t,r){const o=T();return ot(o,No(),e)&&(ee(),Rn(Se(),o,n,e,t,r)),Np}function wl(n,e,t,r,o,i,s,a){const c=T(),l=ee(),u=n+J,d=l.firstCreatePass?function sF(n,e,t,r,o,i,s,a,c){const l=e.consts,u=ei(e,n,4,s||null,gr(l,a));Sp(e,t,u,gr(l,c)),_c(e,u);const d=u.tView=_p(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,o,i,s):l.data[u];Dn(d,!1);const h=gT(l,c,d,n);Tc()&&qc(l,c,h,d),nt(h,c),fl(c,c[u]=Lw(h,c,h,d)),Cc(d)&&wp(l,c,d),null!=s&&Tp(c,d,a)}let gT=function mT(n,e,t,r){return mr(!0),e[z].createComment("")};function ui(n,e,t){const r=T();return ot(r,No(),e)&&function zt(n,e,t,r,o,i,s,a){const c=At(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Rp(n,t,u,r,o),$r(e)&&function ex(n,e){const t=jt(e,n);16&t[K]||(t[K]|=64)}(t,e.index)):3&e.type&&(r=function X0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(c,r,o))}(ee(),Se(),r,n,e,r[z],t,!1),ui}function Up(n,e,t,r,o){const s=o?"class":"style";Rp(n,t,e.inputs[s],s,r)}function we(n,e,t,r){const o=T(),i=ee(),s=J+n,a=o[z],c=i.firstCreatePass?function dF(n,e,t,r,o,i){const s=e.consts,c=ei(e,n,2,r,gr(s,o));return Sp(e,t,c,gr(s,i)),null!==c.attrs&&pl(c,c.attrs,!1),null!==c.mergedAttrs&&pl(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,e,t,r):i.data[s],l=yT(i,o,c,a,e,n);o[s]=l;const u=Cc(c);return Dn(c,!0),RI(a,l,c),32!=(32&c.flags)&&Tc()&&qc(i,o,l,c),0===function UN(){return H.lFrame.elementDepthCount}()&&nt(l,o),function HN(){H.lFrame.elementDepthCount++}(),u&&(wp(i,o,c),Ip(i,c,o)),null!==r&&Tp(o,c),we}function Z(){let n=Qe();uf()?function df(){H.lFrame.isParent=!1}():(n=n.parent,Dn(n,!1));const e=n;(function jN(n){return H.skipHydrationRootTNode===n})(e)&&function zN(){H.skipHydrationRootTNode=null}(),function BN(){H.lFrame.elementDepthCount--}();const t=ee();return t.firstCreatePass&&(_c(t,n),Jh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function sP(n){return 0!=(8&n.flags)}(e)&&Up(t,e,T(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function aP(n){return 0!=(16&n.flags)}(e)&&Up(t,e,T(),e.stylesWithoutHost,!1),Z}function di(n,e,t,r){return we(n,e,t,r),Z(),di}let yT=(n,e,t,r,o,i)=>(mr(!0),Vc(r,o,function ME(){return H.lFrame.currentNamespace}()));function jp(){return T()}function Tl(n){return!!n&&"function"==typeof n.then}function ET(n){return!!n&&"function"==typeof n.subscribe}function $s(n,e,t,r){const o=T(),i=ee(),s=Qe();return function wT(n,e,t,r,o,i,s){const a=Cc(r),l=n.firstCreatePass&&function Bw(n){return n.cleanup||(n.cleanup=[])}(n),u=e[Re],d=function Hw(n){return n[_o]||(n[_o]=[])}(e);let h=!0;if(3&r.type||s){const m=At(r,e),v=s?s(m):m,w=d.length,C=s?P=>s(ve(P[r.index])):r.index;let S=null;if(!s&&a&&(S=function yF(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[_o],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=i,S.__ngLastListenerFn__=i,h=!1;else{i=_T(r,e,u,i,!1);const P=t.listen(v,o,i);d.push(i,P),l&&l.push(o,C,w,w+1)}}else i=_T(r,e,u,i,!1);const f=r.outputs;let g;if(h&&null!==f&&(g=f[o])){const m=g.length;if(m)for(let v=0;v<m;v+=2){const B=e[g[v]][g[v+1]].subscribe(i),Oe=d.length;d.push(i,B),l&&l.push(o,r.index,Oe,-(Oe+1))}}}(i,o,o[z],s,n,e,r),$s}function TT(n,e,t,r){try{return An(6,e,t),!1!==t(r)}catch(o){return $w(n,o),!1}finally{An(7,e,t)}}function _T(n,e,t,r,o){return function i(s){if(s===Function)return r;Ps(n.componentOffset>-1?jt(n.index,e):e);let c=TT(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)c=TT(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function $p(n=1){return function JN(n){return(H.lFrame.contextLView=function ZN(n,e){for(;n>0;)e=e[Ao],n--;return e}(n,H.lFrame.contextLView))[Re]}(n)}function oe(n,e=""){const t=T(),r=ee(),o=n+J,i=r.firstCreatePass?ei(r,o,1,e,null):r.data[o],s=QT(r,t,i,e,n);t[o]=s,Tc()&&qc(r,t,s,i),Dn(i,!1)}let QT=(n,e,t,r,o)=>(mr(!0),function $c(n,e){return n.createText(e)}(e[z],r));function gt(n,e,t){const r=T(),o=function ni(n,e,t,r){return ot(n,No(),t)?e+G(t)+r:q}(r,n,e,t);return o!==q&&Jn(r,ht(),o),gt}const pi="en-US";let v_=pi;class Xr{}class G_{}class eg extends Xr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qw(this);const o=Bt(e);this._bootstrapComponents=Yn(o.bootstrap),this._r3Injector=cw(e,t,[{provide:Xr,useValue:this},{provide:sl,useValue:this.componentFactoryResolver},...r],Be(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class tg extends G_{constructor(e){super(),this.moduleType=e}create(e){return new eg(this.moduleType,e,[])}}class z_ extends Xr{constructor(e){super(),this.componentFactoryResolver=new Qw(this),this.instance=null;const t=new Ko([...e.providers,{provide:Xr,useValue:this},{provide:sl,useValue:this.componentFactoryResolver}],e.parent||Xc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ng(n,e,t=null){return new z_({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let f1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=zI(0,t.type),o=r.length>0?ng([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=F({token:n,providedIn:"environment",factory:()=>new n(b(Vt))})}}return n})();function q_(n){n.getStandaloneInjector=e=>e.get(f1).getOrCreateStandaloneInjector(n)}function X_(n,e,t){const r=function dt(){const n=H.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}()+n,o=T();return o[r]===q?function Mn(n,e,t){return n[e]=t}(o,r,t?e.call(t):e()):function Us(n,e){return n[e]}(o,r)}function B1(n,e,t,r=!0){const o=e[D];if(function uO(n,e,t,r){const o=Ke+r,i=t.length;r>0&&(t[o-1][cn]=e),r<i-Ke?(e[cn]=t[o],qE(t,Ke+r,e)):(t.push(e),e[cn]=null),e[Te]=t;const s=e[ls];null!==s&&t!==s&&function dO(n,e){const t=n[bo];e[Me]!==e[Te][Te][Me]&&(n[zC]=!0),null===t?n[bo]=[e]:t.push(e)}(s,e);const a=e[_n];null!==a&&a.insertView(n),e[K]|=128}(o,e,n,t),r){const i=Bf(t,n),s=e[z],a=zc(s,n[Sn]);null!==a&&function aO(n,e,t,r,o,i){r[De]=o,r[tt]=e,As(n,r,t,1,o,i)}(o,n[tt],s,e,a,i)}}let Zn=(()=>{class n{static{this.__NG_ELEMENT_ID__=V1}}return n})();const j1=Zn,$1=class extends j1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const o=function H1(n,e,t,r){const o=e.tView,a=hl(n,o,t,4096&n[K]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ls]=n[e.index];const l=n[_n];return null!==l&&(a[_n]=l.createEmbeddedView(o)),Mp(o,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Fs(o)}};function V1(){return function Ml(n,e){return 4&n.type?new $1(e,n,Jo(n,e)):null}(Qe(),T())}let hn=(()=>{class n{static{this.__NG_ELEMENT_ID__=Q1}}return n})();function Q1(){return function dS(n,e){let t;const r=e[n.index];return ut(r)?t=r:(t=Lw(r,e,null,n),e[n.index]=t,fl(e,t)),hS(t,e,n,r),new lS(t,n,e)}(Qe(),T())}const Y1=hn,lS=class extends Y1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Jo(this._hostTNode,this._hostLView)}get injector(){return new ft(this._hostTNode,this._hostLView)}get parentInjector(){const e=Rc(this._hostTNode,this._hostLView);if(Cf(e)){const t=vs(e,this._hostLView),r=ys(e);return new ft(t[D].data[r+8],t)}return new ft(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=uS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(t||{},i,null);return this.insertImpl(a,o,false),a}createComponent(e,t,r,o,i){const s=e&&!function Es(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const m=t||{};a=m.index,r=m.injector,o=m.projectableNodes,i=m.environmentInjector||m.ngModuleRef}const c=s?e:new Ls(X(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const v=(s?l:this.parentInjector).get(Vt,null);v&&(i=v)}X(c.componentType??{});const f=c.create(l,o,null,i);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const o=e._lView;if(function xN(n){return ut(n[Te])}(o)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=o[Te],u=new lS(l,l[tt],l[Te]);u.detach(u.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return B1(a,o,s,!r),e.attachToViewContainerRef(),qE(ig(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=uS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Gc(this._lContainer,t);r&&(Nc(ig(this._lContainer),t),Ff(r[D],r))}detach(e){const t=this._adjustIndex(e,-1),r=Gc(this._lContainer,t);return r&&null!=Nc(ig(this._lContainer),t)?new Fs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uS(n){return n[8]}function ig(n){return n[8]||(n[8]=[])}let hS=function fS(n,e,t,r){if(n[Sn])return;let o;o=8&t.type?ve(r):function J1(n,e){const t=n[z],r=t.createComment(""),o=At(e,n);return Kr(t,zc(t,o),r,function gO(n,e){return n.nextSibling(e)}(t,o),!1),r}(e,t),n[Sn]=o};const mg=new k("Application Initializer");let yg=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=M(mg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const i=o();if(Tl(i))t.push(i);else if(ET(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),US=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Xn=new k("LocaleId",{providedIn:"root",factory:()=>M(Xn,Y.Optional|Y.SkipSelf)||function bU(){return typeof $localize<"u"&&$localize.locale||pi}()});let Pl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class kU{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let HS=(()=>{class n{compileModuleSync(t){return new tg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=Yn(Bt(t).declarations).reduce((s,a)=>{const c=X(a);return c&&s.push(new Ls(c)),s},[]);return new kU(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const VS=new k(""),xl=new k("");let wg,Eg=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,wg||(function XU(n){wg=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static{this.\u0275fac=function(r){return new(r||n)(b(Ce),b(Ig),b(xl))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})(),Ig=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return wg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ir=null;const GS=new k("AllowMultipleToken"),Tg=new k("PlatformDestroyListeners"),_g=new k("appBootstrapListener");class qS{constructor(e,t){this.name=e,this.token=t}}function WS(n,e,t=[]){const r=`Platform: ${e}`,o=new k(r);return(i=[])=>{let s=Sg();if(!s||s.injector.get(GS,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function nH(n){if(Ir&&!Ir.get(GS,!1))throw new A(400,!1);(function zS(){!function EN(n){rE=n}(()=>{throw new A(600,!1)})})(),Ir=n;const e=n.get(YS);(function KS(n){n.get(YI,null)?.forEach(t=>t())})(n)}(function QS(n=[],e){return Gt.create({name:e,providers:[{provide:Xf,useValue:"platform"},{provide:Tg,useValue:new Set([()=>Ir=null])},...n]})}(a,r))}return function oH(n){const e=Sg();if(!e)throw new A(401,!1);return e}()}}function Sg(){return Ir?.get(YS)??null}let YS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function iH(n="zone.js",e){return"noop"===n?new N0:"zone.js"===n?new Ce(e):n}(r?.ngZone,function JS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function h1(n,e,t){return new eg(n,e,t)}(t.moduleType,this.injector,function nA(n){return[{provide:Ce,useFactory:n},{provide:Ms,multi:!0,useFactory:()=>{const e=M(aH,{optional:!0});return()=>e.initialize()}},{provide:tA,useFactory:sH},{provide:fw,useFactory:pw}]}(()=>o)),s=i.injector.get(Qn,null);return o.runOutsideAngular(()=>{const a=o.onError.subscribe({next:c=>{s.handleError(c)}});i.onDestroy(()=>{Fl(this._modules,i),a.unsubscribe()})}),function ZS(n,e,t){try{const r=t();return Tl(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,o,()=>{const a=i.injector.get(yg);return a.runInitializers(),a.donePromise.then(()=>(function C_(n){Jt(n,"Expected localeId to be defined"),"string"==typeof n&&(v_=n.toLowerCase().replace(/_/g,"-"))}(i.injector.get(Xn,pi)||pi),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,r=[]){const o=XS({},r);return function eH(n,e,t){const r=new tg(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(yi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new A(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new A(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Tg,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(b(Gt))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function XS(n,e){return Array.isArray(e)?e.reduce(XS,n):{...n,...e}}let yi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(tA),this.zoneIsStable=M(fw),this.componentTypes=[],this.components=[],this.isStable=M(Pl).hasPendingTasks.pipe(et(t=>t?x(!1):this.zoneIsStable),function kk(n,e=lr){return n=n??Nk,Ue((t,r)=>{let o,i=!0;t.subscribe(He(r,s=>{const a=e(s);(i||!n(o,a))&&(i=!1,o=a,r.next(s))}))})}(),IC()),this._injector=M(Vt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const o=t instanceof tw;if(!this._injector.get(yg).done)throw!o&&function To(n){const e=X(n)||qe(n)||lt(n);return null!==e&&e.standalone}(t),new A(405,!1);let s;s=o?t:this._injector.get(sl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function tH(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Xr),l=s.create(Gt.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(VS,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Fl(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new A(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Fl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(_g,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new A(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const tA=new k("",{providedIn:"root",factory:()=>M(Qn).handleError.bind(void 0)});function sH(){const n=M(Ce),e=M(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}let aH=(()=>{class n{constructor(){this.zone=M(Ce),this.applicationRef=M(yi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Ag=(()=>{class n{static{this.__NG_ELEMENT_ID__=lH}}return n})();function lH(n){return function uH(n,e,t){if($r(n)&&!t){const r=jt(n.index,e);return new Fs(r,r)}return 47&n.type?new Fs(e[Me],e):null}(Qe(),T(),16==(16&n))}const wH=WS(null,"core",[]);let TH=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(b(yi))}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({})}}return n})();function Ng(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Pg=null;function vi(){return Pg}class LH{}const Mt=new k("DocumentToken");let Og=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return M(HH)},providedIn:"platform"})}}return n})();const UH=new k("Location Initialized");let HH=(()=>{class n extends Og{constructor(){super(),this._doc=M(Mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vi().getBaseHref(this._doc)}onPopState(t){const r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function xg(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function IA(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function er(n){return n&&"?"!==n[0]?"?"+n:n}let to=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return M(TA)},providedIn:"root"})}}return n})();const wA=new k("appBaseHref");let TA=(()=>{class n extends to{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+er(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+er(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+er(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(b(Og),b(wA,8))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BH=(()=>{class n extends to{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+er(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+er(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(b(Og),b(wA,8))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})(),Ci=(()=>{class n{constructor(t){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function VH(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(IA(_A(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+er(r))}normalize(t){return n.stripTrailingSlash(function $H(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,_A(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static{this.normalizeQueryParams=er}static{this.joinWithSlash=xg}static{this.stripTrailingSlash=IA}static{this.\u0275fac=function(r){return new(r||n)(b(to))}}static{this.\u0275prov=F({token:n,factory:function(){return function jH(){return new Ci(b(to))}()},providedIn:"root"})}}return n})();function _A(n){return n.replace(/\/index.html$/,"")}function PA(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}let LA=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new kB,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){UA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){UA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(L(hn),L(Zn))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class kB{constructor(){this.$implicit=null,this.ngIf=null}}function UA(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Be(e)}'.`)}let jA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({})}}return n})();function VA(n){return"server"===n}let ij=(()=>{class n{static{this.\u0275prov=F({token:n,providedIn:"root",factory:()=>new sj(b(Mt),window)})}}return n})();class sj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function aj(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class GA{}class Mj extends LH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zg extends Mj{static makeCurrent(){!function FH(n){Pg||(Pg=n)}(new Zg)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kj(){return ra=ra||document.querySelector("base"),ra?ra.getAttribute("href"):null}();return null==t?null:function Nj(n){Xl=Xl||document.createElement("a"),Xl.setAttribute("href",n);const e=Xl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return PA(document.cookie,e)}}let Xl,ra=null,Oj=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const Xg=new k("EventManagerPlugins");let QA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(b(Xg),b(Ce))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();class YA{constructor(e){this._doc=e}}const em="ng-app-id";let JA=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=VA(i),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${em}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(em),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(em,this.appId),s}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(b(Mt),b(el),b(JI,8),b(Qr))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const tm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nm=/%COMP%/g,Uj=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function XA(n,e){return e.map(t=>t.replace(nm,n))}let eD=(()=>{class n{constructor(t,r,o,i,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=VA(a),this.defaultRenderer=new rm(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===sn.ShadowDom&&(r={...r,encapsulation:sn.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof nD?o.applyToHost(t):o instanceof om&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case sn.Emulated:i=new nD(c,l,r,this.appId,u,s,a,d);break;case sn.ShadowDom:return new $j(c,l,t,r,s,a,this.nonce,d);default:i=new om(c,l,r,u,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(b(QA),b(JA),b(el),b(Uj),b(Mt),b(Qr),b(Ce),b(JI))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();class rm{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(tm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=tm[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=tm[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(yr.DashCase|yr.Important)?e.style.setProperty(t,r,o&yr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=vi().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function tD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $j extends rm{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=XA(o.id,o.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class om extends rm{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?XA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nD extends om{constructor(e,t,r,o,i,s,a,c){const l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=function Hj(n){return"_ngcontent-%COMP%".replace(nm,n)}(l),this.hostAttr=function Bj(n){return"_nghost-%COMP%".replace(nm,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Vj=(()=>{class n extends YA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||n)(b(Mt))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const rD=["alt","control","meta","shift"],Gj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qj=(()=>{class n extends YA{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vi().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rD.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=Gj[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),rD.forEach(s=>{s!==o&&(0,zj[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(b(Mt))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const Yj=WS(wH,"browser",[{provide:Qr,useValue:"browser"},{provide:YI,useValue:function Kj(){Zg.makeCurrent()},multi:!0},{provide:Mt,useFactory:function Qj(){return function TO(n){Vf=n}(document),document},deps:[]}]),Jj=new k(""),sD=[{provide:xl,useClass:class Pj{addToWindow(e){ye.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new A(5103,!1);return i},ye.getAllAngularTestabilities=()=>e.getAllTestabilities(),ye.getAllAngularRootElements=()=>e.getAllRootElements(),ye.frameworkStabilizers||(ye.frameworkStabilizers=[]),ye.frameworkStabilizers.push(r=>{const o=ye.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(c){s=s||c,i--,0==i&&r(s)};o.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?vi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:VS,useClass:Eg,deps:[Ce,Ig,xl]},{provide:Eg,useClass:Eg,deps:[Ce,Ig,xl]}],aD=[{provide:Xf,useValue:"root"},{provide:Qn,useFactory:function Wj(){return new Qn},deps:[]},{provide:Xg,useClass:Vj,multi:!0,deps:[Mt,Ce,Qr]},{provide:Xg,useClass:qj,multi:!0,deps:[Mt]},eD,JA,QA,{provide:rw,useExisting:eD},{provide:GA,useClass:Oj,deps:[]},[]];let Zj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:el,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(b(Jj,12))}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({providers:[...aD,...sD],imports:[jA,TH]})}}return n})(),cD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(b(Mt))}}static{this.\u0275prov=F({token:n,factory:function(r){let o=null;return o=r?new r:function e$(){return new cD(b(Mt))}(),o},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:s$}=Array,{getPrototypeOf:a$,prototype:c$,keys:l$}=Object;const{isArray:h$}=Array;function sm(...n){const e=ns(n),t=function wk(n){return fe(Nh(n))?n.pop():void 0}(n),{args:r,keys:o}=function u$(n){if(1===n.length){const e=n[0];if(s$(e))return{args:e,keys:null};if(function d$(n){return n&&"object"==typeof n&&a$(n)===c$}(e)){const t=l$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return le([],e);const i=new xe(function m$(n,e,t=lr){return r=>{hD(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)hD(e,()=>{const l=le(n[c],e);let u=!1;l.subscribe(He(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>function g$(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,s):lr));return t?i.pipe(function p$(n){return ne(e=>function f$(n,e){return h$(e)?n(...e):n(e)}(n,e))}(t)):i}function hD(n,e,t){n?jn(t,n,e):e()}const eu=Xi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function am(...n){return function y$(){return Eo(1)}()(le(n,ns(n)))}function fD(n){return new xe(e=>{Yt(n()).subscribe(e)})}function oa(n,e){const t=fe(n)?n:()=>n,r=o=>o.error(t());return new xe(e?o=>e.schedule(r,0,o):r)}function cm(){return Ue((n,e)=>{let t=null;n._refCount++;const r=He(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pD extends xe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lt;const t=this.getSubject();e.add(this.source.subscribe(He(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lt.EMPTY)}return e}refCount(){return cm()(this)}}function rr(n){return n<=0?()=>on:Ue((e,t)=>{let r=0;e.subscribe(He(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function kt(n,e){return Ue((t,r)=>{let o=0;t.subscribe(He(r,i=>n.call(e,i,o++)&&r.next(i)))})}function tu(n){return Ue((e,t)=>{let r=!1;e.subscribe(He(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function gD(n=C$){return Ue((e,t)=>{let r=!1;e.subscribe(He(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function C$(){return new eu}function no(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kt((o,i)=>n(o,i,r)):lr,rr(1),t?tu(e):gD(()=>new eu))}function Tr(n,e){return fe(e)?ze(n,e,1):ze(n,1)}function it(n,e,t){const r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ue((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(He(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):lr}function or(n){return Ue((e,t)=>{let i,r=null,o=!1;r=e.subscribe(He(t,void 0,void 0,s=>{i=Yt(n(s,or(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function lm(n){return n<=0?()=>on:Ue((e,t)=>{let r=[];e.subscribe(He(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ia(n){return Ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mD(n){return Ue((e,t)=>{Yt(n).subscribe(He(t,()=>t.complete(),Ih)),!t.closed&&e.subscribe(t)})}const W="primary",sa=Symbol("RouteTitle");class _${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ii(n){return new _$(n)}function S$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Pn(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!yD(n[o],e[o]))return!1;return!0}function yD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function vD(n){return n.length>0?n[n.length-1]:null}function _r(n){return function i$(n){return!!n&&(n instanceof xe||fe(n.lift)&&fe(n.subscribe))}(n)?n:Tl(n)?le(Promise.resolve(n)):x(n)}const D$={exact:function ID(n,e,t){if(!ro(n.segments,e.segments)||!nu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ID(n.children[r],e.children[r],t))return!1;return!0},subset:wD},CD={exact:function b$(n,e){return Pn(n,e)},subset:function R$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yD(n[t],e[t]))},ignored:()=>!0};function ED(n,e,t){return D$[t.paths](n.root,e.root,t.matrixParams)&&CD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wD(n,e,t){return TD(n,e,e.segments,t)}function TD(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ro(o,t)||e.hasChildren()||!nu(o,t,r))}if(n.segments.length===t.length){if(!ro(n.segments,t)||!nu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!wD(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(ro(n.segments,o)&&nu(n.segments,o,r)&&n.children[W])&&TD(n.children[W],e,i,r)}}function nu(n,e,t){return e.every((r,o)=>CD[t](n[o].parameters,r.parameters))}class wi{constructor(e=new de([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return N$.serialize(this)}}class de{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ru(this)}}class aa{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ii(this.parameters)),this._parameterMap}toString(){return AD(this)}}function ro(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ca=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return new um},providedIn:"root"})}}return n})();class um{parse(e){const t=new V$(e);return new wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${la(e.root,!0)}`,r=function x$(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ou(t)}=${ou(o)}`).join("&"):`${ou(t)}=${ou(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function P$(n){return encodeURI(n)}(e.fragment)}`:""}`}}const N$=new um;function ru(n){return n.segments.map(e=>AD(e)).join("/")}function la(n,e){if(!n.hasChildren())return ru(n);if(e){const t=n.children[W]?la(n.children[W],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==W&&r.push(`${o}:${la(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function k$(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===W&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==W&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===W?[la(n.children[W],!1)]:[`${o}:${la(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[W]?`${ru(n)}/${t[0]}`:`${ru(n)}/(${t.join("//")})`}}function _D(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ou(n){return _D(n).replace(/%3B/gi,";")}function dm(n){return _D(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iu(n){return decodeURIComponent(n)}function SD(n){return iu(n.replace(/\+/g,"%20"))}function AD(n){return`${dm(n.path)}${function O$(n){return Object.keys(n).map(e=>`;${dm(e)}=${dm(n[e])}`).join("")}(n.parameters)}`}const F$=/^[^\/()?;#]+/;function hm(n){const e=n.match(F$);return e?e[0]:""}const L$=/^[^\/()?;=#]+/,H$=/^[^=?&#]+/,j$=/^[^&#]+/;class V${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[W]=new de(e,t)),r}parseSegment(){const e=hm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new aa(iu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function U$(n){const e=n.match(L$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=hm(this.remaining);o&&(r=o,this.capture(r))}e[iu(t)]=iu(r)}parseQueryParam(e){const t=function B$(n){const e=n.match(H$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function $$(n){const e=n.match(j$);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=SD(t),i=SD(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hm(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new A(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=W);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[W]:new de([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}}function DD(n){return n.segments.length>0?new de([],{[W]:n}):n}function bD(n){const e={};for(const r of Object.keys(n.children)){const i=bD(n.children[r]);if(r===W&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function G$(n){if(1===n.numberOfChildren&&n.children[W]){const e=n.children[W];return new de(n.segments.concat(e.segments),e.children)}return n}(new de(n.segments,e))}function oo(n){return n instanceof wi}function RD(n){let e;const o=DD(function t(i){const s={};for(const c of i.children){const l=t(c);s[c.outlet]=l}const a=new de(i.url,s);return i===n&&(e=a),a}(n.root));return e??o}function MD(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return fm(o,o,o,t,r);const i=function q$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ND(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new ND(t,e,r)}(e);if(i.toRoot())return fm(o,o,new de([],{}),t,r);const s=function K$(n,e,t){if(n.isAbsolute)return new au(e,!0,0);if(!t)return new au(e,!1,NaN);if(null===t.parent)return new au(t,!0,0);const r=su(n.commands[0])?0:1;return function W$(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new A(4005,!1);o=r.segments.length}return new au(r,!1,o-i)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(i,o,n),a=s.processChildren?da(s.segmentGroup,s.index,i.commands):PD(s.segmentGroup,s.index,i.commands);return fm(o,s.segmentGroup,a,t,r)}function su(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ua(n){return"object"==typeof n&&null!=n&&n.outlets}function fm(n,e,t,r,o){let s,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:kD(n,e,t);const a=DD(bD(s));return new wi(a,i,o)}function kD(n,e,t){const r={};return Object.entries(n.children).forEach(([o,i])=>{r[o]=i===e?t:kD(i,e,t)}),new de(n.segments,r)}class ND{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&su(r[0]))throw new A(4003,!1);const o=r.find(ua);if(o&&o!==vD(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class au{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function PD(n,e,t){if(n||(n=new de([],{})),0===n.segments.length&&n.hasChildren())return da(n,e,t);const r=function Y$(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(ua(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!xD(c,l,s))return i;r+=2}else{if(!xD(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new de(n.segments.slice(0,r.pathIndex),{});return i.children[W]=new de(n.segments.slice(r.pathIndex),n.children),da(i,0,o)}return r.match&&0===o.length?new de(n.segments,{}):r.match&&!n.hasChildren()?pm(n,e,t):r.match?da(n,0,o):pm(n,e,t)}function da(n,e,t){if(0===t.length)return new de(n.segments,{});{const r=function Q$(n){return ua(n[0])?n[0].outlets:{[W]:n}}(t),o={};if(Object.keys(r).some(i=>i!==W)&&n.children[W]&&1===n.numberOfChildren&&0===n.children[W].segments.length){const i=da(n.children[W],e,t);return new de(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=PD(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new de(n.segments,o)}}function pm(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(ua(i)){const c=J$(i.outlets);return new de(r,c)}if(0===o&&su(t[0])){r.push(new aa(n.segments[e].path,OD(t[0]))),o++;continue}const s=ua(i)?i.outlets[W]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&su(a)?(r.push(new aa(s,OD(a))),o+=2):(r.push(new aa(s,{})),o++)}return new de(r,{})}function J$(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=pm(new de([],{}),0,r))}),e}function OD(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function xD(n,e,t){return n==t.path&&Pn(e,t.parameters)}const ha="imperative";class On{constructor(e,t){this.id=e,this.url=t}}class cu extends On{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sr extends On{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fa extends On{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ti extends On{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class lu extends On{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FD extends On{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z$ extends On{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X$ extends On{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eV extends On{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tV extends On{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nV{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rV{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oV{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iV{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sV{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aV{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gm{}class mm{constructor(e){this.url=e}}class cV{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pa,this.attachRef=null}}let pa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cV,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class UD{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ym(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ym(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=vm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return vm(e,this._root).map(t=>t.value)}}function ym(n,e){if(n===e.value)return e;for(const t of e.children){const r=ym(n,t);if(r)return r}return null}function vm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=vm(n,t);if(r.length)return r.unshift(e),r}return[]}class ir{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _i(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class HD extends UD{constructor(e,t){super(e),this.snapshot=t,Cm(this,e)}toString(){return this.snapshot.toString()}}function BD(n,e){const t=function lV(n,e){const s=new uu([],{},{},"",{},W,e,null,{});return new $D("",new ir(s,[]))}(0,e),r=new Ut([new aa("",{})]),o=new Ut({}),i=new Ut({}),s=new Ut({}),a=new Ut(""),c=new Si(r,o,s,a,i,W,e,t.root);return c.snapshot=t.root,new HD(new ir(c,[]),t)}class Si{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ne(l=>l[sa]))??x(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ne(e=>Ii(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ne(e=>Ii(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jD(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function uV(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uu{get title(){return this.data?.[sa]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ii(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $D extends UD{constructor(e,t){super(t),this.url=e,Cm(this,t)}toString(){return VD(this._root)}}function Cm(n,e){e.value._routerState=n,e.children.forEach(t=>Cm(n,t))}function VD(n){const e=n.children.length>0?` { ${n.children.map(VD).join(", ")} } `:"";return`${n.value}${e}`}function Em(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pn(e.params,t.params)||n.paramsSubject.next(t.params),function A$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Pn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Im(n,e){const t=Pn(n.params,e.params)&&function M$(n,e){return ro(n,e)&&n.every((t,r)=>Pn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Im(n.parent,e.parent))}let wm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=M(pa),this.location=M(hn),this.changeDetector=M(Ag),this.environmentInjector=M(Vt),this.inputBinder=M(du,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dV(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gr]})}}return n})();class dV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Si?this.route:e===pa?this.childContexts:this.parent.get(e,t)}}const du=new k("");let GD=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=sm([r.queryParams,r.params,r.data]).pipe(et(([i,s,a],c)=>(a={...i,...s,...a},0===c?x(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function xH(n){const e=X(n);if(!e)return null;const t=new Ls(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();function ga(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function fV(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ga(n,r,o);return ga(n,r)})}(n,e,t);return new ir(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ga(n,a)),s}}const r=function pV(n){return new Si(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>ga(n,i));return new ir(r,o)}}const Tm="ngNavigationCancelingError";function zD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=qD(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function qD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Tm]=!0,r.cancellationCode=e,t&&(r.url=t),r}function KD(n){return n&&n[Tm]}let WD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wo({type:n,selectors:[["ng-component"]],standalone:!0,features:[q_],decls:1,vars:0,template:function(r,o){1&r&&di(0,"router-outlet")},dependencies:[wm],encapsulation:2})}}return n})();function _m(n){const e=n.children&&n.children.map(_m),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==W&&(t.component=WD),t}function gn(n){return n.outlet||W}function ma(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wV{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Em(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=_i(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=_i(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=_i(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=_i(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new aV(i.value.snapshot))}),e.children.length&&this.forwardEvent(new iV(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(Em(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Em(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ma(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class QD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hu{constructor(e,t){this.component=e,this.route=t}}function TV(n,e,t){const r=n._root;return ya(r,e?e._root:null,t,[r.value])}function Ai(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Hk(n){return null!==uc(n)}(n)?e.get(n):n:r}function ya(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=_i(e);return n.children.forEach(s=>{(function SV(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function AV(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!Pn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Im(n,e)||!Pn(n.queryParams,e.queryParams);default:return!Im(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new QD(r)):(i.data=s.data,i._resolvedData=s._resolvedData),ya(n,e,i.component?a?a.children:null:t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new hu(a.outlet.component,s))}else s&&va(e,a,o),o.canActivateChecks.push(new QD(r)),ya(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>va(a,t.getContext(s),o)),o}function va(n,e,t){const r=_i(n),o=n.value;Object.entries(r).forEach(([i,s])=>{va(s,o.component?e?e.children.getContext(i):null:e,t)}),t.canDeactivateChecks.push(new hu(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Ca(n){return"function"==typeof n}function YD(n){return n instanceof eu||"EmptyError"===n?.name}const fu=Symbol("INITIAL_VALUE");function Di(){return et(n=>sm(n.map(e=>e.pipe(rr(1),function v$(...n){const e=ns(n);return Ue((t,r)=>{(e?am(n,t,e):am(n,t)).subscribe(r)})}(fu)))).pipe(ne(e=>{for(const t of e)if(!0!==t){if(t===fu)return fu;if(!1===t||t instanceof wi)return t}return!0}),kt(e=>e!==fu),rr(1)))}function JD(n){return function xM(...n){return eC(n)}(it(e=>{if(oo(e))throw zD(0,e)}),ne(e=>!0===e))}class pu{constructor(e){this.segmentGroup=e||null}}class ZD{constructor(e){this.urlTree=e}}function bi(n){return oa(new pu(n))}function XD(n){return oa(new ZD(n))}class qV{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new A(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return x(r);if(o.numberOfChildren>1||!o.children[W])return oa(new A(4e3,!1));o=o.children[W]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new wi(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new de(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new A(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KV(n,e,t,r,o){const i=Am(n,e,t);return i.matched?(r=function mV(n,e){return n.providers&&!n._injector&&(n._injector=ng(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function VV(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?x(o.map(s=>{const a=Ai(s,n);return _r(function NV(n){return n&&Ca(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Di(),JD()):x(!0)}(r,e,t).pipe(ne(s=>!0===s?i:{...Sm}))):x(i)}function Am(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Sm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||S$)(t,n,e);if(!o)return{...Sm};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function eb(n,e,t,r){return t.length>0&&function YV(n,e,t){return t.some(r=>gu(n,e,r)&&gn(r)!==W)}(n,t,r)?{segmentGroup:new de(e,QV(r,new de(t,n.children))),slicedSegments:[]}:0===t.length&&function JV(n,e,t){return t.some(r=>gu(n,e,r))}(n,t,r)?{segmentGroup:new de(n.segments,WV(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new de(n.segments,n.children),slicedSegments:t}}function WV(n,e,t,r,o){const i={};for(const s of r)if(gu(n,t,s)&&!o[gn(s)]){const a=new de([],{});i[gn(s)]=a}return{...o,...i}}function QV(n,e){const t={};t[W]=e;for(const r of n)if(""===r.path&&gn(r)!==W){const o=new de([],{});t[gn(r)]=o}return t}function gu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class t2{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new qV(this.urlSerializer,this.urlTree)}noMatchError(e){return new A(4002,!1)}recognize(){const e=eb(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,W).pipe(or(t=>{if(t instanceof ZD)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof pu?this.noMatchError(t):t}),ne(t=>{const r=new uu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),o=new ir(r,t),i=new $D("",o),s=function z$(n,e,t=null,r=null){return MD(RD(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,W).pipe(or(r=>{throw r instanceof pu?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=jD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return le(o).pipe(Tr(i=>{const s=r.children[i],a=function EV(n,e){const t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}(t,i);return this.processSegmentGroup(e,a,s,i)}),function I$(n,e){return Ue(function E$(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(He(s,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),tu(null),function w$(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kt((o,i)=>n(o,i,r)):lr,lm(1),t?tu(e):gD(()=>new eu))}(),ze(i=>{if(null===i)return bi(r);const s=tb(i);return function n2(n){n.sort((e,t)=>e.value.outlet===W?-1:t.value.outlet===W?1:e.value.outlet.localeCompare(t.value.outlet))}(s),x(s)}))}processSegment(e,t,r,o,i,s){return le(t).pipe(Tr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,o,i,s).pipe(or(c=>{if(c instanceof pu)return x(null);throw c}))),no(a=>!!a),or(a=>{if(YD(a))return function XV(n,e,t){return 0===e.length&&!n.children[t]}(r,o,i)?x([]):bi(r);throw a}))}processSegmentAgainstRoute(e,t,r,o,i,s,a){return function ZV(n,e,t,r){return!!(gn(n)===r||r!==W&&gu(e,t,n))&&("**"===n.path||Am(e,n,t).matched)}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,i,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s):bi(o):bi(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?XD(i):this.applyRedirects.lineralizeSegments(r,i).pipe(ze(s=>{const a=new de(s,{});return this.processSegment(e,t,a,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Am(t,o,i);if(!a)return bi(t);const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return o.redirectTo.startsWith("/")?XD(d):this.applyRedirects.lineralizeSegments(o,d).pipe(ze(h=>this.processSegment(e,r,t,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a;if("**"===r.path){const c=o.length>0?vD(o).parameters:{};a=x({snapshot:new uu(o,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nb(r),gn(r),r.component??r._loadedComponent??null,r,rb(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=KV(t,r,o,e).pipe(ne(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new uu(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nb(r),gn(r),r.component??r._loadedComponent??null,r,rb(r)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(et(c=>null===c?bi(t):this.getChildConfig(e=r._injector??e,r,o).pipe(et(({routes:l})=>{const u=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:g,slicedSegments:m}=eb(t,h,f,l);if(0===m.length&&g.hasChildren())return this.processChildren(u,l,g).pipe(ne(w=>null===w?null:[new ir(d,w)]));if(0===l.length&&0===m.length)return x([new ir(d,[])]);const v=gn(r)===i;return this.processSegment(u,l,g,m,v?W:i,!0).pipe(ne(w=>[new ir(d,w)]))}))))}getChildConfig(e,t,r){return t.children?x({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?x({routes:t._loadedRoutes,injector:t._loadedInjector}):function $V(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?x(!0):x(o.map(s=>{const a=Ai(s,n);return _r(function bV(n){return n&&Ca(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Di(),JD())}(e,t,r).pipe(ze(o=>o?this.configLoader.loadChildren(e,t).pipe(it(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function zV(n){return oa(qD(!1,3))}())):x({routes:[],injector:e})}}function r2(n){const e=n.value.routeConfig;return e&&""===e.path}function tb(n){const e=[],t=new Set;for(const r of n){if(!r2(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=tb(r.children);e.push(new ir(r.value,o))}return e.filter(r=>!t.has(r))}function nb(n){return n.data||{}}function rb(n){return n.resolve||{}}function ob(n){return"string"==typeof n.title||null===n.title}function Dm(n){return et(e=>{const t=n(e);return t?le(t).pipe(ne(()=>e)):x(e)})}const Ri=new k("ROUTES");let bm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(HS)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return x(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_r(t.loadComponent()).pipe(ne(ib),it(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),ia(()=>{this.componentLoaders.delete(t)})),o=new pD(r,()=>new wt).pipe(cm());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function u2(n,e,t,r){return _r(n.loadChildren()).pipe(ne(ib),ze(o=>o instanceof G_||Array.isArray(o)?x(o):le(e.compileModuleAsync(o))),ne(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(t).injector,s=i.get(Ri,[],{optional:!0,self:!0}).flat()),{routes:s.map(_m),injector:i}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ia(()=>{this.childrenLoaders.delete(r)})),s=new pD(i,()=>new wt).pipe(cm());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ib(n){return function d2(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let mu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wt,this.transitionAbortSubject=new wt,this.configLoader=M(bm),this.environmentInjector=M(Vt),this.urlSerializer=M(ca),this.rootContexts=M(pa),this.inputBindingEnabled=null!==M(du,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>x(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new rV(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new nV(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new Ut({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ha,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(i=>0!==i.id),ne(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),et(i=>{this.currentTransition=i;let s=!1,a=!1;return x(i).pipe(it(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),et(c=>{const l=c.currentBrowserUrl.toString(),u=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Ti(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),on}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return x(c).pipe(et(h=>{const f=this.transitions?.getValue();return this.events.next(new cu(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?on:Promise.resolve(h)}),function o2(n,e,t,r,o,i){return ze(s=>function e2(n,e,t,r,o,i,s="emptyOnly"){return new t2(n,e,t,r,o,s,i).recognize()}(n,e,t,r,s.extractedUrl,o,i).pipe(ne(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),it(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new FD(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:g,restoredState:m,extras:v}=c,w=new cu(h,this.urlSerializer.serialize(f),g,m);this.events.next(w);const C=BD(0,this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:C,urlAfterRedirects:f,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},x(i)}{const h="";return this.events.next(new Ti(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),on}}),it(c=>{const l=new Z$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ne(c=>(this.currentTransition=i={...c,guards:TV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function OV(n,e){return ze(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?x({...t,guardsResult:!0}):function xV(n,e,t,r){return le(n).pipe(ze(o=>function jV(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?x(i.map(a=>{const c=ma(e)??o,l=Ai(a,c);return _r(function kV(n){return n&&Ca(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(no())})).pipe(Di()):x(!0)}(o.component,o.route,t,e,r)),no(o=>!0!==o,!0))}(s,r,o,n).pipe(ze(a=>a&&function DV(n){return"boolean"==typeof n}(a)?function FV(n,e,t,r){return le(e).pipe(Tr(o=>am(function UV(n,e){return null!==n&&e&&e(new oV(n)),x(!0)}(o.route.parent,r),function LV(n,e){return null!==n&&e&&e(new sV(n)),x(!0)}(o.route,r),function BV(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function _V(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>fD(()=>x(s.guards.map(c=>{const l=ma(s.node)??t,u=Ai(c,l);return _r(function MV(n){return n&&Ca(n.canActivateChild)}(u)?u.canActivateChild(r,n):l.runInContext(()=>u(r,n))).pipe(no())})).pipe(Di())));return x(i).pipe(Di())}(n,o.path,t),function HV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return x(!0);const o=r.map(i=>fD(()=>{const s=ma(e)??t,a=Ai(i,s);return _r(function RV(n){return n&&Ca(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(no())}));return x(o).pipe(Di())}(n,o.route,t))),no(o=>!0!==o,!0))}(r,i,n,e):x(a)),ne(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),it(c=>{if(i.guardsResult=c.guardsResult,oo(c.guardsResult))throw zD(0,c.guardsResult);const l=new X$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),kt(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Dm(c=>{if(c.guards.canActivateChecks.length)return x(c).pipe(it(l=>{const u=new eV(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),et(l=>{let u=!1;return x(l).pipe(function i2(n,e){return ze(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return x(t);let i=0;return le(o).pipe(Tr(s=>function s2(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!ob(o)&&(i[sa]=o.title),function a2(n,e,t,r){const o=function c2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return x({});const i={};return le(o).pipe(ze(s=>function l2(n,e,t,r){const o=ma(e)??r,i=Ai(n,o);return _r(i.resolve?i.resolve(e,t):o.runInContext(()=>i(e,t)))}(n[s],e,t,r).pipe(no(),it(a=>{i[s]=a}))),lm(1),function T$(n){return ne(()=>n)}(i),or(s=>YD(s)?on:oa(s)))}(i,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=jD(n,t).resolve,o&&ob(o)&&(n.data[sa]=o.title),null)))}(s.route,r,n,e)),it(()=>i++),lm(1),ze(s=>i===o.length?x(t):on))})}(t.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),it(l=>{const u=new tV(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Dm(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(it(h=>{u.component=h}),ne(()=>{})));for(const h of u.children)d.push(...l(h));return d};return sm(l(c.targetSnapshot.root)).pipe(tu(),rr(1))}),Dm(()=>this.afterPreactivation()),ne(c=>{const l=function hV(n,e,t){const r=ga(n,e._root,t?t._root:void 0);return new HD(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:l},i}),it(()=>{this.events.next(new gm)}),((n,e,t,r)=>ne(o=>(new wV(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),rr(1),it({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),mD(this.transitionAbortSubject.pipe(it(c=>{throw c}))),ia(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),or(c=>{if(a=!0,KD(c))this.events.next(new fa(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function gV(n){return KD(n)&&oo(n.url)}(c)?this.events.next(new mm(c.url)):i.resolve(!1);else{this.events.next(new lu(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(t.errorHandler(c))}catch(l){i.reject(l)}}return on}))}))}cancelNavigationTransition(t,r,o){const i=new fa(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sb(n){return n!==ha}let ab=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===W);return r}getResolvedTitleForRoute(t){return t.data[sa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return M(h2)},providedIn:"root"})}}return n})(),h2=(()=>{class n extends ab{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(b(cD))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),f2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return M(g2)},providedIn:"root"})}}return n})();class p2{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let g2=(()=>{class n extends p2{static{this.\u0275fac=function(){let t;return function(o){return(t||(t=function VE(n){return $n(()=>{const e=n.prototype.constructor,t=e[Vn]||Tf(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[Vn]||Tf(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}(n)))(o||n)}}()}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const yu=new k("",{providedIn:"root",factory:()=>({})});let m2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:function(){return M(y2)},providedIn:"root"})}}return n})(),y2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ea=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ea||{});function cb(n,e){n.events.pipe(kt(t=>t instanceof Sr||t instanceof fa||t instanceof lu||t instanceof Ti),ne(t=>t instanceof Sr||t instanceof Ti?Ea.COMPLETE:t instanceof fa&&(0===t.code||1===t.code)?Ea.REDIRECTING:Ea.FAILED),kt(t=>t!==Ea.REDIRECTING),rr(1)).subscribe(()=>{e()})}function v2(n){throw n}function C2(n,e,t){return e.parse("/")}const E2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kt=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=M(US),this.isNgZoneEnabled=!1,this._events=new wt,this.options=M(yu,{optional:!0})||{},this.pendingTasks=M(Pl),this.errorHandler=this.options.errorHandler||v2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||C2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=M(m2),this.routeReuseStrategy=M(f2),this.titleStrategy=M(ab),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=M(Ri,{optional:!0})?.flat()??[],this.navigationTransitions=M(mu),this.urlSerializer=M(ca),this.location=M(Ci),this.componentInputBindingEnabled=!!M(du,{optional:!0}),this.eventsSubscription=new Lt,this.isNgZoneEnabled=M(Ce)instanceof Ce&&Ce.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BD(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(lb(r)&&this._events.next(r));if(r instanceof cu)sb(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Ti)this.rawUrlTree=o.rawUrl;else if(r instanceof FD){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof gm)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof fa)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof mm){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),s={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sb(o.source)};this.scheduleNavigation(i,ha,null,s,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof lu&&this.restoreHistory(o,!0),r instanceof Sr&&(this.navigated=!0),lb(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ha,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_m),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=RD(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return MD(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=oo(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ha,null,r)}navigate(t,r={skipLocationChange:!1}){return function w2(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new A(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...E2}:!1===r?{...I2}:r,oo(t))return ED(this.currentUrlTree,t,o);const i=this.parseUrl(t);return ED(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return cb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lb(n){return!(n instanceof gm||n instanceof mm)}let vu=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new wt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Sr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function $I(n,e,t){return function zO(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?jI:BI}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(L(Kt),L(Si),function kc(n){return function dP(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let o=0;for(;o<r;){const i=t[o];if(PC(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(i===e)return t[o+1];o+=2}}}return null}(Qe(),n)}("tabindex"),L(al),L(Cr),L(to))}}static{this.\u0275dir=ct({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&$s("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Np("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Ng],skipLocationChange:["skipLocationChange","skipLocationChange",Ng],replaceUrl:["replaceUrl","replaceUrl",Ng],routerLink:"routerLink"},standalone:!0,features:[nT,Gr]})}}return n})();class ub{}let S2=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(kt(t=>t instanceof Sr),Tr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=ng(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return le(o).pipe(Eo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):x(null);const i=o.pipe(ze(s=>null===s?x(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?le([i,this.loader.loadComponent(r)]).pipe(Eo()):i})}static{this.\u0275fac=function(r){return new(r||n)(b(Kt),b(HS),b(Vt),b(ub),b(bm))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Rm=new k("");let db=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof cu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ti&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof LD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new LD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function bw(){throw new Error("invalid")}()}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();function sr(n,e){return{\u0275kind:n,\u0275providers:e}}function fb(){const n=M(Gt);return e=>{const t=n.get(yi);if(e!==t.components[0])return;const r=n.get(Kt),o=n.get(pb);1===n.get(Mm)&&r.initialNavigation(),n.get(gb,null,Y.Optional)?.setUpPreloading(),n.get(Rm,null,Y.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const pb=new k("",{factory:()=>new wt}),Mm=new k("",{providedIn:"root",factory:()=>1}),gb=new k("");function R2(n){return sr(0,[{provide:gb,useExisting:S2},{provide:ub,useExisting:n}])}const mb=new k("ROUTER_FORROOT_GUARD"),k2=[Ci,{provide:ca,useClass:um},Kt,pa,{provide:Si,useFactory:function hb(n){return n.routerState.root},deps:[Kt]},bm,[]];function N2(){return new qS("Router",Kt)}let yb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[k2,[],{provide:Ri,multi:!0,useValue:t},{provide:mb,useFactory:F2,deps:[[Kt,new Oc,new xc]]},{provide:yu,useValue:r||{}},r?.useHash?{provide:to,useClass:BH}:{provide:to,useClass:TA},{provide:Rm,useFactory:()=>{const n=M(ij),e=M(Ce),t=M(yu),r=M(mu),o=M(ca);return t.scrollOffset&&n.setOffset(t.scrollOffset),new db(o,r,n,e,t)}},r?.preloadingStrategy?R2(r.preloadingStrategy).\u0275providers:[],{provide:qS,multi:!0,useFactory:N2},r?.initialNavigation?L2(r):[],r?.bindToComponentInputs?sr(8,[GD,{provide:du,useExisting:GD}]).\u0275providers:[],[{provide:vb,useFactory:fb},{provide:_g,multi:!0,useExisting:vb}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ri,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(b(mb,8))}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({})}}return n})();function F2(n){return"guarded"}function L2(n){return["disabled"===n.initialNavigation?sr(3,[{provide:mg,multi:!0,useFactory:()=>{const e=M(Kt);return()=>{e.setUpLocationChangeListener()}}},{provide:Mm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?sr(2,[{provide:Mm,useValue:0},{provide:mg,multi:!0,deps:[Gt],useFactory:e=>{const t=e.get(UH,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Kt),i=e.get(pb);cb(o,()=>{r(!0)}),e.get(mu).afterPreactivation=()=>(r(!0),i.closed?x(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const vb=new k("");class Cu{}class Eu{}class xn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class H2{encodeKey(e){return Cb(e)}encodeValue(e){return Cb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const j2=/%(\d[a-f0-9])/gi,$2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Cb(n){return encodeURIComponent(n).replace(j2,(e,t)=>$2[t]??e)}function Iu(n){return`${n}`}class Ar{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new H2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function B2(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Iu):[Iu(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ar({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Iu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Iu(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class V2{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Eb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ib(n){return typeof Blob<"u"&&n instanceof Blob}function wb(n){return typeof FormData<"u"&&n instanceof FormData}class Ia{constructor(e,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function G2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new xn),this.context||(this.context=new V2),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ar,this.urlWithParams=t}serializeBody(){return null===this.body?null:Eb(this.body)||Ib(this.body)||wb(this.body)||function z2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ar?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wb(this.body)?null:Ib(this.body)?this.body.type||null:Eb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ar?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new Ia(t,r,i,{params:l,headers:c,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var Mi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Mi||{});class km{constructor(e,t=200,r="OK"){this.headers=e.headers||new xn,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Nm extends km{constructor(e={}){super(e),this.type=Mi.ResponseHeader}clone(e={}){return new Nm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ki extends km{constructor(e={}){super(e),this.type=Mi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ki({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Tb extends km{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Pm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _b=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof Ia)i=t;else{let c,l;c=o.headers instanceof xn?o.headers:new xn(o.headers),o.params&&(l=o.params instanceof Ar?o.params:new Ar({fromObject:o.params})),i=new Ia(t,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=x(i).pipe(Tr(c=>this.handler.handle(c)));if(t instanceof Ia||"events"===o.observe)return s;const a=s.pipe(kt(c=>c instanceof ki));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(ne(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ne(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ne(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ne(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ar).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Pm(o,r))}post(t,r,o={}){return this.request("POST",t,Pm(o,r))}put(t,r,o={}){return this.request("PUT",t,Pm(o,r))}static{this.\u0275fac=function(r){return new(r||n)(b(Cu))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();function Db(n,e){return e(n)}function K2(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const bb=new k(""),wa=new k(""),Rb=new k("");function Q2(){let n=null;return(e,t)=>{null===n&&(n=(M(bb,{optional:!0})??[]).reduceRight(K2,Db));const r=M(Pl),o=r.add();return n(e,t).pipe(ia(()=>r.remove(o)))}}let Mb=(()=>{class n extends Cu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=M(Pl)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(wa),...this.injector.get(Rb,[])]));this.chain=o.reduceRight((i,s)=>function W2(n,e,t){return(r,o)=>t.runInContext(()=>e(r,i=>n(i,o)))}(i,s,this.injector),Db)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ia(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(b(Eu),b(Vt))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const X2=/^\)\]\}',?\n/;let Nb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new A(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?le(r.\u0275loadImpl()):x(null)).pipe(et(()=>new xe(i=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((m,v)=>s.setRequestHeader(m,v.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const m=t.detectContentTypeHeader();null!==m&&s.setRequestHeader("Content-Type",m)}if(t.responseType){const m=t.responseType.toLowerCase();s.responseType="json"!==m?m:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=s.statusText||"OK",v=new xn(s.getAllResponseHeaders()),w=function eG(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new Nm({headers:v,status:s.status,statusText:m,url:w}),c},u=()=>{let{headers:m,status:v,statusText:w,url:C}=l(),S=null;204!==v&&(S=typeof s.response>"u"?s.responseText:s.response),0===v&&(v=S?200:0);let P=v>=200&&v<300;if("json"===t.responseType&&"string"==typeof S){const B=S;S=S.replace(X2,"");try{S=""!==S?JSON.parse(S):null}catch(Oe){S=B,P&&(P=!1,S={error:Oe,text:S})}}P?(i.next(new ki({body:S,headers:m,status:v,statusText:w,url:C||void 0})),i.complete()):i.error(new Tb({error:S,headers:m,status:v,statusText:w,url:C||void 0}))},d=m=>{const{url:v}=l(),w=new Tb({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});i.error(w)};let h=!1;const f=m=>{h||(i.next(l()),h=!0);let v={type:Mi.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(v.total=m.total),"text"===t.responseType&&s.responseText&&(v.partialText=s.responseText),i.next(v)},g=m=>{let v={type:Mi.UploadProgress,loaded:m.loaded};m.lengthComputable&&(v.total=m.total),i.next(v)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",f),null!==a&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),i.next({type:Mi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",f),null!==a&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(b(GA))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();const Om=new k("XSRF_ENABLED"),Pb=new k("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ob=new k("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xb{}let rG=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=PA(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(b(Mt),b(Qr),b(Pb))}}static{this.\u0275prov=F({token:n,factory:n.\u0275fac})}}return n})();function oG(n,e){const t=n.url.toLowerCase();if(!M(Om)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=M(xb).getToken(),o=M(Ob);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Dr=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Dr||{});function io(n,e){return{\u0275kind:n,\u0275providers:e}}function iG(...n){const e=[_b,Nb,Mb,{provide:Cu,useExisting:Mb},{provide:Eu,useExisting:Nb},{provide:wa,useValue:oG,multi:!0},{provide:Om,useValue:!0},{provide:xb,useClass:rG}];for(const t of n)e.push(...t.\u0275providers);return function Yf(n){return{\u0275providers:n}}(e)}const Fb=new k("LEGACY_INTERCEPTOR_FN");let aG=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({providers:[iG(io(Dr.LegacyInterceptors,[{provide:Fb,useFactory:Q2},{provide:wa,useExisting:Fb,multi:!0}]))]})}}return n})(),fG=(()=>{class n{constructor(t){this.http=t}ngOnInit(){this.http.get("https://graph.microsoft.com/v1.0/me").subscribe(t=>{this.profile=t}),this.tokenExpiration=localStorage.getItem("tokenExpiration")}static{this.\u0275fac=function(r){return new(r||n)(L(_b))}}static{this.\u0275cmp=wo({type:n,selectors:[["app-profile"]],decls:55,vars:12,consts:[[1,"profile"]],template:function(r,o){1&r&&(we(0,"div",0)(1,"p")(2,"strong"),oe(3,"Business Phones:"),Z(),oe(4),Z(),we(5,"p")(6,"strong"),oe(7,"Display Name:"),Z(),oe(8),Z(),we(9,"p")(10,"strong"),oe(11,"Given Name:"),Z(),oe(12),Z(),we(13,"p")(14,"strong"),oe(15,"Job Title:"),Z(),oe(16),Z(),we(17,"p")(18,"strong"),oe(19,"Mail:"),Z(),oe(20),Z(),we(21,"p")(22,"strong"),oe(23,"Mobile Phone:"),Z(),oe(24),Z(),we(25,"p")(26,"strong"),oe(27,"Office Location:"),Z(),oe(28),Z(),we(29,"p")(30,"strong"),oe(31,"Preferred Language:"),Z(),oe(32),Z(),we(33,"p")(34,"strong"),oe(35,"Surname:"),Z(),oe(36),Z(),we(37,"p")(38,"strong"),oe(39,"User Principal Name:"),Z(),oe(40),Z(),we(41,"p")(42,"strong"),oe(43,"Profile Id:"),Z(),oe(44),Z(),di(45,"br")(46,"br"),we(47,"p")(48,"strong"),oe(49,"Token Expiration:"),Z(),oe(50),Z(),di(51,"br")(52,"br"),we(53,"p"),oe(54," Refreshing this page will continue to use the cached access token until it nears expiration, at which point a new access token will be requested. "),Z()()),2&r&&(rt(4),gt(" ",null==o.profile?null:o.profile.businessPhones,""),rt(4),gt(" ",null==o.profile?null:o.profile.displayName,""),rt(4),gt(" ",null==o.profile?null:o.profile.givenName,""),rt(4),gt(" ",null==o.profile?null:o.profile.jobTitle,""),rt(4),gt(" ",null==o.profile?null:o.profile.mail,""),rt(4),gt(" ",null==o.profile?null:o.profile.mobilePhone,""),rt(4),gt(" ",null==o.profile?null:o.profile.officeLocation,""),rt(4),gt(" ",null==o.profile?null:o.profile.preferredLanguage,""),rt(4),gt(" ",null==o.profile?null:o.profile.surname,""),rt(4),gt(" ",null==o.profile?null:o.profile.userPrincipalName,""),rt(4),gt(" ",null==o.profile?null:o.profile.id,""),rt(6),gt(" ",o.tokenExpiration,""))},encapsulation:2})}}return n})();const I={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ni=[I.OPENID_SCOPE,I.PROFILE_SCOPE,I.OFFLINE_ACCESS_SCOPE],Lb=[...Ni,I.EMAIL_SCOPE],Ct={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Tu={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Ye={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},xm={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},_u={QUERY:"query",FRAGMENT:"fragment"},pG={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Ta={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Je={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Fm="appmetadata",gG="client_info",Ze={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},he={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Nt={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},rn_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836",Ve={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"};var O=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(O||{});const Vb={scopes:Ni},Gb="jwk",Um="msal.db",CG=`${Um}.keys`,EG=[0,5,4];class IG{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===O.Redirect||e.interactionType===O.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(t&&"ssoSilent"!==t)break;return"none";case"msal:logoutEnd":if(t&&"logout"!==t)break;return"none";case"msal:handleRedirectEnd":if(t&&"handleRedirect"!==t)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===O.Redirect||e.interactionType===O.Popup){if(t&&"login"!==t&&"acquireToken"!==t)break;return"none"}}return null}}const Oi="unexpected_error",Ru={[Oi]:"Unexpected error in authentication.",post_request_failed:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class pe extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,pe.prototype),this.errorCode=e||I.EMPTY_STRING,this.errorMessage=t||I.EMPTY_STRING,this.subError=r||I.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Bm(n,e){return new pe(n,e?`${Ru[n]} ${e}`:Ru[n])}const Aa="storage_not_supported",Mu="in_mem_redirect_unavailable",ku={[Aa]:"Given storage configuration option was not supported.",stubbed_public_client_application_called:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Mu]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Da extends pe{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Da.prototype)}}function $m(n){return new Da(n,ku[n])}const Nu="redirect_uri_empty",Pu="authority_uri_insecure",co="url_parse_error",Ou="empty_url_error",xu="empty_input_scopes_error",ba="invalid_claims",Fu="token_request_empty",Lu="logout_request_empty",Ra="pkce_params_missing",Ma="invalid_cloud_discovery_metadata",Uu="invalid_authority_metadata",Hu="untrusted_authority",xi="missing_ssh_jwk",Bu="missing_ssh_kid",ju="cannot_set_OIDCOptions",$u="cannot_allow_platform_broker",Vu="authority_mismatch",Gu="invalid_request_method_for_EAR",zu="invalid_authorize_post_body_parameters",_e={[Nu]:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[Pu]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[co]:"URL could not be parsed into appropriate segments.",[Ou]:"URL was empty or null.",[xu]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ba]:"Given claims parameter must be a stringified JSON object.",[Fu]:"Token request was empty and not found in cache.",[Lu]:"The logout request was null or undefined.",invalid_code_challenge_method:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ra]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Ma]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Uu]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Hu]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[xi]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Bu]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",[ju]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[$u]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Vu]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[zu]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Gu]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class Km extends pe{constructor(e){super(e,_e[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Km.prototype)}}function me(n){return new Km(n)}class Pt{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch{}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}const ka="client_info_decoding_error",qu="client_info_empty_error",Na="token_parsing_error",Ku="null_or_empty_token",mn="endpoints_resolution_error",Wu="network_error",Qu="openid_config_error",Yu="hash_not_deserialized",kr="invalid_state",Ju="state_mismatch",Pa="state_not_found",Zu="nonce_mismatch",Oa="auth_time_not_found",Xu="max_age_transpired",ed="multiple_matching_appMetadata",td="request_cannot_be_made",nd="cannot_remove_empty_scope",rd="cannot_append_scopeset",xa="empty_input_scopeset",Fa="no_account_in_silent_request",od="invalid_cache_record",La="invalid_cache_environment",Ua="no_account_found",Ha="no_crypto_object",Fn="token_refresh_required",id="token_claims_cnf_required_for_signedjwt",sd="authorization_code_missing_from_server_response",ad="binding_key_not_removed",cd="end_session_endpoint_not_supported",Ba="key_id_missing",Q="method_not_implemented",$={[ka]:"The client info could not be parsed/decoded correctly",[qu]:"The client info was empty",[Na]:"Token cannot be parsed",[Ku]:"The token is null or empty",[mn]:"Endpoints cannot be resolved",[Wu]:"Network request failed",[Qu]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Yu]:"The hash parameters could not be deserialized",[kr]:"State was not the expected format",[Ju]:"State mismatch error",[Pa]:"State not found",[Zu]:"Nonce mismatch error",[Oa]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Xu]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ed]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[td]:"Token request cannot be made without authorization code or refresh token.",[nd]:"Cannot remove null or empty scope from ScopeSet",[rd]:"Cannot append ScopeSet",[xa]:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",[Fa]:"Please pass an account object, silent flow is not supported without account information",[od]:"Cache record object was null or undefined.",[La]:"Invalid environment when attempting to create cache entry",[Ua]:"No account found in cache for given key.",[Ha]:"No crypto object detected.",unexpected_credential_type:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Fn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",[id]:"Cannot generate a POP jwt if the token_claims are not populated",[sd]:"Server response does not contain an authorization code to proceed",[ad]:"Could not remove the credential's binding key from storage.",[cd]:"The provided authority does not support logout",[Ba]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Q]:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled",platform_broker_error:"An error occurred in the native broker. See the platformBrokerError property for details."};class cy extends pe{constructor(e,t){super(e,t?`${$[e]}: ${t}`:$[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,cy.prototype)}}function _(n,e){return new cy(n,e)}function zb(n){if(!n)return n;let e=n.toLowerCase();return Pt.endsWith(e,"?")?e=e.slice(0,-1):Pt.endsWith(e,"?/")&&(e=e.slice(0,-2)),Pt.endsWith(e,"/")||(e+="/"),e}function qb(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function ld(n){if(!n||n.indexOf("=")<0)return null;try{const e=qb(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw _(Yu)}return null}function ja(n,e=!0,t){const r=new Array;return n.forEach((o,i)=>{r.push(!e&&t&&i in t?`${i}=${o}`:`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function Kb(n){if(!n)return n;const e=n.split("#")[0];try{const t=new URL(e);return zb(t.origin+t.pathname+t.search)}catch{return zb(e)}}class te{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw me(Ou);e.includes("#")||(this._urlString=te.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Pt.endsWith(t,"?")?t=t.slice(0,-1):Pt.endsWith(t,"?/")&&(t=t.slice(0,-2)),Pt.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw me(co)}if(!e.HostNameAndPort||!e.PathSegments)throw me(co);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw me(Pu)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return te.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),te.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw me(co);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw me(co);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===I.FORWARD_SLASH){const o=new te(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new te(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!ld(e)}}const lo="client_id",Wb="redirect_uri",wG="response_type",TG="response_mode",SG="claims",AG="scope",bG="state",RG="nonce",MG="prompt",NG="code_challenge",PG="code_challenge_method",xG="client-request-id",FG="x-client-SKU",LG="x-client-VER",UG="x-client-OS",HG="x-client-CPU",VG="x-app-name",GG="x-app-ver",Qb="token_type",Yb="req_cnf",Jb="return_spa_code",YG="nativebroker",ZG="sid",XG="login_hint",ez="domain_hint",ud="brk_client_id",dd="brk_redirect_uri",ly="instance_aware",nz="ear_jwk",rz="ear_jwe_crypto";class Ge{constructor(e){const t=e?Pt.trimArrayEntries([...e]):[],r=t?Pt.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw me(xu);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||I.EMPTY_STRING).split(" ");return new Ge(r)}static createSearchScopes(e){const t=e&&e.length>0?e:[...Ni],r=new Ge(t);return r.containsOnlyOIDCScopes()?r.removeScope(I.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Ge(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Lb.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw _(rd)}}removeScope(e){if(!e)throw _(nd);this.scopes.delete(e.trim())}removeOIDCScopes(){Lb.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw _(xa);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw _(xa);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):I.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function hd(n,e,t){if(!e)return;const r=n.get(lo);r&&n.has(ud)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(Wb)},e)}function uy(n,e){n.set(wG,e)}function dy(n,e,t=!0,r=Ni){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new Ge(o);n.set(AG,i.printScopes())}function hy(n,e){n.set(lo,e)}function fy(n,e){n.set(Wb,e)}function fd(n,e){n.set(XG,e)}function pd(n,e){n.set(Ct.CCS_HEADER,`UPN:${e}`)}function $a(n,e){n.set(Ct.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Zb(n,e){n.set(ZG,e)}function py(n,e,t){const r=function iR(n,e){let t;if(n)try{t=JSON.parse(n)}catch{throw me(ba)}else t={};return e&&e.length>0&&(t.hasOwnProperty(Tu.ACCESS_TOKEN)||(t[Tu.ACCESS_TOKEN]={}),t[Tu.ACCESS_TOKEN][Tu.XMS_CC]={values:e}),JSON.stringify(t)}(e,t);try{JSON.parse(r)}catch{throw me(ba)}n.set(SG,r)}function gy(n,e){n.set(xG,e)}function my(n,e){n.set(FG,e.sku),n.set(LG,e.version),e.os&&n.set(UG,e.os),e.cpu&&n.set(HG,e.cpu)}function yy(n,e){e?.appName&&n.set(VG,e.appName),e?.appVersion&&n.set(GG,e.appVersion)}function Xb(n,e){e&&n.set(bG,e)}function vy(n,e,t){if(!e||!t)throw me(Ra);n.set(NG,e),n.set(PG,t)}function eR(n,e){n.set("client_secret",e)}function tR(n,e){e&&n.set("client_assertion",e)}function nR(n,e){e&&n.set("client_assertion_type",e)}function rR(n,e){n.set("grant_type",e)}function Cy(n){n.set(gG,"1")}function oR(n){n.has(ly)||n.set(ly,"true")}function Nr(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function Ey(n,e){e&&(n.set(Qb,he.POP),n.set(Yb,e))}function sR(n,e){e&&(n.set(Qb,he.SSH),n.set(Yb,e))}function aR(n,e){n.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),n.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}function cR(n){n.set("x-ms-lib-capability","retry-after, h429")}function gd(n,e,t){n.has(ud)||n.set(ud,e),n.has(dd)||n.set(dd,t)}const Va="pkce_not_created",Iy="ear_jwk_empty",lR="ear_jwe_empty",Ga="crypto_nonexistent",Fi="empty_navigate_uri",md="hash_empty_error",za="no_state_in_hash",yd="hash_does_not_contain_known_properties",vd="unable_to_parse_state",Cd="state_interaction_type_mismatch",Ed="interaction_in_progress",Id="popup_window_error",wd="empty_window_error",uo="user_cancelled",Td="monitor_window_timeout",_d="redirect_in_iframe",Sd="block_iframe_reload",Ad="block_nested_popups",Li="silent_logout_unsupported",Dd="no_account_error",bd="no_token_request_cache_error",Rd="unable_to_parse_token_request_cache_error",Ui="non_browser_environment",Pr="database_not_open",Hi="no_network_connectivity",Md="post_request_failed",kd="get_request_failed",qa="failed_to_parse_response",Nd="unable_to_load_token",Ka="crypto_key_not_found",Pd="auth_code_required",Od="auth_code_or_nativeAccountId_required",xd="spa_code_and_nativeAccountId_present",Wa="database_unavailable",Fd="unable_to_acquire_token_from_native_platform",Ld="native_handshake_timeout",Ud="native_extension_not_installed",Qa="native_connection_not_established",ho="uninitialized_public_client_application",Hd="native_prompt_not_supported",Bd="invalid_base64_string",jd="invalid_pop_token_request",uR="failed_to_build_headers",dR="failed_to_parse_headers",$d="failed_to_decrypt_ear_response",Vd="timed_out",ar="For more visit: aka.ms/msaljs/browser-errors",V={[Va]:"The PKCE code challenge and verifier could not be generated.",[Iy]:"No EAR encryption key provided. This is unexpected.",[lR]:"Server response does not contain ear_jwe property. This is unexpected.",[Ga]:"The crypto object or function is not available.",[Fi]:"Navigation URI is empty. Please check stack trace for more info.",[md]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ar}`,[za]:"Hash does not contain state. Please verify that the request originated from msal.",[yd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ar}`,[vd]:"Unable to parse state. Please verify that the request originated from msal.",[Cd]:"Hash contains state but the interaction type does not match the caller.",[Ed]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ar}`,[Id]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[wd]:"window.open returned null or undefined window object.",[uo]:"User cancelled the flow.",monitor_popup_timeout:`Token acquisition in popup failed due to timeout.  ${ar}`,[Td]:`Token acquisition in iframe failed due to timeout.  ${ar}`,[_d]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Sd]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ar}`,[Ad]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",iframe_closed_prematurely:"The iframe being monitored was closed prematurely.",[Li]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Dd]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",silent_prompt_value_error:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[bd]:"No token request found in cache.",[Rd]:"The cached token request could not be parsed.",auth_request_not_set_error:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",invalid_cache_type:"Invalid cache type",[Ui]:"Login and token requests are not supported in non-browser environments.",[Pr]:"Database is not open!",[Hi]:"No network connectivity. Check your internet connection.",[Md]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[kd]:"Network request failed. Please check the network trace to determine root cause.",[qa]:"Failed to parse network response. Check network trace.",[Nd]:"Error loading token to cache.",[Ka]:"Cryptographic Key or Keypair not found in browser storage.",[Pd]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Od]:"An authorization code or nativeAccountId must be provided to this flow.",[xd]:"Request cannot contain both spa code and native account id.",[Wa]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Fd]:`Unable to acquire token from native platform.  ${ar}`,[Ld]:"Timed out while attempting to establish connection to browser extension",[Ud]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Qa]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ar}`,[ho]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ar}`,[Hd]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Bd]:"Invalid base64 encoded string.",[jd]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[uR]:"Failed to build request headers object.",[dR]:"Failed to parse response headers",[$d]:"Failed to decrypt ear response",[Vd]:"The request timed out."};class Ya extends pe{constructor(e,t){super(e,V[e],t),Object.setPrototypeOf(this,Ya.prototype),this.name="BrowserAuthError"}}function R(n,e){return new Ya(n,e)}function hR(n,e,t,r,o,i,s){try{var a=n[i](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,o)}function y(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(c){hR(i,r,o,s,a,"next",c)}function a(c){hR(i,r,o,s,a,"throw",c)}s(void 0)})}}const p={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"};function Gd(n){return encodeURIComponent(Ja(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Or(n){return fR(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ja(n){return fR((new TextEncoder).encode(n))}function fR(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function It(n){return(new TextDecoder).decode(xr(n))}function xr(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw R(Bd)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}const Bi="AES-GCM",pR="HKDF",Dy="SHA-256",Ez=new Uint8Array([1,0,1]),gR="0123456789abcdef",mR=new Uint32Array(1),by="raw",yR="encrypt",Ry="decrypt",Iz="deriveKey",My={name:"RSASSA-PKCS1-v1_5",hash:Dy,modulusLength:2048,publicExponent:Ez};function vR(n,e,t){return ky.apply(this,arguments)}function ky(){return(ky=y(function*(n,e,t){e?.addQueueMeasurement(p.Sha256Digest,t);const o=(new TextEncoder).encode(n);return window.crypto.subtle.digest(Dy,o)})).apply(this,arguments)}function _z(n){return window.crypto.getRandomValues(n)}function Ny(){return window.crypto.getRandomValues(mR),mR[0]}function yn(){const n=Date.now(),e=1024*Ny()+(1023&Ny()),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Ny();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/65536,t[4]=n/256,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=gR.charAt(t[a]>>>4),s+=gR.charAt(15&t[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function Py(){return(Py=y(function*(n,e){return window.crypto.subtle.generateKey(My,n,e)})).apply(this,arguments)}function Oy(n){return xy.apply(this,arguments)}function xy(){return(xy=y(function*(n){return window.crypto.subtle.exportKey(Gb,n)})).apply(this,arguments)}function Fy(){return(Fy=y(function*(n,e,t){return window.crypto.subtle.importKey(Gb,n,My,e,t)})).apply(this,arguments)}function Ly(){return(Ly=y(function*(n,e){return window.crypto.subtle.sign(My,n,e)})).apply(this,arguments)}function Uy(){return Hy.apply(this,arguments)}function Hy(){return(Hy=y(function*(){const n=yield CR(),t={alg:"dir",kty:"oct",k:Or(new Uint8Array(n))};return Ja(JSON.stringify(t))})).apply(this,arguments)}function By(){return(By=y(function*(n){const e=It(n),o=xr(JSON.parse(e).k);return window.crypto.subtle.importKey(by,o,Bi,!1,[Ry])})).apply(this,arguments)}function Rz(n,e){return jy.apply(this,arguments)}function jy(){return jy=y(function*(n,e){const t=e.split(".");if(5!==t.length)throw R($d,"jwe_length");const r=yield function bz(n){return By.apply(this,arguments)}(n).catch(()=>{throw R($d,"import_key")});try{const o=(new TextEncoder).encode(t[0]),i=xr(t[2]),s=xr(t[3]),a=xr(t[4]),c=8*a.byteLength,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);const u=yield window.crypto.subtle.decrypt({name:Bi,iv:i,tagLength:c,additionalData:o},r,l);return(new TextDecoder).decode(u)}catch{throw R($d,"decrypt")}}),jy.apply(this,arguments)}function CR(){return $y.apply(this,arguments)}function $y(){return($y=y(function*(){const n=yield window.crypto.subtle.generateKey({name:Bi,length:256},!0,[yR,Ry]);return window.crypto.subtle.exportKey(by,n)})).apply(this,arguments)}function ER(n){return Vy.apply(this,arguments)}function Vy(){return(Vy=y(function*(n){return window.crypto.subtle.importKey(by,n,pR,!1,[Iz])})).apply(this,arguments)}function IR(n,e,t){return Gy.apply(this,arguments)}function Gy(){return(Gy=y(function*(n,e,t){return window.crypto.subtle.deriveKey({name:pR,salt:e,hash:Dy,info:(new TextEncoder).encode(t)},n,{name:Bi,length:256},!1,[yR,Ry])})).apply(this,arguments)}function Mz(n,e,t){return zy.apply(this,arguments)}function zy(){return(zy=y(function*(n,e,t){const r=(new TextEncoder).encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield IR(n,o,t),s=yield window.crypto.subtle.encrypt({name:Bi,iv:new Uint8Array(12)},i,r);return{data:Or(new Uint8Array(s)),nonce:Or(o)}})).apply(this,arguments)}function wR(n,e,t,r){return qy.apply(this,arguments)}function qy(){return(qy=y(function*(n,e,t,r){const o=xr(r),i=yield IR(n,xr(e),t),s=yield window.crypto.subtle.decrypt({name:Bi,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(s)})).apply(this,arguments)}function TR(n){return Ky.apply(this,arguments)}function Ky(){return(Ky=y(function*(n){const e=yield vR(n);return Or(new Uint8Array(e))})).apply(this,arguments)}function _R(n){n.location.hash="","function"==typeof n.history.replaceState&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function zd(){return window.parent!==window}function cr(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function SR(){if(typeof window>"u")throw R(Ui)}function AR(n){if(!n)throw R(ho)}function Wy(n){SR(),function Oz(){if(te.hashContainsKnownProperties(window.location.hash)&&zd())throw R(Sd)}(),function Fz(){if(function Nz(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${Nt.POPUP_NAME_PREFIX}.`)}())throw R(Ad)}(),AR(n)}function DR(n,e){if(Wy(n),function xz(n){if(zd()&&!n)throw R(_d)}(e.system.allowRedirectInIframe),e.cache.cacheLocation===Ve.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw $m(Mu)}function bR(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const RR={now:()=>(RR.delegate||Date).now(),delegate:void 0};class Uz extends wt{constructor(e=1/0,t=1/0,r=RR){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}const qd="@azure/msal-angular",Za="4.0.22",Kd=new k("MSAL_INSTANCE"),Wd=new k("MSAL_GUARD_CONFIG"),Qy=new k("MSAL_INTERCEPTOR_CONFIG"),Hz=new k("MSAL_BROADCAST_CONFIG");let fo=(()=>{class n{constructor(t,r){this.msalInstance=t,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(qd,Za).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Uz(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new wt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Ut("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);const i=IG.getInteractionStatusFromEvent(o,this._inProgress.value);null!==i&&(this.msalInstance.getLogger().clone(qd,Za).verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){"startup"===this._inProgress.value&&this._inProgress.next("none")}}return n.\u0275fac=function(t){return new(t||n)(b(Kd),b(Hz,8))},n.\u0275prov=F({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n{constructor(t,r,o){this.instance=t,this.location=r,this.injector=o;const i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",Za)}initialize(){return le(this.instance.initialize())}acquireTokenPopup(t){return le(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return le(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return le(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return le(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(fo).resetInProgressEvent()}))}loginPopup(t){return le(this.instance.loginPopup(t))}loginRedirect(t){return le(this.instance.loginRedirect(t))}logout(t){return le(this.instance.logout(t))}logoutRedirect(t){return le(this.instance.logoutRedirect(t))}logoutPopup(t){return le(this.instance.logoutPopup(t))}ssoSilent(t){return le(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(qd,Za)),this.logger}setLogger(t){this.logger=t.clone(qd,Za),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(b(Kd),b(Ci),b(Gt))},n.\u0275prov=F({token:n,factory:n.\u0275fac}),n})(),Yy=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===O.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(ne(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(t.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(ne(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==O.Popup&&this.msalGuardConfig.interactionType!==O.Redirect)throw new Da("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),x(!0);if(te.hashContainsKnownProperties(window.location.hash)&&zd()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),x(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(Tr(()=>this.authService.handleRedirectObservable()),Tr(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),x(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){const o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=0===this.location.prepareExternalUrl(t.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?x(this.parseUrl(this.location.path())):x(this.parseUrl(""))}return x(!0)}),or(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),x(this.loginFailedRoute)):x(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(b(Wd),b(fo),b(po),b(Ci),b(Kt))},n.\u0275prov=F({token:n,factory:n.\u0275fac}),n})(),Bz=(()=>{class n{constructor(t,r,o,i,s){this.msalInterceptorConfig=t,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(t,r){if(this.msalInterceptorConfig.interactionType!==O.Popup&&this.msalInterceptorConfig.interactionType!==O.Redirect)throw new Da("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(t.url,t.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${t.url}`),this.acquireToken(s,o,i).pipe(et(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const c=t.headers.set("Authorization",`Bearer ${a.accessToken}`),l=t.clone({headers:c});return r.handle(l)}))}acquireToken(t,r,o){return this.authService.acquireTokenSilent({...t,scopes:r,account:o}).pipe(or(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(rr(1),et(i=>"none"===i?this.acquireTokenInteractively(t,r):this.msalBroadcastService.inProgress$.pipe(kt(s=>"none"===s),rr(1),et(()=>this.acquireToken(t,r,o))))))),et(i=>i.accessToken?x(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(kt(s=>"none"===s),rr(1),et(()=>this.acquireTokenInteractively(t,r))))))}acquireTokenInteractively(t,r){if(this.msalInterceptorConfig.interactionType===O.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...t,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...t,scopes:r,redirectStartPage:o}),on}getScopesForEndpoint(t,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(t,r){const o=[];return t.forEach(i=>{const s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(t,r){const o=["protocol","host","pathname","search","hash"];for(const i of o)if(t[i]){const s=decodeURIComponent(t[i]);if(!Pt.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(t){const r=this._document.createElement("a");return r.href=t,r.href}matchScopesToEndpoint(t,r,o){const i=[];return r.forEach(s=>{const a=[],c=t.get(s);null!==c?(c.forEach(l=>{if("string"==typeof l)a.push(l);else{const u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(null===l.scopes?i.push(null):l.scopes.forEach(h=>{a.push(h)}))}}),a.length>0&&i.push(a)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return n.\u0275fac=function(t){return new(t||n)(b(Qy),b(po),b(Ci),b(fo),b(Mt))},n.\u0275prov=F({token:n,factory:n.\u0275fac}),n})(),jz=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(L(po))},n.\u0275cmp=wo({type:n,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),$z=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:Kd,useValue:t},{provide:Wd,useValue:r},{provide:Qy,useValue:o},po]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Gn({type:n}),n.\u0275inj=wn({providers:[Yy,fo],imports:[jA]}),n})();const Vz=[{path:"profile",component:fG,canActivate:[Yy]},{path:"**",component:(()=>{class n{constructor(t,r){this.authService=t,this.msalBroadcastService=r}ngOnInit(){this.msalBroadcastService.msalSubject$.pipe(kt(t=>"msal:loginSuccess"===t.eventType)).subscribe(t=>{this.authService.instance.setActiveAccount(t.payload.account)})}static{this.\u0275fac=function(r){return new(r||n)(L(po),L(fo))}}static{this.\u0275cmp=wo({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"title"]],template:function(r,o){1&r&&(we(0,"div",0)(1,"h5"),oe(2," Welcome to the Microsoft Authentication Library For JavaScript - Angular SPA "),Z(),we(3,"p"),oe(4,' View your data from Microsoft Graph by clicking the "View Profile" link above. '),Z()())},encapsulation:2})}}return n})()}];let Gz=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Gn({type:n})}static{this.\u0275inj=wn({imports:[yb.forRoot(Vz,{useHash:!0}),yb]})}}return n})();function zz(n,e){if(1&n){const t=jp();we(0,"button",6),$s("click",function(){return cf(t),lf($p().login())}),oe(1," Sign In "),Z()}}function qz(n,e){if(1&n){const t=jp();we(0,"button",6),$s("click",function(){return cf(t),lf($p().logout())}),oe(1," Sign Out "),Z()}}const Kz=function(){return["profile"]};function Wz(n,e){1&n&&(we(0,"a",7),oe(1,"View Profile"),Z()),2&n&&ui("routerLink",X_(1,Kz))}let Qz=(()=>{class n{constructor(t,r,o){this.msalGuardConfig=t,this.authService=r,this.msalBroadcastService=o,this.title="Angular - MSAL Example",this.loginDisplay=!1,this.tokenExpiration="",this._destroying$=new wt}ngOnInit(){this.msalBroadcastService.inProgress$.pipe(kt(t=>"none"===t),mD(this._destroying$)).subscribe(()=>{this.setLoginDisplay()}),this.msalBroadcastService.msalSubject$.pipe(kt(t=>"msal:acquireTokenSuccess"===t.eventType)).subscribe(t=>{this.tokenExpiration=t.payload.expiresOn,localStorage.setItem("tokenExpiration",this.tokenExpiration)})}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0}login(){this.msalGuardConfig.authRequest?this.authService.loginRedirect({...this.msalGuardConfig.authRequest}):this.authService.loginRedirect()}logout(){this.authService.logoutRedirect()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}static{this.\u0275fac=function(r){return new(r||n)(L(Wd),L(po),L(fo))}}static{this.\u0275cmp=wo({type:n,selectors:[["app-root"]],decls:10,vars:3,consts:[["variant","dark","href","/",1,"navbar","navbar-dark","bg-primary"],[1,"navbar-brand"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"profileButton"],["class","btn btn-secondary",3,"routerLink",4,"ngIf"],[1,"container"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(r,o){1&r&&(we(0,"a",0)(1,"a",1),oe(2," Microsoft Identity Platform "),Z(),we(3,"a"),wl(4,zz,2,0,"button",2),wl(5,qz,2,0,"button",2),Z()(),we(6,"a",3),wl(7,Wz,2,2,"a",4),Z(),we(8,"div",5),di(9,"router-outlet"),Z()),2&r&&(rt(4),ui("ngIf",!o.loginDisplay),rt(1),ui("ngIf",o.loginDisplay),rt(2),ui("ngIf",o.loginDisplay))},dependencies:[LA,wm,vu],encapsulation:2})}}return n})();var Ae=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(Ae||{});class Fr{constructor(e,t,r){this.level=Ae.Info;const i=e||Fr.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:Ae.Info,this.correlationId=i.correlationId||I.EMPTY_STRING,this.packageName=t||I.EMPTY_STRING,this.packageVersion=r||I.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ae.Info}}clone(e,t,r){return new Fr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${Ae[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Ae.Error,containsPii:!1,correlationId:t||I.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Ae.Error,containsPii:!0,correlationId:t||I.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Ae.Warning,containsPii:!1,correlationId:t||I.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Ae.Warning,containsPii:!0,correlationId:t||I.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Ae.Info,containsPii:!1,correlationId:t||I.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Ae.Info,containsPii:!0,correlationId:t||I.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Ae.Verbose,containsPii:!1,correlationId:t||I.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Ae.Verbose,containsPii:!0,correlationId:t||I.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Ae.Trace,containsPii:!1,correlationId:t||I.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Ae.Trace,containsPii:!0,correlationId:t||I.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Ot={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"},Qd={createNewGuid:()=>{throw _(Q)},base64Decode:()=>{throw _(Q)},base64Encode:()=>{throw _(Q)},base64UrlEncode:()=>{throw _(Q)},encodeKid:()=>{throw _(Q)},getPublicKeyThumbprint:()=>y(function*(){throw _(Q)})(),removeTokenBindingKey:()=>y(function*(){throw _(Q)})(),clearKeystore:()=>y(function*(){throw _(Q)})(),signJwt:()=>y(function*(){throw _(Q)})(),hashString:()=>y(function*(){throw _(Q)})()},MR="@azure/msal-common",Zy="15.13.2";function Yd(n,e){if(!n)throw _(qu);try{const t=e(n);return JSON.parse(t)}catch{throw _(ka)}}function ji(n){if(!n)throw _(ka);const e=n.split(Ta.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?I.EMPTY_STRING:e[1]}}function kR(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Jd(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l,preferred_username:u,upn:d,login_hint:h}=r,f=s||c||l||"";return{tenantId:f,localAccountId:o||i||"",name:a,username:u||d||"",loginHint:h,isHomeTenant:kR(f,n)}}return{tenantId:t,localAccountId:e,username:"",isHomeTenant:kR(t,n)}}function Xy(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=Jd(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}function ev(n){return n&&(n.tid||n.tfp||n.acr)||null}class Pe{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){const o=new Pe;let i;o.authorityType=1===t.authorityType?"ADFS":t.protocolMode===Ot.OIDC?"Generic":"MSSTS",e.clientInfo&&r&&(i=Yd(e.clientInfo,r),i.xms_tdbr&&(o.dataBoundary="EU"===i.xms_tdbr?"EU":"None")),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw _(La);if(o.environment=s,o.realm=i?.utid||ev(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const l=Jd(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){const o=new Pe;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o.dataBoundary=e.dataBoundary,o}static generateHomeAccountId(e,t,r,o,i){if(1!==t&&2!==t){if(e)try{const s=Yd(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}function Ln(n,e){const t=function Yz(n){if(!n)throw _(Ku);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw _(Na);return t[2]}(n);try{const r=e(t);return JSON.parse(r)}catch{throw _(Na)}}function Un(n){if(!n.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return n.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function NR(n,e){if(0===e||Date.now()-3e5>n+e)throw _(Xu)}const OR={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},tv={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},xR=new Set;function FR(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=Zd(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function Zd(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}tv.metadata.forEach(n=>{n.aliases.forEach(e=>{xR.add(e)})});const Xd="cache_quota_exceeded",nv="cache_error_unknown",rv={[Xd]:"Exceeded cache storage capacity.",[nv]:"Unexpected error occurred when using cache storage."};class $i extends pe{constructor(e,t){const r=t||(rv[e]?rv[e]:rv[nv]);super(`${e}: ${r}`),Object.setPrototypeOf(this,$i.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function ov(n){return n instanceof Error?"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||n.message.includes("exceeded the quota")?new $i(Xd):new $i(n.name,n.message):new $i(nv)}class iv{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(MR,Zy),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?Pe.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=Ln(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=Xy(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){const i=Pe.getAccountInfo(e);let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=s.get(r);if(!l)return[];s=new Map([[r,l]])}const c=[];return s.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r,o){var i=this;return y(function*(){if(!e)throw _(od);try{e.account&&(yield i.setAccount(e.account,t,r)),e.idToken&&!1!==o?.idToken&&(yield i.setIdTokenCredential(e.idToken,t,r)),e.accessToken&&!1!==o?.accessToken&&(yield i.saveAccessToken(e.accessToken,t,r)),e.refreshToken&&!1!==o?.refreshToken&&(yield i.setRefreshTokenCredential(e.refreshToken,t,r)),e.appMetadata&&i.setAppMetadata(e.appMetadata,t)}catch(s){throw i.commonLogger?.error("CacheManager.saveCacheRecord: failed"),s instanceof pe?s:ov(s)}})()}saveAccessToken(e,t,r){var o=this;return y(function*(){const i={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=o.getTokenKeys(),a=Ge.fromString(e.target);s.accessToken.forEach(c=>{if(!o.accessTokenKeyMatchesFilter(c,i,!1))return;const l=o.getAccessTokenCredential(c,t);l&&o.credentialMatchesFilter(l,i)&&Ge.fromString(l.target).intersectingScopeSets(a)&&o.removeAccessToken(c,t)}),yield o.setAccessTokenCredential(e,t,r)})()}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{const s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&0===c.length||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||"string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Je.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===he.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(i=>i.includes(e.homeAccountId)&&i.includes(e.environment)).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Je.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==he.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Je.ID_TOKEN,clientId:this.clientId,realm:o},t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){const u=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&u.set(f,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){const i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);const s=Ge.createSearchScopes(t.scopes),a=t.authenticationScheme||he.BEARER,c=a&&a.toLowerCase()!==he.BEARER.toLowerCase()?Je.ACCESS_TOKEN_WITH_AUTH_SCHEME:Je.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,l,!0)){const g=this.getAccessTokenCredential(f,i);g&&this.credentialMatchesFilter(g,l)&&d.push(g)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),d.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),i)}),this.performanceClient.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),d[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&-1===o.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===o.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===o.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===o.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Je.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw _(ed);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||"1"!==t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=function Jz(n,e){let t;const r=n.canonicalAuthority;if(r){const o=new te(r).getUrlComponents().HostNameAndPort;t=FR(o,n.cloudDiscoveryMetadata?.metadata,"config",e)||FR(o,tv.metadata,"hardcoded_values",e)||n.knownAuthorities}return t||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==Je.ACCESS_TOKEN&&e.credentialType!==Je.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Ge.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(Fm)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class Xz extends iv{setAccount(){return y(function*(){throw _(Q)})()}getAccount(){throw _(Q)}setIdTokenCredential(){return y(function*(){throw _(Q)})()}getIdTokenCredential(){throw _(Q)}setAccessTokenCredential(){return y(function*(){throw _(Q)})()}getAccessTokenCredential(){throw _(Q)}setRefreshTokenCredential(){return y(function*(){throw _(Q)})()}getRefreshTokenCredential(){throw _(Q)}setAppMetadata(){throw _(Q)}getAppMetadata(){throw _(Q)}setServerTelemetry(){throw _(Q)}getServerTelemetry(){throw _(Q)}setAuthorityMetadata(){throw _(Q)}getAuthorityMetadata(){throw _(Q)}getAuthorityMetadataKeys(){throw _(Q)}setThrottlingCache(){throw _(Q)}getThrottlingCache(){throw _(Q)}removeItem(){throw _(Q)}getKeys(){throw _(Q)}getAccountKeys(){throw _(Q)}getTokenKeys(){throw _(Q)}generateCredentialKey(){throw _(Q)}generateAccountKey(){throw _(Q)}}class LR{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class UR{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new LR}}startPerformanceMeasurement(){return new LR}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const HR={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},eq={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ae.Info,correlationId:I.EMPTY_STRING},tq={claimsBasedCachingEnabled:!1},nq={sendGetRequestAsync:()=>y(function*(){throw _(Q)})(),sendPostRequestAsync:()=>y(function*(){throw _(Q)})()},rq={sku:I.SKU,version:Zy,cpu:I.EMPTY_STRING,os:I.EMPTY_STRING},oq={clientSecret:I.EMPTY_STRING,clientAssertion:void 0},iq={azureCloudInstance:"none",tenant:`${I.DEFAULT_COMMON_TENANT}`},sq={application:{appName:"",appVersion:""}};function cq(n){return{clientCapabilities:[],azureCloudOptions:iq,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...n}}function BR(n){return n.authOptions.authority.options.protocolMode===Ot.OIDC}const lq={sendGetRequestAsync:()=>Promise.reject(_(Q)),sendPostRequestAsync:()=>Promise.reject(_(Q))};class eh{navigateInternal(e,t){return eh.defaultNavigateWindow(e,t)}navigateExternal(e,t){return eh.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(R(Vd,"failed_to_redirect"))},t.timeout)})}}class th extends pe{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,th.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function Xa(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new th(n,e,t)}class uq{sendGetRequestAsync(e,t){return y(function*(){let r,o={},i=0;const s=jR(t);try{r=yield fetch(e,{method:"GET",headers:s})}catch(a){throw Xa(R(window.navigator.onLine?kd:Hi),void 0,void 0,a)}o=$R(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw Xa(R(qa),i,o,a)}})()}sendPostRequestAsync(e,t){return y(function*(){const r=t&&t.body||"",o=jR(t);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch(c){throw Xa(R(window.navigator.onLine?Md:Hi),void 0,void 0,c)}a=$R(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw Xa(R(qa),s,a,c)}})()}}function jR(n){try{const e=new Headers;return n&&n.headers?(Object.entries(n.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch(e){throw Xa(R(uR),void 0,void 0,e)}}function $R(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw R(dR)}}const sv=1e4,VR=2e3,go="4.26.2",Xe="msal",av="browser",st=2,nh=2,gq=`${Xe}.${av}.log.level`,mq=`${Xe}.${av}.log.pii`,yq=`${Xe}.${av}.platform.auth.dom`,zR=`${Xe}.version`,qR="account.keys",KR="token.keys";function Vi(n=nh){return n<1?`${Xe}.${qR}`:`${Xe}.${n}.${qR}`}function Gi(n,e=st){return e<1?`${Xe}.${KR}.${n}`:`${Xe}.${e}.${KR}.${n}`}class cv{static loggerCallback(e,t){switch(e){case Ae.Error:return void console.error(t);case Ae.Info:return void console.info(t);case Ae.Verbose:return void console.debug(t);case Ae.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment=typeof window<"u",this.config=function fq({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:I.EMPTY_STRING,authority:`${I.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:I.EMPTY_STRING,authorityMetadata:I.EMPTY_STRING,redirectUri:typeof window<"u"?cr():"",postLogoutRedirectUri:I.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Ot.AAD,OIDCOptions:{serverResponseType:_u.FRAGMENT,defaultScopes:[I.OPENID_SCOPE,I.PROFILE_SCOPE,I.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:I.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:Ve.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Ve.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||e.cacheLocation!==Ve.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Ae.Info,piiLoggingEnabled:!1},l={...{...HR,loggerOptions:a,networkClient:o?new uq:lq,navigationClient:new eh,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||6e4,iframeHashTimeout:t?.loadFrameTimeout||sv,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||VR,pollIntervalMilliseconds:Nt.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:t?.loggerOptions||a},u={application:{appName:I.EMPTY_STRING,appVersion:I.EMPTY_STRING},client:new UR};if(n?.protocolMode!==Ot.OIDC&&n?.OIDCOptions&&new Fr(l.loggerOptions).warning(JSON.stringify(me(ju))),n?.protocolMode&&n.protocolMode===Ot.OIDC&&l?.allowPlatformBroker)throw me($u);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n?.OIDCOptions}},cache:{...s,...e},system:l,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{t=window[Ve.SessionStorage]}catch{}const r=t?.getItem(gq),o=t?.getItem(mq)?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(Ae).includes(r)?Ae[r]:void 0;a&&(s.loggerCallback=cv.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new Fr(s,"@azure/msal-browser",go),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let WR=(()=>{class n extends cv{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){var t=this;return y(function*(){return t.available=typeof window<"u",t.available})()}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();const QR="missing_kid_error",YR="missing_alg_error",vq={[QR]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[YR]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class lv extends pe{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,lv.prototype)}}function JR(n){return new lv(n,vq[n])}class uv{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw JR(QR);if(!e.alg)throw JR(YR);const t=new uv({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Cq{constructor(){this.dbName=Um,this.version=1,this.tableName=CG,this.dbOpen=!1}open(){var e=this;return y(function*(){return new Promise((t,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,t()}),o.addEventListener("error",()=>r(R(Wa)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return y(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(R(Pr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}setItem(e,t){var r=this;return y(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(R(Pr));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",l=>{r.closeConnection(),i(l)})})})()}removeItem(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(R(Pr));const a=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);a.addEventListener("success",()=>{t.closeConnection(),r()}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}getKeys(){var e=this;return y(function*(){return yield e.validateDbIsOpen(),new Promise((t,r)=>{if(!e.db)return r(R(Pr));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(R(Pr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(1===l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return y(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((t,r)=>{const o=window.indexedDB.deleteDatabase(Um),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),t(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),t(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class rh{constructor(){this.cache=new Map}initialize(){return y(function*(){})()}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){var r=this;return y(function*(){r.setItem(e,t)})()}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class Eq{constructor(e){this.inMemoryCache=new rh,this.indexedDBCache=new Cq,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Ya&&e.errorCode===Wa))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var t=this;return y(function*(){const r=t.inMemoryCache.getItem(e);if(!r)try{return t.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.getItem(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}setItem(e,t){var r=this;return y(function*(){r.inMemoryCache.setItem(e,t);try{yield r.indexedDBCache.setItem(e,t)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var t=this;return y(function*(){t.inMemoryCache.removeItem(e);try{yield t.indexedDBCache.removeItem(e)}catch(r){t.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return y(function*(){const t=e.inMemoryCache.getKeys();if(0===t.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return t})()}containsKey(e){var t=this;return y(function*(){const r=t.inMemoryCache.containsKey(e);if(!r)try{return t.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.containsKey(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return y(function*(){try{e.logger.verbose("Deleting persistent keystore");const t=yield e.indexedDBCache.deleteDatabase();return t&&e.logger.verbose("Persistent keystore deleted"),t}catch(t){return e.handleDatabaseAccessError(t),!1}})()}}let oh=(()=>{class n{constructor(t,r,o){this.logger=t,function Tz(n){if(!window)throw R(Ui);if(!window.crypto)throw R(Ga);if(!n&&!window.crypto.subtle)throw R(Ga,"crypto_subtle_undefined")}(o??!1),this.cache=new Eq(this.logger),this.performanceClient=r}createNewGuid(){return yn()}base64Encode(t){return Ja(t)}base64Decode(t){return It(t)}base64UrlEncode(t){return Gd(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){var r=this;return y(function*(){const o=r.performanceClient?.startMeasurement(p.CryptoOptsGetPublicKeyThumbprint,t.correlationId),i=yield function Sz(n,e){return Py.apply(this,arguments)}(n.EXTRACTABLE,n.POP_KEY_USAGES),s=yield Oy(i.publicKey),c=ZR({e:s.e,kty:s.kty,n:s.n}),l=yield r.hashString(c),u=yield Oy(i.privateKey),d=yield function Az(n,e,t){return Fy.apply(this,arguments)}(u,!1,["sign"]);return yield r.cache.setItem(l,{privateKey:d,publicKey:i.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),o&&o.end({success:!0}),l})()}removeTokenBindingKey(t){var r=this;return y(function*(){if(yield r.cache.removeItem(t),yield r.cache.containsKey(t))throw _(ad)})()}clearKeystore(){var t=this;return y(function*(){t.cache.clearInMemory();try{return yield t.cache.clearPersistent(),!0}catch(r){return r instanceof Error?t.logger.error(`Clearing keystore failed with error: ${r.message}`):t.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(t,r,o,i){var s=this;return y(function*(){const a=s.performanceClient?.startMeasurement(p.CryptoOptsSignJwt,i),c=yield s.cache.getItem(r);if(!c)throw R(Ka);const l=yield Oy(c.publicKey),u=ZR(l),d=Gd(JSON.stringify({kid:r})),f=Gd(uv.getShrHeaderString({...o?.header,alg:l.alg,kid:d}));t.cnf={jwk:JSON.parse(u)};const m=`${f}.${Gd(JSON.stringify(t))}`,w=(new TextEncoder).encode(m),C=yield function Dz(n,e){return Ly.apply(this,arguments)}(c.privateKey,w),P=`${m}.${Or(new Uint8Array(C))}`;return a&&a.end({success:!0}),P})()}hashString(t){return y(function*(){return TR(t)})()}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function ZR(n){return JSON.stringify(n,Object.keys(n).sort())}const Qt=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},E=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let _q=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){var o=this;return y(function*(){o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryDetectRegion,o.correlationId);let i=t;if(i)r.region_source="3";else{const s=n.IMDS_OPTIONS;try{const a=yield E(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(I.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield E(o.getCurrentVersion.bind(o),p.RegionDiscoveryGetCurrentVersion,o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const l=yield E(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(c,s);200===l.status&&(i=l.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(t,r){var o=this;return y(function*(){return o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetRegionFromIMDS,o.correlationId),o.networkInterface.sendGetRequestAsync(`${I.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,I.IMDS_TIMEOUT)})()}getCurrentVersion(t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetCurrentVersion,r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${I.IMDS_ENDPOINT}?format=json`,t);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();function xt(){return Math.round((new Date).getTime()/1e3)}function XR(n){return n.getTime()/1e3}function zi(n){return n?new Date(1e3*Number(n)):new Date}function ih(n,e){const t=Number(n)||0;return xt()+e>t}function eM(n,e){const t=Number(n)+24*e*60*60*1e3;return Date.now()>t}function sh(n,e,t,r,o){return{credentialType:Je.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function ah(n,e,t,r,o,i,s,a,c,l,u,d,h,f,g){const m={homeAccountId:n,credentialType:Je.ACCESS_TOKEN,secret:t,cachedAt:xt().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||he.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(m.userAssertionHash=d),l&&(m.refreshOn=l.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=g),m.tokenType?.toLowerCase()!==he.BEARER.toLowerCase())switch(m.credentialType=Je.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case he.POP:const v=Ln(t,c);if(!v?.cnf?.kid)throw _(id);m.keyId=v.cnf.kid;break;case he.SSH:m.keyId=h}return m}function tM(n,e,t,r,o,i,s){const a={credentialType:Je.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function ch(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function nM(n){return!!n&&ch(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Je.ACCESS_TOKEN||n.credentialType===Je.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function rM(n){return!!n&&ch(n)&&n.credentialType===Je.REFRESH_TOKEN}function oM(){return xt()+86400}function lh(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function dv(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function iM(n){return n.expiresAt<=xt()}class at{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new _q(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(I.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case I.ADFS:return 1;case I.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new te(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw _(mn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw _(mn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw _(mn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw _(cd);return this.replacePath(this.metadata.end_session_endpoint)}throw _(mn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw _(mn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw _(mn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!at.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode!==Ot.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new te(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(0===c&&this.canReplaceTenant(o)){const u=new te(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===Ot.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityResolveEndpointsAsync,e.correlationId);const t=e.getCurrentMetadataEntity(),r=yield E(e.updateCloudDiscoveryMetadata.bind(e),p.AuthorityUpdateCloudDiscoveryMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,t.preferred_network);const o=yield E(e.updateEndpointMetadata.bind(e),p.AuthorityUpdateEndpointMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.updateCachedMetadata(t,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:oM(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){"cache"!==t&&"cache"!==r?.source&&(e.expiresAt=oM(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateEndpointMetadata,t.correlationId);const r=t.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&t.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield E(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(r.metadata);lh(e,i,!1),e.canonical_authority=t.canonicalAuthority}return r.source}let o=yield E(t.getEndpointMetadataFromNetwork.bind(t),p.AuthorityGetEndpointMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return t.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield E(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(o)),lh(e,o,!0),"network";throw _(Qu,t.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),lh(e,t,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return lh(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=iM(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new te(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw me(Uu)}return null}getEndpointMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetEndpointMetadataFromNetwork,e.correlationId);const t={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,t);return function Iq(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in OR?OR[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateMetadataWithRegionalInformation,t.correlationId);const r=t.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==I.AZURE_REGION_AUTO_DISCOVER_FLAG)return t.regionDiscoveryMetadata.region_outcome="2",t.regionDiscoveryMetadata.region_used=r,at.replaceWithRegionalInformation(e,r);const o=yield E(t.regionDiscovery.detectRegion.bind(t.regionDiscovery),p.RegionDiscoveryDetectRegion,t.logger,t.performanceClient,t.correlationId)(t.authorityOptions.azureRegionConfiguration?.environmentRegion,t.regionDiscoveryMetadata);if(o)return t.regionDiscoveryMetadata.region_outcome="4",t.regionDiscoveryMetadata.region_used=o,at.replaceWithRegionalInformation(e,o);t.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateCloudDiscoveryMetadata,t.correlationId);const r=t.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield E(t.getCloudDiscoveryMetadataFromNetwork.bind(t),p.AuthorityGetCloudDiscoveryMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return dv(e,o,!0),"network";throw me(Hu)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||I.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||I.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||I.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),dv(e,t,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function Zz(n){return Zd(tv.metadata,n)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),dv(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=iM(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),at.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=Zd(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),me(Ma)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),at.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetCloudDiscoveryMetadataFromNetwork,e.correlationId);const t=`${I.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(t,r);let s,a;if(function wq(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function Tq(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===I.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Zd(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof pe?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=at.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&te.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;return t&&"none"!==t.azureCloudInstance&&(r=`${t.azureCloudInstance}/${t.tenant?t.tenant:I.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return I.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw _(mn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return xR.has(e)}static isPublicCloudAuthority(e){return I.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new te(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${I.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=te.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=at.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=at.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=at.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new te(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(I.CIAM_AUTH_URL)&&(t=`${t}${o.HostNameAndPort.split(".")[0]}${I.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function sM(n){return n.endsWith(I.FORWARD_SLASH)?n:`${n}${I.FORWARD_SLASH}`}at.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const qi="no_tokens_found",uh="native_account_unavailable",hv="refresh_token_expired",fv="ux_not_allowed",Ki="bad_token",aM=["interaction_required","consent_required","login_required",Ki,fv],Lq=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],dh={[qi]:"No refresh token found in the cache. Please sign-in.",[uh]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[hv]:"Refresh token has expired.",[Ki]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[fv]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Cn extends pe{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,Cn.prototype),this.timestamp=o||I.EMPTY_STRING,this.traceId=i||I.EMPTY_STRING,this.correlationId=s||I.EMPTY_STRING,this.claims=a||I.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function cM(n,e,t){const r=!!n&&aM.indexOf(n)>-1,o=!!t&&Lq.indexOf(t)>-1,i=!!e&&aM.some(s=>e.indexOf(s)>-1);return r||i||o}function hh(n){return new Cn(n,dh[n])}function fh(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}class lM{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw _(Q)}setItem(e,t,r,o=!0,i="Lax"){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){s+=`expires=${function Hq(n){return new Date((new Date).getTime()+864e5*n).toUTCString()}(r)};`}(o||"None"===i)&&(s+="Secure;"),document.cookie=s}setUserData(){return y(function*(){return Promise.reject(_(Q))})()}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function Lr(n,e){const t=n.getItem(Vi(e));return t?JSON.parse(t):[]}function En(n,e,t){const r=e.getItem(Gi(n,t));if(r){const o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function ph(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}const uM="msal.cache.encryption";class jq{constructor(e,t,r){if(!window.localStorage)throw $m(Aa);this.memoryStorage=new rh,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}initialize(e){var t=this;return y(function*(){const r=new lM,o=r.getItem(uM);let i={key:"",id:""};if(o)try{i=JSON.parse(o)}catch{}if(i.key&&i.id){const s=Qt(xr,p.Base64Decode,t.logger,t.performanceClient,e)(i.key);t.encryptionCookie={id:i.id,key:yield E(ER,p.GenerateHKDF,t.logger,t.performanceClient,e)(s)}}else{const s=yn(),a=yield E(CR,p.GenerateBaseKey,t.logger,t.performanceClient,e)(),c=Qt(Or,p.UrlEncodeArr,t.logger,t.performanceClient,e)(new Uint8Array(a));t.encryptionCookie={id:s,key:yield E(ER,p.GenerateHKDF,t.logger,t.performanceClient,e)(a)},r.setItem(uM,JSON.stringify({id:s,key:c}),0,!0,"None")}yield E(t.importExistingCache.bind(t),p.ImportExistingCache,t.logger,t.performanceClient,e)(e),t.broadcast.addEventListener("message",t.updateCache.bind(t)),t.initialized=!0})()}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw R(ho);return this.memoryStorage.getItem(e)}decryptData(e,t,r){var o=this;return y(function*(){if(!o.initialized||!o.encryptionCookie)throw R(ho);if(t.id!==o.encryptionCookie.id)return o.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=yield E(wR,p.Decrypt,o.logger,o.performanceClient,r)(o.encryptionCookie.key,t.nonce,o.getContext(e),t.data);if(!i)return null;try{return{...JSON.parse(i),lastUpdatedAt:t.lastUpdatedAt}}catch{return o.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}})()}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r,o,i){var s=this;return y(function*(){if(!s.initialized||!s.encryptionCookie)throw R(ho);if(i)s.setItem(e,t);else{const{data:a,nonce:c}=yield E(Mz,p.Encrypt,s.logger,s.performanceClient,r)(s.encryptionCookie.key,t,s.getContext(e));s.setItem(e,JSON.stringify({id:s.encryptionCookie.id,nonce:c,data:a,lastUpdatedAt:o}))}s.memoryStorage.setItem(e,t),s.broadcast.postMessage({key:e,value:t,context:s.getContext(e)})})()}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Lr(this).forEach(r=>this.removeItem(r));const t=En(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Xe)||-1!==r.indexOf(this.clientId))&&this.removeItem(r)})}importExistingCache(e){var t=this;return y(function*(){if(!t.encryptionCookie)return;let r=Lr(t);r=yield t.importArray(r,e),r.length?t.setItem(Vi(),JSON.stringify(r)):t.removeItem(Vi());const o=En(t.clientId,t);o.idToken=yield t.importArray(o.idToken,e),o.accessToken=yield t.importArray(o.accessToken,e),o.refreshToken=yield t.importArray(o.refreshToken,e),o.idToken.length||o.accessToken.length||o.refreshToken.length?t.setItem(Gi(t.clientId),JSON.stringify(o)):t.removeItem(Gi(t.clientId))})()}getItemFromEncryptedCache(e,t){var r=this;return y(function*(){if(!r.encryptionCookie)return null;const o=r.getItem(e);if(!o)return null;let i;try{i=JSON.parse(o)}catch{return null}return ph(i)?i.id!==r.encryptionCookie.id?(r.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(r.performanceClient.incrementFields({encryptedCacheCount:1},t),E(wR,p.Decrypt,r.logger,r.performanceClient,t)(r.encryptionCookie.key,i.nonce,r.getContext(e),i.data)):(r.performanceClient.incrementFields({unencryptedCacheCount:1},t),o)})()}importArray(e,t){var r=this;return y(function*(){const o=[],i=[];return e.forEach(s=>{const a=r.getItemFromEncryptedCache(s,t).then(c=>{c?(r.memoryStorage.setItem(s,c),o.push(s)):r.removeItem(s)});i.push(a)}),yield Promise.all(i),o})()}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(p.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:o,context:i}=e.data;return r?i&&i!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),void t.end({success:!1,errorCode:"contextMismatch"})):(o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class $q{constructor(){if(!window.sessionStorage)throw $m(Aa)}initialize(){return y(function*(){})()}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){var r=this;return y(function*(){r.setItem(e,t)})()}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}function Ur(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class gv extends iv{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new rh,this.browserStorage=dM(e,t.cacheLocation,o,i),this.temporaryCacheStorage=dM(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new lM,this.eventHandler=s}initialize(e){var t=this;return y(function*(){t.performanceClient.addFields({cacheLocation:t.cacheConfig.cacheLocation,cacheRetentionDays:t.cacheConfig.cacheRetentionDays},e),yield t.browserStorage.initialize(e),yield t.migrateExistingCache(e),t.trackVersionChanges(e)})()}migrateExistingCache(e){var t=this;return y(function*(){let r=Lr(t.browserStorage),o=En(t.clientId,t.browserStorage);t.performanceClient.addFields({preMigrateAcntCount:r.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},e);for(let s=0;s<nh;s++){const a=s;yield t.removeStaleAccounts(s,a,e)}for(let s=0;s<st;s++){const a=s;yield t.migrateIdTokens(s,a,e)}const i=t.getKMSIValues();for(let s=0;s<st;s++)yield t.migrateAccessTokens(s,i,e),yield t.migrateRefreshTokens(s,i,e);r=Lr(t.browserStorage),o=En(t.clientId,t.browserStorage),t.performanceClient.addFields({postMigrateAcntCount:r.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},e)})()}updateOldEntry(e,t){var r=this;return y(function*(){const o=r.browserStorage.getItem(e),i=r.validateAndParseJson(o||"");if(!i)return r.browserStorage.removeItem(e),null;if(i.lastUpdatedAt){if(eM(i.lastUpdatedAt,r.cacheConfig.cacheRetentionDays))return r.browserStorage.removeItem(e),r.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null}else i.lastUpdatedAt=Date.now().toString(),r.setItem(e,JSON.stringify(i),t);const s=ph(i)?yield r.browserStorage.decryptData(e,i,t):i;return s&&ch(s)?(nM(s)||rM(s))&&s.expiresOn&&ih(s.expiresOn,300)?(r.browserStorage.removeItem(e),r.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):s:(r.performanceClient.incrementFields({invalidCacheCount:1},t),null)})()}removeStaleAccounts(e,t,r){var o=this;return y(function*(){const i=Lr(o.browserStorage,e);if(0!==i.length){for(const s of[...i]){o.performanceClient.incrementFields({oldAcntCount:1},r);const a=o.browserStorage.getItem(s),c=o.validateAndParseJson(a||"");c?c.lastUpdatedAt?eM(c.lastUpdatedAt,o.cacheConfig.cacheRetentionDays)&&(yield o.removeAccountOldSchema(s,c,t,r),Ur(i,s)):(c.lastUpdatedAt=Date.now().toString(),o.setItem(s,JSON.stringify(c),r)):Ur(i,s)}o.setAccountKeys(i,r,e)}})()}removeAccountOldSchema(e,t,r,o){var i=this;return y(function*(){const a=(ph(t)?yield i.browserStorage.decryptData(e,t,o):t)?.homeAccountId;if(a){const c=i.getTokenKeys(r);[...c.idToken].filter(l=>l.includes(a)).forEach(l=>{i.browserStorage.removeItem(l),Ur(c.idToken,l)}),[...c.accessToken].filter(l=>l.includes(a)).forEach(l=>{i.browserStorage.removeItem(l),Ur(c.accessToken,l)}),[...c.refreshToken].filter(l=>l.includes(a)).forEach(l=>{i.browserStorage.removeItem(l),Ur(c.refreshToken,l)}),i.setTokenKeys(c,o,r)}i.performanceClient.incrementFields({expiredAcntRemovedCount:1},o),i.browserStorage.removeItem(e)})()}getKMSIValues(){const e={},t=this.getTokenKeys().idToken;for(const r of t){const o=this.browserStorage.getUserData(r);if(o){const i=JSON.parse(o),s=Ln(i.secret,It);s&&(e[i.homeAccountId]=Un(s))}}return e}migrateIdTokens(e,t,r){var o=this;return y(function*(){const i=En(o.clientId,o.browserStorage,e);if(0===i.idToken.length)return;const s=En(o.clientId,o.browserStorage,st),a=Lr(o.browserStorage),c=Lr(o.browserStorage,t);for(const l of[...i.idToken]){o.performanceClient.incrementFields({oldITCount:1},r);const u=yield o.updateOldEntry(l,r);if(!u){Ur(i.idToken,l);continue}const d=a.find(S=>S.includes(u.homeAccountId)),h=c.find(S=>S.includes(u.homeAccountId));let f=null;if(d)f=o.getAccount(d,r);else if(h){const S=o.browserStorage.getItem(h),P=o.validateAndParseJson(S||"");f=P&&ph(P)?yield o.browserStorage.decryptData(h,P,r):P}if(!f){o.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const g=Ln(u.secret,It),m=o.generateCredentialKey(u),v=o.getIdTokenCredential(m,r),w=Object.keys(g).includes("signin_state"),C=v&&Object.keys(Ln(v.secret,It)||{}).includes("signin_state");if(!v||u.lastUpdatedAt>v.lastUpdatedAt&&(w||!C)){const S=f.tenantProfiles||[],P=ev(g)||f.realm;if(P&&!S.find(Ft=>Ft.tenantId===P)){const Ft=Jd(f.homeAccountId,f.localAccountId,P,g);S.push(Ft)}f.tenantProfiles=S;const B=o.generateAccountKey(Pe.getAccountInfo(f)),Oe=Un(g);yield o.setUserData(B,JSON.stringify(f),r,f.lastUpdatedAt,Oe),a.includes(B)||a.push(B),yield o.setUserData(m,JSON.stringify(u),r,u.lastUpdatedAt,Oe),o.performanceClient.incrementFields({migratedITCount:1},r),s.idToken.push(m)}}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r),o.setAccountKeys(a,r)})()}migrateAccessTokens(e,t,r){var o=this;return y(function*(){const i=En(o.clientId,o.browserStorage,e);if(0===i.accessToken.length)return;const s=En(o.clientId,o.browserStorage,st);for(const a of[...i.accessToken]){o.performanceClient.incrementFields({oldATCount:1},r);const c=yield o.updateOldEntry(a,r);if(!c){Ur(i.accessToken,a);continue}if(!Object.keys(t).includes(c.homeAccountId)){o.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const l=o.generateCredentialKey(c),u=t[c.homeAccountId];if(s.accessToken.includes(l)){const d=o.getAccessTokenCredential(l,r);(!d||c.lastUpdatedAt>d.lastUpdatedAt)&&(yield o.setUserData(l,JSON.stringify(c),r,c.lastUpdatedAt,u),o.performanceClient.incrementFields({migratedATCount:1},r))}else yield o.setUserData(l,JSON.stringify(c),r,c.lastUpdatedAt,u),o.performanceClient.incrementFields({migratedATCount:1},r),s.accessToken.push(l)}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r)})()}migrateRefreshTokens(e,t,r){var o=this;return y(function*(){const i=En(o.clientId,o.browserStorage,e);if(0===i.refreshToken.length)return;const s=En(o.clientId,o.browserStorage,st);for(const a of[...i.refreshToken]){o.performanceClient.incrementFields({oldRTCount:1},r);const c=yield o.updateOldEntry(a,r);if(!c){Ur(i.refreshToken,a);continue}if(!Object.keys(t).includes(c.homeAccountId)){o.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const l=o.generateCredentialKey(c),u=t[c.homeAccountId];if(s.refreshToken.includes(l)){const d=o.getRefreshTokenCredential(l,r);(!d||c.lastUpdatedAt>d.lastUpdatedAt)&&(yield o.setUserData(l,JSON.stringify(c),r,c.lastUpdatedAt,u),o.performanceClient.incrementFields({migratedRTCount:1},r))}else yield o.setUserData(l,JSON.stringify(c),r,c.lastUpdatedAt,u),o.performanceClient.incrementFields({migratedRTCount:1},r),s.refreshToken.push(l)}o.setTokenKeys(i,r,e),o.setTokenKeys(s,r)})()}trackVersionChanges(e){const t=this.browserStorage.getItem(zR);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==go&&this.setItem(zR,go,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch{return null}}setItem(e,t,r){const o=new Array(st+1).fill(0),i=[];for(let a=0;a<=20;a++)try{if(this.browserStorage.setItem(e,t),a>0)for(let c=0;c<=st;c++){const l=o.slice(0,c).reduce((d,h)=>d+h,0);if(l>=a)break;a>l&&o[c]>0&&this.removeAccessTokenKeys(i.slice(l,a>l+o[c]?l+o[c]:a),r,c)}break}catch(c){const l=ov(c);if(!(l.errorCode===Xd&&a<20))throw l;if(!i.length)for(let u=0;u<=st;u++)if(e===Gi(this.clientId,u)){const d=JSON.parse(t).accessToken;i.push(...d),o[u]=d.length}else{const d=this.getTokenKeys(u).accessToken;i.push(...d),o[u]=d.length}if(i.length<=a)throw l;this.removeAccessToken(i[a],r,!1)}}setUserData(e,t,r,o,i){var s=this;return y(function*(){const a=new Array(st+1).fill(0),c=[];for(let u=0;u<=20;u++)try{if(yield E(s.browserStorage.setUserData.bind(s.browserStorage),p.SetUserData,s.logger,s.performanceClient)(e,t,r,o,i),u>0)for(let d=0;d<=st;d++){const h=a.slice(0,d).reduce((g,m)=>g+m,0);if(h>=u)break;u>h&&a[d]>0&&s.removeAccessTokenKeys(c.slice(h,u>h+a[d]?h+a[d]:u),r,d)}break}catch(d){const h=ov(d);if(!(h.errorCode===Xd&&u<20))throw h;if(!c.length)for(let f=0;f<=st;f++){const g=s.getTokenKeys(f).accessToken;c.push(...g),a[f]=g.length}if(c.length<=u)throw h;s.removeAccessToken(c[u],r,!1)}})()}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const o=this.validateAndParseJson(r);return o&&Pe.isAccountEntity(o)?iv.toObject(new Pe,o):null}setAccount(e,t,r){var o=this;return y(function*(){o.logger.trace("BrowserCacheManager.setAccount called");const i=o.generateAccountKey(Pe.getAccountInfo(e)),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.addAccountKeyToMap(i,t);o.performanceClient.addFields({kmsi:r},t),o.cacheConfig.cacheLocation===Ve.LocalStorage&&a&&o.eventHandler.emitEvent("msal:accountAdded",void 0,Pe.getAccountInfo(e))})()}getAccountKeys(){return Lr(this.browserStorage)}setAccountKeys(e,t,r=nh){0===e.length?this.removeItem(Vi(r)):this.setItem(Vi(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return-1===r.indexOf(e)?(r.push(e),this.setItem(Vi(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);o>-1?(r.splice(o,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===Ve.LocalStorage&&this.eventHandler.emitEvent("msal:accountRemoved",void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=st){this.logger.trace("removeAccessTokenKey called");const o=this.getTokenKeys(r);let i=0;if(e.forEach(s=>{const a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0)return this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),void this.setTokenKeys(o,t,r)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=st){return En(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=st){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(Gi(this.clientId,r),JSON.stringify(e),t):this.removeItem(Gi(this.clientId,r))}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const o=this.validateAndParseJson(r);return o&&function Aq(n){return!!n&&ch(n)&&n.hasOwnProperty("realm")&&n.credentialType===Je.ID_TOKEN}(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,t,r){var o=this;return y(function*(){o.logger.trace("BrowserCacheManager.setIdTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys();-1===a.idToken.indexOf(i)&&(o.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),a.idToken.push(i),o.setTokenKeys(a,t))})()}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const o=this.validateAndParseJson(r);return o&&nM(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,t,r){var o=this;return y(function*(){o.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys(),c=a.accessToken.indexOf(i);-1!==c&&a.accessToken.splice(c,1),o.logger.trace(`access token ${-1===c?"added to":"updated in"} map`),a.accessToken.push(i),o.setTokenKeys(a,t)})()}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const o=this.validateAndParseJson(r);return o&&rM(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,t,r){var o=this;return y(function*(){o.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const i=o.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,yield o.setUserData(i,JSON.stringify(e),t,s,r);const a=o.getTokenKeys();-1===a.refreshToken.indexOf(i)&&(o.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),a.refreshToken.push(i),o.setTokenKeys(a,t))})()}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function Mq(n,e){return!!e&&0===n.indexOf(Fm)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function Rq({environment:n,clientId:e}){return[Fm,n,e].join(Ta.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function Dq(n,e){const t=0===n.indexOf(Ze.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function kq(n,e){return!!e&&0===n.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",t)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||I.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||I.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey("active-account-filters"),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey("active-account-filters");if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:xt().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent("msal:activeAccountChanged")}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function bq(n,e){let t=!1;n&&(t=0===n.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Ve.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(-1!==t.indexOf(Xe)||-1!==t.indexOf(this.clientId))&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(-1!==t.indexOf(Xe)||-1!==t.indexOf(this.clientId))&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(p.ClearTokensAndKeysWithClaims,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(o=>{const i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Pt.startsWith(e,Xe)?e:`${Xe}.${this.clientId}.${e}`}generateCredentialKey(e){const t=e.credentialType===Je.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==he.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Xe}.${st}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("|").toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return[`${Xe}.${nh}`,e.homeAccountId,e.environment,t||e.tenantId||""].join("|").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("code.verifier")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Ja(JSON.stringify(e));if(this.setTemporaryCache("request.params",r,!0),t){const o=Ja(t);this.setTemporaryCache("code.verifier",o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache("request.params",!0);if(!e)throw R(bd);const t=this.getTemporaryCache("code.verifier",!0);let r,o="";try{r=JSON.parse(It(e)),t&&(o=It(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),R(Rd)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${Xe}.interaction.status`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),_R(window),null}}setInteractionInProgress(e,t="signin"){const r=`${Xe}.interaction.status`;if(e){if(this.getInteractionInProgress())throw R(Ed);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){var r=this;return y(function*(){const o=sh(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;t.claims&&(i=yield r.cryptoImpl.hashString(t.claims));const s=ah(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?XR(e.expiresOn):0,e.extExpiresOn?XR(e.extExpiresOn):0,It,void 0,e.tokenType,void 0,t.sshKid,t.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId,Un(Ln(e.idToken,It)))})()}saveCacheRecord(e,t,r,o){var i=()=>super.saveCacheRecord,s=this;return y(function*(){try{yield i().call(s,e,t,r,o)}catch(a){if(a instanceof $i&&s.performanceClient&&t)try{const c=s.getTokenKeys();s.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},t)}catch{}throw a}})()}}function dM(n,e,t,r){try{switch(e){case Ve.LocalStorage:return new jq(n,t,r);case Ve.SessionStorage:return new $q}}catch(o){t.error(o)}return new rh}class Zq{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Fr({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||function Lz(){return yn()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case"msal:accountAdded":case"msal:accountRemoved":case"msal:activeAccountChanged":this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(0===r.length||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){this.invokeCallbacks(e.data)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}function hM(n,e,t,r,o,i,s){return mv.apply(this,arguments)}function mv(){return(mv=y(function*(n,e,t,r,o,i,s){s?.addQueueMeasurement(p.AuthorityFactoryCreateDiscoveredInstance,i);const a=at.transformCIAMAuthority(sM(n)),c=new at(a,e,t,r,o,i,s);try{return yield E(c.resolveEndpointsAsync.bind(c),p.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw _(mn)}})).apply(this,arguments)}class mo extends pe{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,mo.prototype)}}class Hn{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,t,r){const o=Hn.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new mo(i.errorCodes?.join(" ")||I.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(Hn.checkResponseStatus(r)||Hn.checkResponseForRetryAfter(r)){const i={throttleTime:Hn.calculateThrottleTime(parseInt(r.headers[Ct.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Hn.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(Ct.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,o){const i=fh(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}}class yv{constructor(e,t){this.config=function aq({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const f={...eq,...t};return{authOptions:cq(n),systemOptions:{...HR,...e},loggerOptions:f,cacheOptions:{...tq,...r},storageInterface:o||new Xz(n.clientId,Qd,new Fr(f),new UR),networkInterface:i||nq,cryptoInterface:s||Qd,clientCredentials:a||oq,libraryInfo:{...rq,...c},telemetry:{...sq,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new Fr(this.config.loggerOptions,MR,Zy),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Ct.CONTENT_TYPE]=I.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=ji(e.credential);t[Ct.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":t[Ct.CCS_HEADER]=`UPN: ${e.credential}`}return t}executePostToTokenEndpoint(e,t,r,o,i,s){var a=this;return y(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:t,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,t,r,o){var i=this;return y(function*(){let s;Hn.preProcess(i.cacheManager,e,o);try{s=yield E(i.networkClient.sendPostRequestAsync.bind(i.networkClient),p.NetworkClientSendPostRequestAsync,i.logger,i.performanceClient,o)(t,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a[Ct.X_MS_HTTP_VERSION]||"",requestId:a[Ct.X_MS_REQUEST_ID]||""},o)}catch(a){if(a instanceof th){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c[Ct.X_MS_HTTP_VERSION]||"",requestId:c[Ct.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Ct.CONTENT_TYPE]||void 0,contentLengthHeader:c[Ct.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof pe?a:_(Wu)}return Hn.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.UpdateTokenEndpointAuthority,t);const o=`https://${e}/${r.authority.tenant}/`,i=yield hM(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,t,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&gd(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Nr(t,e.tokenQueryParameters),gy(t,e.correlationId),hd(t,e.correlationId,this.performanceClient),ja(t)}}class Wi{static setRequestState(e,t,r){const o=Wi.generateLibraryState(e,r);return t?`${o}${I.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw _(Ha);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw _(Ha);if(!t)throw _(kr);try{const r=t.split(I.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(I.RESOURCE_DELIM):I.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||I.EMPTY_STRING,libraryState:a}}catch{throw _(kr)}}}class Qi{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.PopTokenGenerateCnf,e.correlationId);const o=yield E(r.generateKid.bind(r),p.PopTokenGenerateCnf,t,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var t=this;return y(function*(){return t.performanceClient?.addQueueMeasurement(p.PopTokenGenerateKid,e.correlationId),{kid:yield t.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,t,r){var o=this;return y(function*(){return o.signPayload(e,t,r)})()}signPayload(e,t,r,o){var i=this;return y(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=r,h=(a?new te(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:xt(),m:s?.toUpperCase(),u:h?.HostNameAndPort,nonce:l||i.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:c||void 0,...o},t,u,r.correlationId)})()}}class eK{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class yo{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||I.NOT_AVAILABLE} - Timestamp: ${e.timestamp||I.NOT_AVAILABLE} - Description: ${e.error_description||I.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||I.NOT_AVAILABLE} - Trace ID: ${e.trace_id||I.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new mo(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw cM(e.error,e.error_description,e.suberror)?new Cn(e.error,e.error_description,e.suberror,e.timestamp||I.EMPTY_STRING,e.trace_id||I.EMPTY_STRING,e.correlation_id||I.EMPTY_STRING,e.claims||I.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){var u=this;return y(function*(){let d,h;if(u.performanceClient?.addQueueMeasurement(p.HandleServerTokenResponse,e.correlation_id),e.id_token){if(d=Ln(e.id_token||I.EMPTY_STRING,u.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw _(Zu);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw _(Oa);NR(m,o.maxAge)}}u.homeAccountIdentifier=Pe.generateHomeAccountId(e.client_info||I.EMPTY_STRING,t.authorityType,u.logger,u.cryptoObj,d),i&&i.state&&(h=Wi.parseRequestState(u.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=u.generateCacheRecord(e,t,r,o,d,s,i);let g;try{if(u.persistencePlugin&&u.serializableCache&&(u.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new eK(u.serializableCache,!0),yield u.persistencePlugin.beforeCacheAccess(g)),a&&!c&&f.account){const m=u.cacheStorage.generateAccountKey(Pe.getAccountInfo(f.account));if(!u.cacheStorage.getAccount(m,o.correlationId))return u.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield yo.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,void 0,l)}yield u.cacheStorage.saveCacheRecord(f,o.correlationId,Un(d||{}),o.storeInCache)}finally{u.persistencePlugin&&u.serializableCache&&g&&(u.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield u.persistencePlugin.afterCacheAccess(g))}return yo.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,e,l)})()}generateCacheRecord(e,t,r,o,i,s,a){const c=t.getPreferredCache();if(!c)throw _(La);const l=ev(i);let u,d;e.id_token&&i&&(u=sh(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=vv(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const m=e.scope?Ge.fromString(e.scope):new Ge(o.scopes||[]),v=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,w=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,S=r+v,P=S+w,B=C&&C>0?r+C:void 0;h=ah(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",m.printScopes(),S,P,this.cryptoObj.base64Decode,B,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),f=tM(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:f,appMetadata:g}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return y(function*(){let f,g,u=I.EMPTY_STRING,d=[],h=null,m=I.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==he.POP||i.popKid)u=r.accessToken.secret;else{const S=new Qi(e),{secret:P,keyId:B}=r.accessToken;if(!B)throw _(Ba);u=yield S.signPopToken(P,B,i)}d=Ge.fromString(r.accessToken.target).asArray(),h=zi(r.accessToken.expiresOn),f=zi(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(g=zi(r.accessToken.refreshOn))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const v=s?.oid||s?.sub||"",w=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const C=r.account?Xy(Pe.getAccountInfo(r.account),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:v,tenantId:w,scopes:d,account:C,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:g,correlationId:i.correlationId,requestId:l||I.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||I.EMPTY_STRING,state:a?a.userRequestState:I.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||I.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||I.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function vv(n,e,t,r,o,i,s,a,c,l,u,d){d?.verbose("setCachedAccount called");const f=n.getAccountKeys().find(C=>C.startsWith(t));let g=null;f&&(g=n.getAccount(f,o));const m=g||Pe.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),v=m.tenantProfiles||[],w=c||m.realm;if(w&&!v.find(C=>C.tenantId===w)){const C=Jd(t,m.localAccountId,w,i);v.push(C)}return m.tenantProfiles=v,m}function fM(n,e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=y(function*(n,e,t){return"string"==typeof n?n:n({clientId:e,tokenEndpoint:t})})).apply(this,arguments)}class pM extends yv{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){var r=this;return y(function*(){if(r.performanceClient?.addQueueMeasurement(p.AuthClientAcquireToken,e.correlationId),!e.code)throw _(td);const o=xt(),i=yield E(r.executeTokenRequest.bind(r),p.AuthClientExecuteTokenRequest,r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.[Ct.X_MS_REQUEST_ID],a=new yo(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),E(a.handleServerTokenResponse.bind(a),p.HandleServerTokenResponse,r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,t,void 0,void 0,void 0,s)})()}getLogoutUri(e){if(!e)throw me(Lu);const t=this.createLogoutUrlQueryString(e);return te.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.AuthClientExecuteTokenRequest,t.correlationId);const o=r.createTokenQueryParameters(t),i=te.appendQueryString(e.tokenEndpoint,o),s=yield E(r.createTokenRequestBody.bind(r),p.AuthClientCreateTokenRequestBody,r.logger,r.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const u=Yd(t.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ta.CLIENT_INFO_SEPARATOR}${u.utid}`,type:"home_account_id"}}catch(u){r.logger.verbose("Could not parse client info for CCS Header: "+u)}const c=r.createTokenRequestHeaders(a||t.ccsCredential),l=fh(r.config.authOptions.clientId,t);return E(r.executePostToTokenEndpoint.bind(r),p.AuthorizationCodeClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,t.correlationId)(i,s,c,l,t.correlationId,p.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(hy(r,e.embeddedClientId||e.tokenBodyParameters?.[lo]||t.config.authOptions.clientId),t.includeRedirectUri)fy(r,e.redirectUri);else if(!e.redirectUri)throw me(Nu);if(dy(r,e.scopes,!0,t.oidcDefaultScopes),function dz(n,e){n.set("code",e)}(r,e.code),my(r,t.config.libraryInfo),yy(r,t.config.telemetry.application),cR(r),t.serverTelemetryManager&&!BR(t.config)&&aR(r,t.serverTelemetryManager),e.codeVerifier&&function fz(n,e){n.set("code_verifier",e)}(r,e.codeVerifier),t.config.clientCredentials.clientSecret&&eR(r,t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const i=t.config.clientCredentials.clientAssertion;tR(r,yield fM(i.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),nR(r,i.assertionType)}if(rR(r,"authorization_code"),Cy(r),e.authenticationScheme===he.POP){const i=new Qi(t.cryptoUtils,t.performanceClient);let s;s=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield E(i.generateCnf.bind(i),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,Ey(r,s)}else if(e.authenticationScheme===he.SSH){if(!e.sshJwk)throw me(xi);sR(r,e.sshJwk)}let o;if((!Pt.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&py(r,e.claims,t.config.authOptions.clientCapabilities),e.clientInfo)try{const i=Yd(e.clientInfo,t.cryptoUtils.base64Decode);o={credential:`${i.uid}${Ta.CLIENT_INFO_SEPARATOR}${i.utid}`,type:"home_account_id"}}catch(i){t.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(t.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{$a(r,ji(o.credential))}catch(i){t.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":pd(r,o.credential)}return e.embeddedClientId&&gd(r,t.config.authOptions.clientId,t.config.authOptions.redirectUri),e.tokenBodyParameters&&Nr(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Jb])&&Nr(r,{[Jb]:"1"}),hd(r,e.correlationId,t.performanceClient),ja(r)})()}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function sz(n,e){n.set("post_logout_redirect_uri",e)}(t,e.postLogoutRedirectUri),e.correlationId&&gy(t,e.correlationId),e.idTokenHint&&function az(n,e){n.set("id_token_hint",e)}(t,e.idTokenHint),e.state&&Xb(t,e.state),e.logoutHint&&function pz(n,e){n.set("logout_hint",e)}(t,e.logoutHint),e.extraQueryParameters&&Nr(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&oR(t),ja(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class ec{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||I.EMPTY_STRING,this.wrapperVer=e.wrapperVer||I.EMPTY_STRING,this.telemetryCacheKey=Ze.CACHE_KEY+Ta.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Ze.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const o=t.join(Ze.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(Ze.VALUE_SEPARATOR);return[Ze.SCHEMA_VERSION,s,o].join(Ze.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=ec.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Ze.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Ze.VALUE_SEPARATOR),i=e.errors.length,a=[i,t<i?Ze.OVERFLOW_TRUE:Ze.OVERFLOW_FALSE].join(Ze.VALUE_SEPARATOR);return[Ze.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Ze.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Ze.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?t.errors.push(e instanceof pe?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):t.errors.push(Ze.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=ec.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const a=e.failedRequests[2*t+1]||I.EMPTY_STRING,c=e.errors[t]||I.EMPTY_STRING;if(o+=(e.failedRequests[2*t]||I.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<Ze.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||I.EMPTY_STRING),e.push(this.regionSource||I.EMPTY_STRING),e.push(this.regionOutcome||I.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function tK(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,l)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function nK(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join("|"))}({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class yM{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=l||yn(),this.logger=o.clone(Nt.MSAL_SKU,go,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e,t){var r=this;return y(function*(){if(t)try{r.browserStorage.removeAccount(t,e),r.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{r.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{r.logger.verbose("No account provided in logout request, clearing all cache items.",r.correlationId),r.browserStorage.clear(e),yield r.browserCrypto.clearKeystore()}catch{r.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),te.getAbsoluteUrl(e||this.config.auth.redirectUri,cr())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ec(r,this.browserStorage)}getDiscoveredAuthority(e){var t=this;return y(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetDiscoveredAuthority,t.correlationId);const i={protocolMode:t.config.auth.protocolMode,OIDCOptions:t.config.auth.OIDCOptions,knownAuthorities:t.config.auth.knownAuthorities,cloudDiscoveryMetadata:t.config.auth.cloudDiscoveryMetadata,authorityMetadata:t.config.auth.authorityMetadata,skipAuthorityMetadataCache:t.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||t.config.auth.authority,c=r&&(o?.length?"true"===o:t.config.auth.instanceAware)?t.config.auth.authority.replace(te.getDomainFromUrl(s),r.environment):s,l=at.generateAuthority(c,e.requestAzureCloudOptions||t.config.auth.azureCloudOptions),u=yield E(hM,p.AuthorityFactoryCreateDiscoveredInstance,t.logger,t.performanceClient,t.correlationId)(l,t.config.system.networkClient,t.browserStorage,i,t.logger,t.correlationId,t.performanceClient);if(r&&!u.isAlias(r.environment))throw me(Vu);return u})()}}function Ev(n,e,t,r){return Iv.apply(this,arguments)}function Iv(){return(Iv=y(function*(n,e,t,r){t.addQueueMeasurement(p.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===he.SSH){if(!n.sshJwk)throw me(xi);if(!n.sshKid)throw me(Bu)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=he.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&n.claims&&!Pt.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield TR(n.claims)),s})).apply(this,arguments)}function rK(n,e,t,r,o){return wv.apply(this,arguments)}function wv(){return(wv=y(function*(n,e,t,r,o){r.addQueueMeasurement(p.InitializeSilentRequest,n.correlationId);const i=yield E(Ev,p.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}})).apply(this,arguments)}function vM(n,e){let t;const r=n.httpMethod;if(e===Ot.EAR){if(t=r||"POST","POST"!==t)throw me(Gu)}else t=r||"GET";if(n.authorizePostBodyParameters&&"POST"!==t)throw me(zu);return t}class Yi extends yM{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||yn(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=te.getAbsoluteUrl(e.postLogoutRedirectUri,cr())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=te.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,cr())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=te.getAbsoluteUrl(cr(),cr())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const r=yield E(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)(e);return new pM(r,t.performanceClient)})()}getClientConfiguration(e){var t=this;return y(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetClientConfiguration,t.correlationId);const c=e.authority||(yield E(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,t.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a})),l=t.config.system.loggerOptions;return{authOptions:{clientId:t.config.auth.clientId,authority:c,clientCapabilities:t.config.auth.clientCapabilities,redirectUri:t.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:t.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:t.correlationId},cacheOptions:{claimsBasedCachingEnabled:t.config.cache.claimsBasedCachingEnabled},cryptoInterface:t.browserCrypto,networkInterface:t.networkClient,storageInterface:t.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:Nt.MSAL_SKU,version:go,cpu:I.EMPTY_STRING,os:I.EMPTY_STRING},telemetry:t.config.telemetry}})()}initializeAuthorizationRequest(e,t){var r=this;return y(function*(){r.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationRequest,r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Wi.setRequestState(r.browserCrypto,e&&e.state||I.EMPTY_STRING,{interactionType:t}),c={...yield E(Ev,p.InitializeBaseRequest,r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||yn(),responseMode:r.config.auth.OIDCOptions.serverResponseType},l={...c,httpMethod:vM(c,r.config.auth.protocolMode)};if(e.loginHint||e.sid)return l;const u=e.account||r.browserStorage.getActiveAccount(r.correlationId);return u&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${u.homeAccountId}`,r.correlationId),l.account=u),l})()}}function tc(n,e,t){const r=ld(n);if(!r)throw qb(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),R(yd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),R(md));return r}function Tv(n,e,t,r){const o=ja(e,t,r);return te.appendQueryString(n.authorizationEndpoint,o)}function CM(n,e){if(!n.state||!e)throw _(Pa,n.state?"Cached State":"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw _(kr,n.state)}try{r=decodeURIComponent(e)}catch{throw _(kr,n.state)}if(t!==r)throw _(Ju);if(n.error||n.error_description||n.suberror){const o=function cK(n){const e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+5):void 0}(n);throw cM(n.error,n.error_description,n.suberror)?new Cn(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new mo(n.error||"",n.error_description,n.suberror,o)}}class EM{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){var r=this;return y(function*(){let o;r.performanceClient.addQueueMeasurement(p.HandleCodeResponse,t.correlationId);try{o=function aK(n,e){if(CM(n,e),!n.code)throw _(sd);return n}(e,t.state)}catch(i){throw i instanceof mo&&i.subError===uo?R(uo):i}return E(r.handleCodeResponseFromServer.bind(r),p.HandleCodeResponseFromServer,r.logger,r.performanceClient,t.correlationId)(o,t)})()}handleCodeResponseFromServer(e,t){var r=this;return y(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement(p.HandleCodeResponseFromServer,i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield E(r.authModule.updateAuthority.bind(r.authModule),p.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield E(r.authModule.acquireToken.bind(r.authModule),p.AuthClientAcquireToken,r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}const IM="user_switch",EK={[IM]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Bn extends pe{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,Bn.prototype),this.name="NativeAuthError",this.ext=r}}function Ji(n){if(n.ext&&n.ext.status&&"DISABLED"===n.ext.status||n.ext&&n.ext.error&&-2147186943===n.ext.error)return!0;switch(n.errorCode){case"ContentError":case"PageException":return!0;default:return!1}}function gh(n,e,t){if(t&&t.status)switch(t.status){case"ACCOUNT_UNAVAILABLE":return hh(uh);case"USER_INTERACTION_REQUIRED":return new Cn(n,e);case"USER_CANCEL":return R(uo);case"NO_NETWORK":return R(Hi);case"UX_NOT_ALLOWED":return hh(fv)}return new Bn(n,EK[n]||e,t)}class IK extends yv{constructor(e,t){super(e,t)}acquireCachedToken(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.SilentFlowClientAcquireCachedToken,e.correlationId);let r="0";if(e.forceRefresh||!t.config.cacheOptions.claimsBasedCachingEnabled&&!Pt.isEmptyObj(e.claims))throw t.setCacheOutcome("1",e.correlationId),_(Fn);if(!e.account)throw _(Fa);const o=e.account.tenantId||function Nq(n){const r=new te(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=t.cacheManager.getTokenKeys(),s=t.cacheManager.getAccessToken(e.account,e,i,o);if(!s)throw t.setCacheOutcome("2",e.correlationId),_(Fn);if(function Sq(n){return Number(n)>xt()}(s.cachedAt)||ih(s.expiresOn,t.config.systemOptions.tokenRenewalOffsetSeconds))throw t.setCacheOutcome("3",e.correlationId),_(Fn);s.refreshOn&&ih(s.refreshOn,0)&&(r="4");const a=e.authority||t.authority.getPreferredCache(),c={account:t.cacheManager.getAccount(t.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:t.cacheManager.getIdToken(e.account,e.correlationId,i,o,t.performanceClient),refreshToken:null,appMetadata:t.cacheManager.readAppMetadataFromCache(a)};return t.setCacheOutcome(r,e.correlationId),t.config.serverTelemetryManager&&t.config.serverTelemetryManager.incrementCacheHits(),[yield E(t.generateResultFromCacheRecord.bind(t),p.SilentFlowClientGenerateResultFromCacheRecord,t.logger,t.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){var r=this;return y(function*(){let o;if(r.performanceClient?.addQueueMeasurement(p.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(o=Ln(e.idToken.secret,r.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const i=o?.auth_time;if(!i)throw _(Oa);NR(i,t.maxAge)}return yo.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,t,o)})()}}class wM extends Yi{acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentCacheClientAcquireToken,e.correlationId);const r=t.initializeServerTelemetryManager(61),o=yield E(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new IK(o,t.performanceClient);t.logger.verbose("Silent auth client created");try{const a=(yield E(i.acquireCachedToken.bind(i),p.SilentFlowClientAcquireCachedToken,t.logger,t.performanceClient,e.correlationId)(e))[0];return t.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof Ya&&s.errorCode===Ka&&t.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}}class mh extends yM{constructor(e,t,r,o,i,s,a,c,l,u,d,h){super(e,t,r,o,i,s,c,l,h),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=d,this.silentCacheClient=new wM(e,this.nativeStorageManager,r,o,i,s,c,l,h);const f=this.platformAuthProvider.getExtensionName();this.skus=ec.makeExtraSkuString({libraryName:Nt.MSAL_SKU,libraryVersion:go,extensionName:f,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(e,t){var r=this;return y(function*(){r.performanceClient.addQueueMeasurement(p.NativeInteractionClientAcquireToken,r.correlationId),r.logger.trace("NativeInteractionClient - acquireToken called.");const o=r.performanceClient.startMeasurement(p.NativeInteractionClientAcquireToken,r.correlationId),i=xt(),s=r.initializeServerTelemetryManager(r.apiId);try{const a=yield r.initializeNativeRequest(e);try{const l=yield r.acquireTokensFromCache(r.accountId,a);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch(l){if(1===t)throw r.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),o.end({success:!1,brokerErrorCode:"cache_request_failed"}),l;r.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const c=yield r.platformAuthProvider.sendMessage(a);return yield r.handleNativeResponse(c,a,i).then(l=>(o.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),s.clearNativeBrokerErrorCode(),l)).catch(l=>{throw o.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError}),l})}catch(a){throw a instanceof Bn&&s.setNativeBrokerErrorCode(a.errorCode),o.end({success:!1}),a}})()}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ge.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){var r=this;return y(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),_(Ua);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},r.correlationId);if(!o)throw _(Ua);try{const i=r.createSilentCacheRequest(t,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,t){var r=this;return y(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o);try{yield r.platformAuthProvider.sendMessage(i)}catch(c){if(c instanceof Bn&&(r.initializeServerTelemetryManager(r.apiId).setNativeBrokerErrorCode(c.errorCode),Ji(c)))throw c}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const s={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},a=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);t.end({success:!0}),yield r.navigationClient.navigateExternal(a,s)})()}handleRedirectPromise(e,t){var r=this;return y(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a=xt();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=yield r.platformAuthProvider.sendMessage(s),l=yield r.handleNativeResponse(c,s,a);return r.initializeServerTelemetryManager(r.apiId).clearNativeBrokerErrorCode(),e&&r.correlationId&&r.performanceClient.addFields({isNativeBroker:!0},r.correlationId),l}catch(c){throw c}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){var o=this;return y(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=Ln(e.id_token,It),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},o.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)o.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==a&&e.account.id!==t.accountId)throw gh(IM);const c=yield o.getDiscoveredAuthority({requestAuthority:t.authority}),l=vv(o.browserStorage,c,s,It,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger);e.expires_in=Number(e.expires_in);const u=yield o.generateAuthenticationResult(e,t,i,l,c.canonicalAuthority,r);return yield o.cacheAccount(l,o.correlationId,Un(i)),yield o.cacheNativeTokens(e,t,s,i,e.access_token,u.tenantId,r),u})()}createHomeAccountIdentifier(e,t){return Pe.generateHomeAccountId(e.client_info||I.EMPTY_STRING,0,this.logger,this.browserCrypto,t)}generateScopes(e,t){return Ge.fromString(t||e)}generatePopAccessToken(e,t){var r=this;return y(function*(){if(t.tokenType===he.POP&&t.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new Qi(r.browserCrypto),i={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw _(Ba);return o.signPopToken(e.access_token,t.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,t,r,o,i,s){var a=this;return y(function*(){const c=a.addTelemetryFromNativeResponse(e.properties.MATS),l=a.generateScopes(t.scope,e.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||I.EMPTY_STRING,h=u.TenantId||r.tid||I.EMPTY_STRING,f=Xy(Pe.getAccountInfo(o),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const g=yield a.generatePopAccessToken(e,t),m=t.tokenType===he.POP?he.POP:he.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:l.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:zi(s+e.expires_in),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e,t,r){var o=this;return y(function*(){yield o.browserStorage.setAccount(e,o.correlationId,r),o.browserStorage.removeAccountContext(Pe.getAccountInfo(e),t)})()}cacheNativeTokens(e,t,r,o,i,s,a){const c=sh(r,t.authority,e.id_token||"",t.clientId,o.tid||""),u=a+(t.tokenType===he.POP?I.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e.scope,t.scope),h=ah(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,It,void 0,t.tokenType,void 0,t.keyId);return this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:h},this.correlationId,Un(o),t.storeInCache)}getExpiresInValue(e,t){return e===he.POP?I.SHR_NONCE_VALIDITY:("string"==typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var t=this;return y(function*(){t.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=yield t.getCanonicalAuthority(e),{scopes:o,...i}=e,s=new Ge(o||[]);s.appendScopes(Ni);const a={...i,accountId:t.accountId,clientId:t.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:t.getRedirectUri(e.redirectUri),prompt:t.getPrompt(e.prompt),correlationId:t.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(a.signPopToken&&e.popKid)throw R(jd);if(t.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry="MATS",e.authenticationScheme===he.POP){const c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new Qi(t.browserCrypto);let u;if(a.keyId)u=t.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const d=yield E(l.generateCnf.bind(l),p.PopTokenGenerateCnf,t.logger,t.performanceClient,t.correlationId)(c,t.logger);u=d.reqCnfString,a.keyId=d.kid,a.signPopToken=!0}a.reqCnf=u}return t.addRequestSKUs(a),a})()}getCanonicalAuthority(e){var t=this;return y(function*(){const r=e.authority||t.config.auth.authority;e.account&&(yield t.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new te(r);return o.validateAsUri(),o})()}getPrompt(e){switch(this.apiId){case 863:case 61:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Ye.NONE}if(e)switch(e){case Ye.NONE:case Ye.CONSENT:case Ye.LOGIN:case Ye.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),R(Hd)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(ud)&&e.extraParameters.hasOwnProperty(dd)&&e.extraParameters.hasOwnProperty(lo);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[dd],r=e.extraParameters[lo]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}}function _v(n,e,t,r,o){return Sv.apply(this,arguments)}function Sv(){return(Sv=y(function*(n,e,t,r,o){const i=function sK(n,e,t,r){const o=e.correlationId,i=new Map;if(hy(i,e.embeddedClientId||e.extraQueryParameters?.[lo]||n.clientId),dy(i,[...e.scopes||[],...e.extraScopesToConsent||[]],!0,n.authority.options.OIDCOptions?.defaultScopes),fy(i,e.redirectUri),gy(i,o),function oz(n,e){n.set(TG,e||pG.QUERY)}(i,e.responseMode),Cy(i),e.prompt&&(function lz(n,e){n.set(MG,e)}(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(function cz(n,e){n.set(ez,e)}(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==Ye.SELECT_ACCOUNT)if(e.sid&&e.prompt===Ye.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Zb(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){const a=function lK(n){return n.idTokenClaims?.sid||null}(e.account);let c=function uK(n){return n.loginHint||n.idTokenClaims?.login_hint||null}(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),fd(i,c),r?.addFields({loginHintFromClaim:!0},o);try{$a(i,ji(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===Ye.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Zb(i,a),r?.addFields({sidFromClaim:!0},o);try{$a(i,ji(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),fd(i,e.loginHint),pd(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),fd(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{$a(i,ji(e.account.homeAccountId))}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),fd(i,e.loginHint),pd(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&function uz(n,e){n.set(RG,e)}(i,e.nonce),e.state&&Xb(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&py(i,e.claims,n.clientCapabilities),e.embeddedClientId&&gd(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(ly))&&oR(i),i}({...n.auth,authority:e},t,r,o);if(my(i,{sku:Nt.MSAL_SKU,version:go,os:"",cpu:""}),n.auth.protocolMode!==Ot.OIDC&&yy(i,n.telemetry.application),t.platformBroker&&(function iz(n){n.set(YG,"1")}(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===he.POP)){const s=new oh(r,o),a=new Qi(s);let c;c=t.popKid?s.encodeKid(t.popKid):(yield E(a.generateCnf.bind(a),p.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Ey(i,c)}return hd(i,t.correlationId,o),i})).apply(this,arguments)}function Av(n,e,t,r,o){return Dv.apply(this,arguments)}function Dv(){return(Dv=y(function*(n,e,t,r,o){if(!t.codeChallenge)throw me(Ra);const i=yield E(_v,p.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return uy(i,xm.CODE),vy(i,t.codeChallenge,I.S256_CODE_CHALLENGE_METHOD),Nr(i,t.extraQueryParameters||{}),Tv(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})).apply(this,arguments)}function bv(n,e,t,r,o,i){return Rv.apply(this,arguments)}function Rv(){return(Rv=y(function*(n,e,t,r,o,i){if(!r.earJwk)throw R(Iy);const s=yield _v(e,t,r,o,i);uy(s,xm.IDTOKEN_TOKEN_REFRESHTOKEN),function gz(n,e){n.set(nz,encodeURIComponent(e)),n.set(rz,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(s,r.earJwk),vy(s,r.codeChallenge,I.S256_CODE_CHALLENGE_METHOD);const a=new Map;return Nr(a,r.extraQueryParameters||{}),TM(n,Tv(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters),s)})).apply(this,arguments)}function Mv(n,e,t,r,o,i){return kv.apply(this,arguments)}function kv(){return(kv=y(function*(n,e,t,r,o,i){const s=yield _v(e,t,r,o,i);uy(s,xm.CODE),vy(s,r.codeChallenge,r.codeChallengeMethod||I.S256_CODE_CHALLENGE_METHOD),function mz(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}(s,r.authorizePostBodyParameters||{});const a=new Map;return Nr(a,r.extraQueryParameters||{}),TM(n,Tv(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters),s)})).apply(this,arguments)}function TM(n,e,t){const r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{const s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function _M(n,e,t,r,o,i,s,a,c,l){return Nv.apply(this,arguments)}function Nv(){return(Nv=y(function*(n,e,t,r,o,i,s,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw R(Qa);const u=new oh(a,c),d=new mh(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:h}=Wi.parseRequestState(u,n.state);return E(d.acquireToken.bind(d),p.NativeInteractionClientAcquireToken,a,c,n.correlationId)({...n,state:h,prompt:void 0})})).apply(this,arguments)}function Zi(n,e,t,r,o,i,s,a,c,l,u,d){return Pv.apply(this,arguments)}function Pv(){return(Pv=y(function*(n,e,t,r,o,i,s,a,c,l,u,d){if(Hn.removeThrottle(s,o.auth.clientId,n),e.accountId)return E(_M,p.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,d);const h={...n,code:e.code||"",codeVerifier:t},f=new EM(i,s,h,l,u);return yield E(f.handleCodeResponse.bind(f),p.HandleCodeResponse,l,u,n.correlationId)(e,n)})).apply(this,arguments)}function Ov(n,e,t,r,o,i,s,a,c,l,u){return xv.apply(this,arguments)}function xv(){return(xv=y(function*(n,e,t,r,o,i,s,a,c,l,u){if(Hn.removeThrottle(i,r.auth.clientId,n),CM(e,n.state),!e.ear_jwe)throw R(lR);if(!n.earJwk)throw R(Iy);const d=JSON.parse(yield E(Rz,p.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(d.accountId)return E(_M,p.HandleResponsePlatformBroker,c,l,n.correlationId)(n,d.accountId,t,r,i,s,a,c,l,u);const h=new yo(r.auth.clientId,i,new oh(c,l),c,null,null,l);h.validateTokenResponse(d);const f={code:"",state:n.state,nonce:n.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return yield E(h.handleServerTokenResponse.bind(h),p.HandleServerTokenResponse,c,l,n.correlationId)(d,o,xt(),n,f,void 0,void 0,void 0,void 0)})).apply(this,arguments)}const wK=32;function vo(n,e,t){return Fv.apply(this,arguments)}function Fv(){return(Fv=y(function*(n,e,t){n.addQueueMeasurement(p.GeneratePkceCodes,t);const r=Qt(TK,p.GenerateCodeVerifier,e,n,t)(n,e,t);return{verifier:r,challenge:yield E(_K,p.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t)}})).apply(this,arguments)}function TK(n,e,t){try{const r=new Uint8Array(wK);return Qt(_z,p.GetRandomValues,e,n,t)(r),Or(r)}catch{throw R(Va)}}function _K(n,e,t,r){return Lv.apply(this,arguments)}function Lv(){return(Lv=y(function*(n,e,t,r){e.addQueueMeasurement(p.GenerateCodeChallengeFromVerifier,r);try{const o=yield E(vR,p.Sha256Digest,t,e,r)(n,e,r);return Or(new Uint8Array(o))}catch{throw R(Va)}})).apply(this,arguments)}class yh{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(p.NativeMessageHandlerHandshake),this.platformAuthType="PlatformAuthExtensionHandler"}sendMessage(e){var t=this;return y(function*(){t.logger.trace(t.platformAuthType+" - sendMessage called.");const r={method:"GetToken",request:e},o={channel:rn_CHANNEL_ID,extensionId:t.extensionId,responseId:yn(),body:r};t.logger.trace(t.platformAuthType+" - Sending request to browser extension"),t.logger.tracePii(t.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(o)}`),t.messageChannel.port1.postMessage(o);const i=yield new Promise((a,c)=>{t.resolvers.set(o.responseId,{resolve:a,reject:c})});return t.validatePlatformBrokerResponse(i)})()}static createProvider(e,t,r){return y(function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const o=new yh(e,t,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new yh(e,t,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return y(function*(){e.logger.trace(e.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const t={channel:rn_CHANNEL_ID,extensionId:e.extensionId,responseId:yn(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(t,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(t.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(R(Ld)),e.handshakeResolvers.delete(t.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===rn_CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&"Handshake"===t.body.method){const r=this.handshakeResolvers.get(t.responseId);if(!r)return void this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(R(Ud))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if("Response"===i){if(!r)return;const s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(gh(s.code,s.description,s.ext));else{if(!s.result)throw Bm(Oi,"Event does not contain result.");s.result.code&&s.result.description?r.reject(gh(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(t.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Bm(Oi,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return"ppnbnpeolgkicgegkbkbjmhlideopiji"===this.getExtensionId()?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Uv{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType="PlatformAuthDOMHandler"}static createProvider(e,t,r){return y(function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts("MicrosoftEntra"))?.includes("get-token-and-sign-out"))return e.trace("Platform auth api available in DOM"),new Uv(e,t,r)})()}getExtensionId(){return"MicrosoftEntra"}getExtensionVersion(){return""}getExtensionName(){return"DOM API"}sendMessage(e){var t=this;return y(function*(){t.logger.trace(t.platformAuthType+" - Sending request to browser DOM API");try{const r=t.initializePlatformDOMRequest(e),o=yield window.navigator.platformAuthentication.executeGetToken(r);return t.validatePlatformBrokerResponse(o)}catch(r){throw t.logger.error(t.platformAuthType+" - executeGetToken DOM API error"),r}})()}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d,...h}=e,f=this.getDOMExtraParams(h);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...f},isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),gh(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw Bm(Oi,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{})}}}function SM(n,e,t,r){return Bv.apply(this,arguments)}function Bv(){return(Bv=y(function*(n,e,t,r){n.trace("getPlatformAuthProvider called",t);const o=function SK(){let n;try{return n=window[Ve.SessionStorage],"true"===n?.getItem(yq)}catch{return!1}}();let i;n.trace("Has client allowed platform auth via DOM API: "+o);try{o&&(i=yield Uv.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield yh.createProvider(n,r||VR,e))}catch(s){n.trace("Platform auth not available",s)}return i})).apply(this,arguments)}function nc(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case he.BEARER:case he.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class AK extends Yi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Ni,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const i={...e,httpMethod:vM(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){var o=this;return y(function*(){o.logger.verbose("acquireTokenPopupAsync called");const i=yield E(o.initializeAuthorizationRequest.bind(o),p.StandardInteractionClientInitializeAuthorizationRequest,o.logger,o.performanceClient,o.correlationId)(e,O.Popup);t.popup&&bR(i.authority);const s=nc(o.config,o.logger,o.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,o.config.auth.protocolMode===Ot.EAR?o.executeEarFlow(i,t,r):o.executeCodeFlow(i,t,r)})()}executeCodeFlow(e,t,r){var o=this;return y(function*(){const i=e.correlationId,s=o.initializeServerTelemetryManager(862),a=r||(yield E(vo,p.GeneratePkceCodes,o.logger,o.performanceClient,i)(o.performanceClient,o.logger,i)),c={...e,codeChallenge:a.challenge};try{const l=yield E(o.createAuthCodeClient.bind(o),p.StandardInteractionClientCreateAuthCodeClient,o.logger,o.performanceClient,i)({serverTelemetryManager:s,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account});if("POST"===c.httpMethod)return yield o.executeCodeFlowWithPost(c,t,l,a.verifier);{const u=yield E(Av,p.GetAuthCodeUrl,o.logger,o.performanceClient,i)(o.config,l.authority,c,o.logger,o.performanceClient),d=o.initiateAuthRequest(u,t);o.eventHandler.emitEvent("msal:popupOpened",O.Popup,{popupWindow:d},null);const h=yield o.monitorPopupForHash(d,t.popupWindowParent),f=Qt(tc,p.DeserializeResponse,o.logger,o.performanceClient,o.correlationId)(h,o.config.auth.OIDCOptions.serverResponseType,o.logger);return yield E(Zi,p.HandleResponseCode,o.logger,o.performanceClient,i)(e,f,a.verifier,862,o.config,l,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)}}catch(l){throw t.popup?.close(),l instanceof pe&&(l.setCorrelationId(o.correlationId),s.cacheFailedRequest(l)),l}})()}executeEarFlow(e,t,r){var o=this;return y(function*(){const i=e.correlationId,s=yield E(o.getDiscoveredAuthority.bind(o),p.StandardInteractionClientGetDiscoveredAuthority,o.logger,o.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=yield E(Uy,p.GenerateEarKey,o.logger,o.performanceClient,i)(),c=r||(yield E(vo,p.GeneratePkceCodes,o.logger,o.performanceClient,i)(o.performanceClient,o.logger,i)),l={...e,earJwk:a,codeChallenge:c.challenge},u=t.popup||o.openPopup("about:blank",t);(yield bv(u.document,o.config,s,l,o.logger,o.performanceClient)).submit();const h=yield E(o.monitorPopupForHash.bind(o),p.SilentHandlerMonitorIframeForHash,o.logger,o.performanceClient,i)(u,t.popupWindowParent),f=Qt(tc,p.DeserializeResponse,o.logger,o.performanceClient,o.correlationId)(h,o.config.auth.OIDCOptions.serverResponseType,o.logger);if(!f.ear_jwe&&f.code){const g=yield E(o.createAuthCodeClient.bind(o),p.StandardInteractionClientCreateAuthCodeClient,o.logger,o.performanceClient,i)({serverTelemetryManager:o.initializeServerTelemetryManager(862),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:s});return E(Zi,p.HandleResponseCode,o.logger,o.performanceClient,i)(l,f,c.verifier,862,o.config,g,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)}return E(Ov,p.HandleResponseEar,o.logger,o.performanceClient,i)(l,f,862,o.config,s,o.browserStorage,o.nativeStorage,o.eventHandler,o.logger,o.performanceClient,o.platformAuthProvider)})()}executeCodeFlowWithPost(e,t,r,o){var i=this;return y(function*(){const s=e.correlationId,a=yield E(i.getDiscoveredAuthority.bind(i),p.StandardInteractionClientGetDiscoveredAuthority,i.logger,i.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=t.popup||i.openPopup("about:blank",t);(yield Mv(c.document,i.config,a,e,i.logger,i.performanceClient)).submit();const u=yield E(i.monitorPopupForHash.bind(i),p.SilentHandlerMonitorIframeForHash,i.logger,i.performanceClient,s)(c,t.popupWindowParent),d=Qt(tc,p.DeserializeResponse,i.logger,i.performanceClient,i.correlationId)(u,i.config.auth.OIDCOptions.serverResponseType,i.logger);return E(Zi,p.HandleResponseCode,i.logger,i.performanceClient,s)(e,d,o,862,i.config,r,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)})()}logoutPopupAsync(e,t,r,o){var i=this;return y(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",O.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(i.correlationId,e.account);const c=(yield E(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",O.Popup,e);const l=i.openPopup(c,t);if(i.eventHandler.emitEvent("msal:popupOpened",O.Popup,{popupWindow:l},null),yield i.monitorPopupForHash(l,t.popupWindowParent).catch(()=>{}),o){const u={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=te.getAbsoluteUrl(o,cr());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,u)}else i.logger.verbose("No main window navigation requested")}catch(a){throw t.popup?.close(),a instanceof pe&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.eventHandler.emitEvent("msal:logoutFailure",O.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",O.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",O.Popup)})()}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),R(Fi)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(R(uo));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===_u.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw R(wd);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),R(Id)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Nt.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Nt.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Nt.POPUP_HEIGHT/2+s)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-Nt.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${Nt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){return`${Nt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class bK extends Yi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){var t=this;return y(function*(){const r=yield E(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,t.correlationId)(e,O.Redirect);r.platformBroker=nc(t.config,t.logger,t.platformAuthProvider,e.authenticationScheme);const o=s=>{s.persisted&&(t.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),t.browserStorage.resetRequestCache(),t.eventHandler.emitEvent("msal:restoreFromBFCache",O.Redirect))},i=t.getRedirectStartPage(e.redirectStartPage);t.logger.verbosePii(`Redirect start page: ${i}`),t.browserStorage.setTemporaryCache("request.origin",i,!0),window.addEventListener("pageshow",o);try{t.config.auth.protocolMode===Ot.EAR?yield t.executeEarFlow(r):yield t.executeCodeFlow(r,e.onRedirectNavigate)}catch(s){throw s instanceof pe&&s.setCorrelationId(t.correlationId),window.removeEventListener("pageshow",o),s}})()}executeCodeFlow(e,t){var r=this;return y(function*(){const o=e.correlationId,i=r.initializeServerTelemetryManager(861),s=yield E(vo,p.GeneratePkceCodes,r.logger,r.performanceClient,o)(r.performanceClient,r.logger,o),a={...e,codeChallenge:s.challenge};r.browserStorage.cacheAuthorizeRequest(a,s.verifier);try{if("POST"===a.httpMethod)return yield r.executeCodeFlowWithPost(a);{const c=yield E(r.createAuthCodeClient.bind(r),p.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),l=yield E(Av,p.GetAuthCodeUrl,r.logger,r.performanceClient,e.correlationId)(r.config,c.authority,a,r.logger,r.performanceClient);return yield r.initiateAuthRequest(l,t)}}catch(c){throw c instanceof pe&&(c.setCorrelationId(r.correlationId),i.cacheFailedRequest(c)),c}})()}executeEarFlow(e){var t=this;return y(function*(){const r=e.correlationId,o=yield E(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield E(Uy,p.GenerateEarKey,t.logger,t.performanceClient,r)(),s=yield E(vo,p.GeneratePkceCodes,t.logger,t.performanceClient,r)(t.performanceClient,t.logger,r),a={...e,earJwk:i,codeChallenge:s.challenge};return t.browserStorage.cacheAuthorizeRequest(a,s.verifier),(yield bv(document,t.config,o,a,t.logger,t.performanceClient)).submit(),new Promise((l,u)=>{setTimeout(()=>{u(R(Vd,"failed_to_redirect"))},t.config.system.redirectNavigationTimeout)})})()}executeCodeFlowWithPost(e){var t=this;return y(function*(){const r=e.correlationId,o=yield E(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return t.browserStorage.cacheAuthorizeRequest(e),(yield Mv(document,t.config,o,e,t.logger,t.performanceClient)).submit(),new Promise((s,a)=>{setTimeout(()=>{a(R(Vd,"failed_to_redirect"))},t.config.system.redirectNavigationTimeout)})})()}handleRedirectPromise(){var e=this;return y(function*(t="",r,o,i){const s=e.initializeServerTelemetryManager(865);try{const[a,c]=e.getRedirectResponse(t||"");if(!a)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.resetRequestCache(),"back_forward"!==function DK(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}()?i.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const l=e.browserStorage.getTemporaryCache("request.origin",!0)||I.EMPTY_STRING;if(Kb(l)===Kb(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),l.indexOf("#")>-1&&function kz(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(l),yield e.handleResponse(a,r,o,s);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(a,r,o,s);if(!zd()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",c,!0);const h={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let f=!0;if(l&&"null"!==l)e.logger.verbose(`Navigating to loginRequestUrl: ${l}`),f=yield e.navigationClient.navigateInternal(l,h);else{const g=function Pz(){const e=new te(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",g,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=yield e.navigationClient.navigateInternal(g,h)}if(!f)return yield e.handleResponse(a,r,o,s)}return null}catch(a){throw a instanceof pe&&(a.setCorrelationId(e.correlationId),s.cacheFailedRequest(a)),a}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===_u.QUERY?window.location.search:window.location.hash);let r=ld(t);if(r){try{!function iK(n,e,t){if(!n.state)throw R(za);const r=function oK(n,e){if(!e)return null;try{return Wi.parseRequestState(n,e).libraryState.meta}catch{throw _(kr)}}(e,n.state);if(!r)throw R(vd);if(r.interactionType!==t)throw R(Cd)}(r,this.browserCrypto,O.Redirect)}catch(i){return i instanceof pe&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return _R(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=ld(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){var i=this;return y(function*(){if(!e.state)throw R(za);if(e.ear_jwe){const c=yield E(i.getDiscoveredAuthority.bind(i),p.StandardInteractionClientGetDiscoveredAuthority,i.logger,i.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return E(Ov,p.HandleResponseEar,i.logger,i.performanceClient,t.correlationId)(t,e,861,i.config,c,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)}const a=yield E(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return E(Zi,p.HandleResponseCode,i.logger,i.performanceClient,t.correlationId)(t,e,r,861,i.config,a,i.browserStorage,i.nativeStorage,i.eventHandler,i.logger,i.performanceClient,i.platformAuthProvider)})()}initiateAuthRequest(e,t){var r=this;return y(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},i=t||r.config.auth.onRedirectNavigate;return"function"==typeof i?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==i(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield r.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield r.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),R(Fi)})()}logout(e){var t=this;return y(function*(){t.logger.verbose("logoutRedirect called");const r=t.initializeLogoutRequest(e),o=t.initializeServerTelemetryManager(961);try{t.eventHandler.emitEvent("msal:logoutStart",O.Redirect,e),yield t.clearCacheOnLogout(t.correlationId,r.account);const i={apiId:961,timeout:t.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield E(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(t.eventHandler.emitEvent("msal:logoutSuccess",O.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0,"signout"),void(yield t.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return t.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0,"signout"),void(yield t.navigationClient.navigateExternal(a,i));t.browserStorage.setInteractionInProgress(!1),t.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof pe&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),t.eventHandler.emitEvent("msal:logoutFailure",O.Redirect,null,i),t.eventHandler.emitEvent("msal:logoutEnd",O.Redirect),i}t.eventHandler.emitEvent("msal:logoutEnd",O.Redirect)})()}getRedirectStartPage(e){const t=e||window.location.href;return te.getAbsoluteUrl(t,cr())}}function RK(n,e,t,r,o){return jv.apply(this,arguments)}function jv(){return(jv=y(function*(n,e,t,r,o){if(e.addQueueMeasurement(p.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),R(Fi);return o?E(NK,p.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Qt(PK,p.SilentHandlerLoadFrameSync,t,e,r)(n)})).apply(this,arguments)}function MK(n,e,t,r,o){return $v.apply(this,arguments)}function $v(){return($v=y(function*(n,e,t,r,o){const i=vh();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Mv(i.contentDocument,n,e,t,r,o)).submit(),i})).apply(this,arguments)}function kK(n,e,t,r,o){return Vv.apply(this,arguments)}function Vv(){return(Vv=y(function*(n,e,t,r,o){const i=vh();if(!i.contentDocument)throw"No document associated with iframe!";return(yield bv(i.contentDocument,n,e,t,r,o)).submit(),i})).apply(this,arguments)}function AM(n,e,t,r,o,i,s){return Gv.apply(this,arguments)}function Gv(){return(Gv=y(function*(n,e,t,r,o,i,s){return r.addQueueMeasurement(p.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<sv&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${sv}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(R(Td))},e),u=window.setInterval(()=>{let d="";const h=n.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||"about:blank"===d)return;let f="";h&&(f=s===_u.QUERY?h.location.search:h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(f)},t)}).finally(()=>{Qt(OK,p.RemoveHiddenIframe,o,r,i)(n)})})).apply(this,arguments)}function NK(n,e,t,r){return t.addQueueMeasurement(p.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=vh();window.setTimeout(()=>{s?(s.src=n,o(s)):i("Unable to load iframe")},e)})}function PK(n){const e=vh();return e.src=n,e}function vh(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("allow","local-network-access *"),document.body.appendChild(n),n}function OK(n){document.body===n.parentNode&&document.body.removeChild(n)}class xK extends Yi{constructor(e,t,r,o,i,s,a,c,l,u,d){super(e,t,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&t.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==Ye.NONE&&r.prompt!==Ye.NO_SESSION&&(t.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${Ye.NONE}`),r.prompt=Ye.NONE):r.prompt=Ye.NONE;const o=yield E(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,O.Silent);return o.platformBroker=nc(t.config,t.logger,t.platformAuthProvider,o.authenticationScheme),bR(o.authority),t.config.auth.protocolMode===Ot.EAR?t.executeEarFlow(o):t.executeCodeFlow(o)})()}executeCodeFlow(e){var t=this;return y(function*(){let r;const o=t.initializeServerTelemetryManager(t.apiId);try{return r=yield E(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield E(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,e.correlationId)(r,e)}catch(i){if(i instanceof pe&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),!(r&&i instanceof pe&&i.errorCode===Nt.INVALID_GRANT_ERROR))throw i;return t.performanceClient.addFields({retryError:i.errorCode},t.correlationId),yield E(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,t.correlationId)(r,e)}})()}executeEarFlow(e){var t=this;return y(function*(){const r=e.correlationId,o=yield E(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield E(Uy,p.GenerateEarKey,t.logger,t.performanceClient,r)(),s=yield E(vo,p.GeneratePkceCodes,t.logger,t.performanceClient,r)(t.performanceClient,t.logger,r),a={...e,earJwk:i,codeChallenge:s.challenge},c=yield E(kK,p.SilentHandlerInitiateAuthRequest,t.logger,t.performanceClient,r)(t.config,o,a,t.logger,t.performanceClient),l=t.config.auth.OIDCOptions.serverResponseType,u=yield E(AM,p.SilentHandlerMonitorIframeForHash,t.logger,t.performanceClient,r)(c,t.config.system.iframeHashTimeout,t.config.system.pollIntervalMilliseconds,t.performanceClient,t.logger,r,l),d=Qt(tc,p.DeserializeResponse,t.logger,t.performanceClient,r)(u,l,t.logger);if(!d.ear_jwe&&d.code){const h=yield E(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,r)({serverTelemetryManager:t.initializeServerTelemetryManager(t.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:o});return E(Zi,p.HandleResponseCode,t.logger,t.performanceClient,r)(a,d,s.verifier,t.apiId,t.config,h,t.browserStorage,t.nativeStorage,t.eventHandler,t.logger,t.performanceClient,t.platformAuthProvider)}return E(Ov,p.HandleResponseEar,t.logger,t.performanceClient,r)(a,d,t.apiId,t.config,o,t.browserStorage,t.nativeStorage,t.eventHandler,t.logger,t.performanceClient,t.platformAuthProvider)})()}logout(){return Promise.reject(R(Li))}silentTokenHelper(e,t){var r=this;return y(function*(){const o=t.correlationId;r.performanceClient.addQueueMeasurement(p.SilentIframeClientTokenHelper,o);const i=yield E(vo,p.GeneratePkceCodes,r.logger,r.performanceClient,o)(r.performanceClient,r.logger,o),s={...t,codeChallenge:i.challenge};let a;if("POST"===t.httpMethod)a=yield E(MK,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(r.config,e.authority,s,r.logger,r.performanceClient);else{const d=yield E(Av,p.GetAuthCodeUrl,r.logger,r.performanceClient,o)(r.config,e.authority,s,r.logger,r.performanceClient);a=yield E(RK,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(d,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait)}const c=r.config.auth.OIDCOptions.serverResponseType,l=yield E(AM,p.SilentHandlerMonitorIframeForHash,r.logger,r.performanceClient,o)(a,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,c),u=Qt(tc,p.DeserializeResponse,r.logger,r.performanceClient,o)(l,c,r.logger);return E(Zi,p.HandleResponseCode,r.logger,r.performanceClient,o)(t,u,i.verifier,r.apiId,r.config,e,r.browserStorage,r.nativeStorage,r.eventHandler,r.logger,r.performanceClient,r.platformAuthProvider)})()}}class LK extends yv{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireToken,e.correlationId);const r=xt(),o=yield E(t.executeTokenRequest.bind(t),p.RefreshTokenClientExecuteTokenRequest,t.logger,t.performanceClient,e.correlationId)(e,t.authority),i=o.headers?.[Ct.X_MS_REQUEST_ID],s=new yo(t.config.authOptions.clientId,t.cacheManager,t.cryptoUtils,t.logger,t.config.serializableCache,t.config.persistencePlugin);return s.validateTokenResponse(o.body),E(s.handleServerTokenResponse.bind(s),p.HandleServerTokenResponse,t.logger,t.performanceClient,e.correlationId)(o.body,t.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var t=this;return y(function*(){if(!e)throw me(Fu);if(t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw _(Fa);if(t.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield E(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof Cn&&o.errorCode===qi||o instanceof mo&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return E(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1);throw o}return E(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=Qt(r.cacheManager.getRefreshToken.bind(r.cacheManager),p.CacheManagerGetRefreshToken,r.logger,r.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,r.performanceClient);if(!o)throw hh(qi);if(o.expiresOn&&ih(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw r.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),hh(hv);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||he.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield E(r.acquireToken.bind(r),p.RefreshTokenClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof Cn&&(r.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),s.subError===Ki)){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=r.cacheManager.generateCredentialKey(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=r.createTokenQueryParameters(e),i=te.appendQueryString(t.tokenEndpoint,o),s=yield E(r.createTokenRequestBody.bind(r),p.RefreshTokenClientCreateTokenRequestBody,r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c=fh(r.config.authOptions.clientId,e);return E(r.executePostToTokenEndpoint.bind(r),p.RefreshTokenClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,p.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(hy(r,e.embeddedClientId||e.tokenBodyParameters?.[lo]||t.config.authOptions.clientId),e.redirectUri&&fy(r,e.redirectUri),dy(r,e.scopes,!0,t.config.authOptions.authority.options.OIDCOptions?.defaultScopes),rR(r,"refresh_token"),Cy(r),my(r,t.config.libraryInfo),yy(r,t.config.telemetry.application),cR(r),t.serverTelemetryManager&&!BR(t.config)&&aR(r,t.serverTelemetryManager),function hz(n,e){n.set("refresh_token",e)}(r,e.refreshToken),t.config.clientCredentials.clientSecret&&eR(r,t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const o=t.config.clientCredentials.clientAssertion;tR(r,yield fM(o.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),nR(r,o.assertionType)}if(e.authenticationScheme===he.POP){const o=new Qi(t.cryptoUtils,t.performanceClient);let i;i=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield E(o.generateCnf.bind(o),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,Ey(r,i)}else if(e.authenticationScheme===he.SSH){if(!e.sshJwk)throw me(xi);sR(r,e.sshJwk)}if((!Pt.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&py(r,e.claims,t.config.authOptions.clientCapabilities),t.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{$a(r,ji(e.ccsCredential.credential))}catch(o){t.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case"UPN":pd(r,e.ccsCredential.credential)}return e.embeddedClientId&&gd(r,t.config.authOptions.clientId,t.config.authOptions.redirectUri),e.tokenBodyParameters&&Nr(r,e.tokenBodyParameters),hd(r,e.correlationId,t.performanceClient),ja(r)})()}}class UK extends Yi{acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentRefreshClientAcquireToken,e.correlationId);const r=yield E(Ev,p.InitializeBaseRequest,t.logger,t.performanceClient,e.correlationId)(e,t.config,t.performanceClient,t.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=t.getRedirectUri(e.redirectUri));const i=t.initializeServerTelemetryManager(61),s=yield t.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return E(s.acquireTokenByRefreshToken.bind(s),p.RefreshTokenClientAcquireTokenByRefreshToken,t.logger,t.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(R(Li))}createRefreshTokenClient(e){var t=this;return y(function*(){const r=yield E(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new LK(r,t.performanceClient)})()}}class HK{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){var o=this;return y(function*(){if(!o.isBrowserEnvironment)throw R(Ui);const i=e.correlationId||yn(),s=t.id_token?Ln(t.id_token,It):void 0,a=Un(s||{}),c={protocolMode:o.config.auth.protocolMode,knownAuthorities:o.config.auth.knownAuthorities,cloudDiscoveryMetadata:o.config.auth.cloudDiscoveryMetadata,authorityMetadata:o.config.auth.authorityMetadata,skipAuthorityMetadataCache:o.config.auth.skipAuthorityMetadataCache},l=e.authority?new at(at.generateAuthority(e.authority,e.azureCloudOptions),o.config.system.networkClient,o.storage,c,o.logger,e.correlationId||yn()):void 0,u=yield o.loadAccount(e,r.clientInfo||t.client_info||"",i,s,l),d=yield o.loadIdToken(t,u.homeAccountId,u.environment,u.realm,i,a),h=yield o.loadAccessToken(e,t,u.homeAccountId,u.environment,u.realm,r,i,a),f=yield o.loadRefreshToken(t,u.homeAccountId,u.environment,i,a);return o.generateAuthenticationResult(e,{account:u,idToken:d,accessToken:h,refreshToken:f},s,l)})()}loadAccount(e,t,r,o,i){var s=this;return y(function*(){if(s.logger.verbose("TokenCache - loading account"),e.account){const u=Pe.createFromAccountInfo(e.account);return yield s.storage.setAccount(u,r,Un(o||{})),u}if(!i||!t&&!o)throw s.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),R(Nd);const a=Pe.generateHomeAccountId(t,i.authorityType,s.logger,s.cryptoObj,o),c=o?.tid,l=vv(s.storage,i,a,It,r,o,t,i.hostnameAndPort,c,void 0,void 0,s.logger);return yield s.storage.setAccount(l,r,Un(o||{})),l})()}loadIdToken(e,t,r,o,i,s){var a=this;return y(function*(){if(!e.id_token)return a.logger.verbose("TokenCache - no id token found in response"),null;a.logger.verbose("TokenCache - loading id token");const c=sh(t,r,e.id_token,a.config.auth.clientId,o);return yield a.storage.setIdTokenCredential(c,i,s),c})()}loadAccessToken(e,t,r,o,i,s,a,c){var l=this;return y(function*(){if(!t.access_token)return l.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return l.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(t.scope||e.scopes&&e.scopes.length))return l.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;l.logger.verbose("TokenCache - loading access token");const u=t.scope?Ge.fromString(t.scope):new Ge(e.scopes),d=s.expiresOn||t.expires_in+xt(),h=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+xt(),f=ah(r,o,t.access_token,l.config.auth.clientId,i,u.printScopes(),d,h,It);return yield l.storage.setAccessTokenCredential(f,a,c),f})()}loadRefreshToken(e,t,r,o,i){var s=this;return y(function*(){if(!e.refresh_token)return s.logger.verbose("TokenCache - no refresh token found in response"),null;s.logger.verbose("TokenCache - loading refresh token");const a=tM(t,r,e.refresh_token,s.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield s.storage.setRefreshTokenCredential(a,o,i),a})()}generateAuthenticationResult(e,t,r,o){let c,i="",s=[],a=null;t?.accessToken&&(i=t.accessToken.secret,s=Ge.fromString(t.accessToken.target).asArray(),a=zi(t.accessToken.expiresOn),c=zi(t.accessToken.extendedExpiresOn));const l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:Pe.getAccountInfo(l),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class BK extends pM{constructor(e){super(e),this.includeRedirectUri=!1}}class jK extends Yi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){var t=this;return y(function*(){if(!e.code)throw R(Pd);const r=yield E(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(e,O.Silent),o=t.initializeServerTelemetryManager(t.apiId);try{const i={...r,code:e.code},s=yield E(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new BK(s);t.logger.verbose("Auth code client created");const c=new EM(a,t.browserStorage,i,t.logger,t.performanceClient);return yield E(c.handleCodeResponseFromServer.bind(c),p.HandleCodeResponseFromServer,t.logger,t.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof pe&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(R(Li))}}function Ch(n,e,t){try{Wy(n)}catch(r){throw e.end({success:!1},r,t),r}}class Eh{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new oh(this.logger,this.performanceClient):Qd,this.eventHandler=new Zq(this.logger),this.browserStorage=this.isBrowserEnvironment?new gv(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function Pq(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw me(Ma)}return{canonicalAuthority:n.authority?sM(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth)):((n,e,t,r)=>new gv(this.config.auth.clientId,{cacheLocation:Ve.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Ve.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Qd,this.logger,this.performanceClient,this.eventHandler))(),this.nativeInternalStorage=new gv(this.config.auth.clientId,{cacheLocation:Ve.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Ve.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new HK(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return y(function*(){const r=new Eh(e);return yield r.initialize(t),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){var r=this;return y(function*(){if(r.logger.trace("initialize called"),r.initialized)return void r.logger.info("initialize has already been called, exiting early.");if(!r.isBrowserEnvironment)return r.logger.info("in non-browser environment, exiting early."),r.initialized=!0,void r.eventHandler.emitEvent("msal:initializeEnd");const o=e?.correlationId||r.getRequestCorrelationId(),i=r.config.system.allowPlatformBroker,s=r.performanceClient.startMeasurement(p.InitializeClientApplication,o);if(r.eventHandler.emitEvent("msal:initializeStart"),!t)try{r.logMultipleInstances(s)}catch{}if(yield E(r.browserStorage.initialize.bind(r.browserStorage),p.InitializeCache,r.logger,r.performanceClient,o)(o),i)try{r.platformAuthProvider=yield SM(r.logger,r.performanceClient,o,r.config.system.nativeBrokerHandshakeTimeout)}catch(a){r.logger.verbose(a)}r.config.cache.claimsBasedCachingEnabled||(r.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Qt(r.browserStorage.clearTokensAndKeysWithClaims.bind(r.browserStorage),p.ClearTokensAndKeysWithClaims,r.logger,r.performanceClient,o)(o)),r.config.system.asyncPopups&&(yield r.preGeneratePkceCodes(o)),r.initialized=!0,r.eventHandler.emitEvent("msal:initializeEnd"),s.end({allowPlatformBroker:i,success:!0})})()}handleRedirectPromise(e){var t=this;return y(function*(){if(t.logger.verbose("handleRedirectPromise called"),AR(t.initialized),t.isBrowserEnvironment){const r=e||"";let o=t.redirectResponse.get(r);return typeof o>"u"?(o=t.handleRedirectPromiseInternal(e),t.redirectResponse.set(r,o),t.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):t.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return t.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var t=this;return y(function*(){if(!t.browserStorage.isInteractionInProgress(!0))return t.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if("signout"===t.browserStorage.getInteractionInProgress()?.type)return t.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),t.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=t.getAllAccounts(),i=t.browserStorage.getCachedNativeRequest(),s=i&&t.platformAuthProvider&&!e;let a,c;t.eventHandler.emitEvent("msal:handleRedirectStart",O.Redirect);try{if(s&&t.platformAuthProvider){a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,i?.correlationId||""),t.logger.trace("handleRedirectPromise - acquiring token from native platform"),a.add({isPlatformBrokerRequest:!0});const l=new mh(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,865,t.performanceClient,t.platformAuthProvider,i.accountId,t.nativeInternalStorage,i.correlationId);c=E(l.handleRedirectPromise.bind(l),p.HandleNativeRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(t.performanceClient,a.event.correlationId)}else{const[l,u]=t.browserStorage.getCachedRequest(),d=l.correlationId;a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,d),t.logger.trace("handleRedirectPromise - acquiring token from web flow");const h=t.createRedirectClient(d);c=E(h.handleRedirectPromise.bind(h),p.HandleRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(e,l,u,a)}}catch(l){throw t.browserStorage.resetRequestCache(),l}return c.then(l=>(l?(t.browserStorage.resetRequestCache(),o.length<t.getAllAccounts().length?(t.eventHandler.emitEvent("msal:loginSuccess",O.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, login success")):(t.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0},void 0,l.account)):a.event.errorCode?a.end({success:!1},void 0):a.discard(),t.eventHandler.emitEvent("msal:handleRedirectEnd",O.Redirect),l)).catch(l=>{t.browserStorage.resetRequestCache();const u=l;throw t.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",O.Redirect,null,u),t.eventHandler.emitEvent("msal:handleRedirectEnd",O.Redirect),a.end({success:!1},u),l})})()}acquireTokenRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);t.logger.verbose("acquireTokenRedirect called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenPreRedirect,r);o.add({scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return o.add({navigateCallbackResult:!1!==c}),o.event=o.end({success:!0},void 0,e.account)||o.event,c};else{const a=t.config.auth.onRedirectNavigate;t.config.auth.onRedirectNavigate=c=>{const l="function"==typeof a?a(c):void 0;return o.add({navigateCallbackResult:!1!==l}),o.event=o.end({success:!0},void 0,e.account)||o.event,l}}const s=t.getAllAccounts().length>0;try{let a;return DR(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0,"signin"),t.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",O.Redirect,e),a=t.platformAuthProvider&&t.canUsePlatformBroker(e)?new mh(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,861,t.performanceClient,t.platformAuthProvider,t.getNativeAccountId(e),t.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(l=>{if(o.add({brokerErrorName:l.name,brokerErrorCode:l.errorCode}),l instanceof Bn&&Ji(l))return t.platformAuthProvider=void 0,t.createRedirectClient(r).acquireToken(e);if(l instanceof Cn)return t.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createRedirectClient(r).acquireToken(e);throw l}):t.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw t.browserStorage.resetRequestCache(),2===o.event.status?t.performanceClient.startMeasurement(p.AcquireTokenRedirect,r).end({success:!1},a,e.account):o.end({success:!1},a,e.account),t.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",O.Redirect,null,a),a}})()}acquireTokenPopup(e){var t=this;const r=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(p.AcquireTokenPopup,r);o.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",r),Ch(this.initialized,o,e.account),this.browserStorage.setInteractionInProgress(!0,"signin")}catch(c){return Promise.reject(c)}const i=this.getAllAccounts();let s;this.eventHandler.emitEvent(i.length>0?"msal:acquireTokenStart":"msal:loginStart",O.Popup,e);const a=this.getPreGeneratedPkceCodes(r);return this.canUsePlatformBroker(e)?(o.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:r},862).then(c=>(o.end({success:!0},void 0,c.account),c)).catch(c=>{if(o.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof Bn&&Ji(c))return this.platformAuthProvider=void 0,this.createPopupClient(r).acquireToken(e,a);if(c instanceof Cn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(r).acquireToken(e,a);throw c})):s=this.createPopupClient(r).acquireToken(e,a),s.then(c=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",O.Popup,c):this.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Popup,c),o.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>(this.eventHandler.emitEvent(i.length>0?"msal:acquireTokenFailure":"msal:loginFailure",O.Popup,null,c),o.end({success:!1},c,e.account),Promise.reject(c))).finally(y(function*(){t.browserStorage.setInteractionInProgress(!1),t.config.system.asyncPopups&&(yield t.preGeneratePkceCodes(r))}))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return t.ssoSilentMeasurement=t.performanceClient.startMeasurement(p.SsoSilent,r),t.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),Ch(t.initialized,t.ssoSilentMeasurement,e.account),t.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),t.logger.verbose("ssoSilent called",r),t.eventHandler.emitEvent("msal:ssoSilentStart",O.Silent,o),t.canUsePlatformBroker(o)?(t.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),i=t.acquireTokenNative(o,863).catch(s=>{if(t.ssoSilentMeasurement?.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s instanceof Bn&&Ji(s))return t.platformAuthProvider=void 0,t.createSilentIframeClient(o.correlationId).acquireToken(o);throw s})):i=t.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(t.eventHandler.emitEvent("msal:ssoSilentSuccess",O.Silent,s),t.ssoSilentMeasurement?.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),s)).catch(s=>{throw t.eventHandler.emitEvent("msal:ssoSilentFailure",O.Silent,null,s),t.ssoSilentMeasurement?.end({success:!1},s,e.account),s}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);t.logger.trace("acquireTokenByCode called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenByCode,r);Ch(t.initialized,o),t.eventHandler.emitEvent("msal:acquireTokenByCodeStart",O.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw R(xd);if(e.code){const i=e.code;let s=t.hybridAuthCodeResponses.get(i);return s?(t.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(t.logger.verbose("Initiating new acquireTokenByCode request",r),s=t.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(t.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",O.Silent,a),t.hybridAuthCodeResponses.delete(i),o.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>{throw t.hybridAuthCodeResponses.delete(i),t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",O.Silent,null,a),o.end({success:!1},a),a}),t.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(t.canUsePlatformBroker(e,e.nativeAccountId)){o.add({isPlatformBrokerRequest:!0});const i=yield t.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof Bn&&Ji(s)&&(t.platformAuthProvider=void 0),o.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return o.end({success:!0},void 0,i.account),i}throw R(Fd)}throw R(Od)}catch(i){throw t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",O.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var t=this;return y(function*(){return t.logger.trace("acquireTokenByCodeAsync called",e.correlationId),t.acquireTokenByCodeAsyncMeasurement=t.performanceClient.startMeasurement(p.AcquireTokenByCodeAsync,e.correlationId),t.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),yield t.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(t.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache}),i)).catch(i=>{throw t.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,t){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenFromCache,e.correlationId),t){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return E(o.acquireToken.bind(o),p.SilentCacheClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw _(Fn)}})()}acquireTokenByRefreshToken(e,t){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenByRefreshToken,e.correlationId),t){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return E(o.acquireToken.bind(o),p.SilentRefreshClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw _(Fn)}})()}acquireTokenBySilentIframe(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.AcquireTokenBySilentIframe,e.correlationId);const r=t.createSilentIframeClient(e.correlationId);return E(r.acquireToken.bind(r),p.SilentIframeClientAcquireToken,t.logger,t.performanceClient,e.correlationId)(e)})()}logout(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return t.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),t.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return DR(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0,"signout"),t.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Wy(this.initialized),this.browserStorage.setInteractionInProgress(!0,"signout"),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){var t=this;return y(function*(){if(!t.isBrowserEnvironment)return void t.logger.info("in non-browser environment, returning early.");const r=t.getRequestCorrelationId(e);return t.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const t=this.getRequestCorrelationId();return function Gq(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function zq(n,e,t,r){const o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function qq(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function Kq(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function Wq(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function Qq(n,e,t){e.setActiveAccount(n,t)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function Yq(n,e){return n.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,t){var r=this;return y(function*(){r.logger.verbose("hydrateCache called");const o=Pe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield r.browserStorage.setAccount(o,e.correlationId,Un(e.idTokenClaims)),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,t)):r.browserStorage.hydrateCache(e,t)})()}acquireTokenNative(e,t,r,o){var i=this;return y(function*(){if(i.logger.trace("acquireTokenNative called"),!i.platformAuthProvider)throw R(Qa);return new mh(i.config,i.browserStorage,i.browserCrypto,i.logger,i.eventHandler,i.navigationClient,t,i.performanceClient,i.platformAuthProvider,r||i.getNativeAccountId(e),i.nativeInternalStorage,e.correlationId).acquireToken(e,o)})()}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!nc(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Ye.NONE:case Ye.CONSENT:case Ye.LOGIN:case Ye.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new AK(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new bK(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new xK(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new wM(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new UK(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new jK(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return SR(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===Ve.LocalStorage?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===Ve.LocalStorage?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?yn():I.EMPTY_STRING}loginRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return t.logger.verbose("loginRedirect called",r),t.acquireTokenRedirect({correlationId:r,...e||Vb})})()}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Vb})}acquireTokenSilent(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e),o=t.performanceClient.startMeasurement(p.AcquireTokenSilent,r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Ch(t.initialized,o,e.account),t.logger.verbose("acquireTokenSilent called",r);const i=e.account||t.getActiveAccount();if(!i)throw R(Dd);return t.acquireTokenSilentDeduped(e,i,r).then(s=>(o.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),{...s,state:e.state,correlationId:r})).catch(s=>{throw s instanceof pe&&s.setCorrelationId(r),o.end({success:!1},s,i),s})})()}acquireTokenSilentDeduped(e,t,r){var o=this;return y(function*(){const i=fh(o.config.auth.clientId,{...e,authority:e.authority||o.config.auth.authority,correlationId:r},t.homeAccountId),s=JSON.stringify(i),a=o.activeSilentTokenRequests.get(s);if(typeof a>"u"){o.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),o.performanceClient.addFields({deduped:!1},r);const c=E(o.acquireTokenSilentAsync.bind(o),p.AcquireTokenSilentAsync,o.logger,o.performanceClient,r)({...e,correlationId:r},t);return o.activeSilentTokenRequests.set(s,c),c.finally(()=>{o.activeSilentTokenRequests.delete(s)})}return o.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.performanceClient.addFields({deduped:!0},r),a})()}acquireTokenSilentAsync(e,t){var r=this;return y(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement(p.AcquireTokenSilentAsync,e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",O.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield E(rK,p.InitializeSilentRequest,r.logger,r.performanceClient,e.correlationId)(e,t,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=y(function*(l){if(function VK(n,e){const o=!(n instanceof Cn&&n.subError!==Ki)&&(n.errorCode===Nt.INVALID_GRANT_ERROR||n.errorCode===Fn)||n.errorCode===qi||n.errorCode===hv,i=EG.includes(e);return o&&i}(l,s)){if(r.activeIframeRequest){if(5!==s){const[d,h]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,i.correlationId);const f=r.performanceClient.startMeasurement(p.AwaitConcurrentIframe,i.correlationId);f.add({awaitIframeCorrelationId:h});const g=yield d;if(f.end({success:g}),g)return r.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),l}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),E(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(h=>{d=h}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),E(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i).then(h=>(d(!0),h)).catch(h=>{throw d(!1),h}).finally(()=>{r.activeIframeRequest=void 0})}}throw l});return function(l){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Silent,c),r.performanceClient.addFields({fromCache:c.fromCache},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",O.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,t){var r=this;return y(function*(){return nc(r.config,r.logger,r.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),r.acquireTokenNative(e,61,e.account.nativeAccountId,t).catch(function(){var o=y(function*(i){throw r.performanceClient.addFields({brokerErrorName:i.name,brokerErrorCode:i.errorCode},e.correlationId),i instanceof Bn&&Ji(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.platformAuthProvider=void 0,_(Fn)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),1===t&&r.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),E(r.acquireTokenFromCache.bind(r),p.AcquireTokenFromCache,r.logger,r.performanceClient,e.correlationId)(e,t).catch(o=>{if(1===t)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",O.Silent,e),E(r.acquireTokenByRefreshToken.bind(r),p.AcquireTokenByRefreshToken,r.logger,r.performanceClient,e.correlationId)(e,t)}))})()}preGeneratePkceCodes(e){var t=this;return y(function*(){return t.logger.verbose("Generating new PKCE codes"),t.pkceCode=yield E(vo,p.GeneratePkceCodes,t.logger,t.performanceClient,e)(t.performanceClient,t.logger,e),Promise.resolve()})()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;window&&(window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function $K(n,e,t){const r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}(t,e,this.logger))}}function zv(){return(zv=y(function*(n,e){const t=new WR(n);return yield t.initialize(),Eh.createController(t,e)})).apply(this,arguments)}class rc{static createPublicClientApplication(e){return y(function*(){const t=yield function GK(n,e){return zv.apply(this,arguments)}(e);return new rc(e,t)})()}constructor(e,t){this.isBroker=!1,this.controller=t||new Eh(new WR(e))}initialize(e){var t=this;return y(function*(){return t.controller.initialize(e,t.isBroker)})()}acquireTokenPopup(e){var t=this;return y(function*(){return t.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){var r=this;return y(function*(){return r.controller.hydrateCache(e,t)})()}clearCache(e){return this.controller.clearCache(e)}}const qK=window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1;function KK(){return new rc({auth:{clientId:"da9762ef-4af4-4987-aefd-7c286c70e784",authority:"https://login.microsoftonline.com/29d45e57-3212-42ca-9229-0f0abdc4d331",redirectUri:"http://localhost:4200"},cache:{cacheLocation:Ve.LocalStorage,storeAuthStateInCookie:qK}})}function WK(){const n=new Map;return n.set("https://graph.microsoft.com/v1.0/me",["user.read"]),{interactionType:O.Redirect,protectedResourceMap:n}}function QK(){return{interactionType:O.Redirect,authRequest:{scopes:["user.read"]}}}let YK=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Gn({type:n,bootstrap:[Qz,jz]})}static{this.\u0275inj=wn({providers:[{provide:bb,useClass:Bz,multi:!0},{provide:Kd,useFactory:KK},{provide:Wd,useFactory:QK},{provide:Qy,useFactory:WK},po,Yy,fo],imports:[Zj,Gz,aG,$z]})}}return n})();Yj().bootstrapModule(YK).catch(n=>console.error(n))}},fe=>{fe(fe.s=769)}]);